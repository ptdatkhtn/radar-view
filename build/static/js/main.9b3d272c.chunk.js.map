{"version":3,"sources":["../../React-apps/connectors/tag-service-api/index.js","../../React-apps/connectors/statistics-api/index.js","helpers.js","reducers/radarSettings.js","reducers/phenomena.js","reducers/filters.js","reducers/signals.js","reducers/index.js","actions/network.js","../../React-apps/connectors/media-api/index.js","actions/radarSettings.js","configureStore.js","components/Phenomenon.js","env.js","components/Phenomena.js","components/AllPhenomena.js","containers/AllPhenomenaContainer.js","selectors/index.js","config.js","quill.js","components/CreateRadarForm.js","containers/CreateRadarFormContainer.js","containers/SandboxPhenomenaSelectorContainer.js","components/AddPhenomenaSandbox.js","radarDataApiProxy.js","actions/phenomenaTypes.js","../../React-apps/connectors/screenshot-service-api/index.js","pptx-generator.js","actions/radarData.js","containers/AddPhenomenaSandboxContainer.js","actions/confirmDialog.js","containers/ConfirmDialogContainer.js","components/AddSignalForm.js","actions/signals.js","containers/AddSignalFormContainer.js","components/SignalList.js","containers/SignalListContainer.js","components/ShareRadarModal.js","containers/ShareRadarModalContainer.js","components/PublicLink/PublicLink.js","components/ConfirmationModal/ConfirmationModal.js","components/DeleteConfirmationModal/DeleteConfirmationModal.js","components/SharedLinkModalAfterDelete/SharedLinkModalAfterDelete.js","components/SideNav.js","containers/SideNavContainer.js","containers/ErrorModalContainer.js","components/SectorEditorForm.js","components/EditSectorMenu.js","components/RadarPage.js","actions/sectors.js","containers/RadarPageContainer.js","actions/timelines.js","components/TimerangeEditorForm.js","containers/TimeRangeEditorFormContainer.js","components/Filters.js","containers/FiltersContainer.js","serviceWorker.js","styles.js","translations.js","index.js","../../React-apps/connectors/news-feed-api/index.js","../../React-apps/connectors/phenomena-api/index.js","../../React-apps/connectors/content-service-api/index.js","../../React-apps/connectors/search-api/index.js","../../React-apps/connectors/radar-data-api/normalize.js","../../React-apps/connectors/radar-data-api/index.js","components/PublicLink/PublicLink.module.css","../../React-apps/connectors/session.js","../../React-apps/connectors/drupal-api/normalize.js","../../React-apps/connectors/drupal-api/index.js","polyfills.js"],"names":["POST","httpRequest","method","path","a","payload","axios","url","process","headers","getSessionToken","data","then","res","tagPhenomenon","groupId","phenomenonUuid","tagUri","property","tag","content","error","Boolean","removeTagPhenomenon","getTagUrisByPhenomenonUuid","tags","filter","map","getTagUrisByPhenomenonUuids","phenomenonUuids","uuid","tagsByUris","Array","isArray","length","result","Object","entries","docUri","docUuid","replace","getTagByUri","uri","re","resolver","group","namePart","groupTags","Number","find","name","fpTags","matches","match","getLocalizedTagByUri","lang","label","addTagUris","prefix","getGroupTags","get","getGroupSettings","getFpTags","getHubspotAlertsTaxonomy","results","translation","url_alias","getLocalizedFpTags","withCredentials","phenomenaStatisticsApi","getPhenomenaStatistics","uuids","getCoordsFromAngleAndRadius","angle","radius","d3","slice","detectLeftButton","evt","event","window","buttons","which","button","publicEditorRole","permissions","_","permission","makeGroup","role","id","radarsUsed","radarsAllowedString","radarsAllowed","accountDrupalRoles","accountPermissions","availableResources","canEditPublic","canEdit","value","hasAvailableRadars","isFpEditor","getUserRoles","paramsString","document","location","search","searchParams","URLSearchParams","initialState","existingRadarPage","addRadarFormOpen","addRadarFormPage","groups","radarName","mapIntro","radarLanguage","getCurrentLanguage","phenomenaSet","hideUsersFromTrial","radarImage","votingOn","ratingsOn","discussionOn","commentsOn","likingOn","votingUp","editMenuOpen","editSectorsPageOpen","editTimeRangesPageOpen","addPhenomenaVisible","editPhenomenaVisible","account","displayHaloWhenRating","enableUrlLogin","urlLoginExpire","urlLoginLink","isRadarTemplate","radarTitleImage","timelineLabelFormat","draggedPhenomenonId","filtersVisible","activeFilter","activeTagFilter","signalListVisible","signalCreateVisibility","signals","totalRadarSignals","combineReducers","sectors","filters","state","type","TOGGLE_FILTERS","SET_ACTIVE_FILTER","SET_ACTIVE_TAG_FILTER","includes","RESET_FILTERS","phenomena","REFETCH_DATA_SUCCESS","FETCH_RADAR_SUCCESS","UPDATE_PHENOMENON","phenomenon","UPDATE_PHENOMENON_VERSION","version","CREATE_PHENOMENA_SUCCESS","concat","DELETE_PHENOMENA_SUCCESS","item","CREATE_PHENOMENA_POSITION_SUCCESS","UPDATE_PHENOMENON_INGESTION_SUCCESS","timelines","radarSettings","SET_DRAGGED_PHENOMENON","TOGGLE_LABEL_MODE","TOGGLE_EDIT_MENU_VISIBILITY","UPDATE_RADAR_SUCCESS","CREATE_RADAR_SUCCESS","origin","pathname","href","time_ranges","HANDLE_ADD_FORM_VISIBILITY","setLanguage","canDeleteRadar","String","userId","ownerId","canEditRadar","isVisitor","canShareRadar","CHANGE_RADAR_SHARING","CHANGE_RADAR_SHARING_EXPIRY","CHANGE_EXISTING_RADAR_PAGE","HANDLE_EDIT_SECTOR_PAGE_VISIBILITY","HANDLE_EDIT_TIMERANGES_PAGE_VISIBILITY","CHANGE_RADAR_NAME","CHANGE_MAP_INTRO","CHANGE_RADAR_LANGUAGE","CHANGE_ADD_FORM_PAGE","CHANGE_PHENOMENA_SET","CHANGE_RADAR_GROUP","CHANGE_HIDE_USERS_FROM_TRIAL","CHANGE_RADAR_IMAGE","CHANGE_RADAR_TITLE_IMAGE","CHANGE_VOTING_ON","CHANGE_DISPLAY_HALO_WHEN_RATING","CHANGE_RATINGS_ON","CHANGE_RATINGS_SETTINGS","CHANGE_DISCUSSION_ON","CHANGE_COMMENTS_ON","CHANGE_LIKING_ON","CHANGE_VOTING_UP","GET_GROUPS_SUCCESS","HANDLE_ADD_PHENOMENA_VISIBILITY","HANDLE_EDIT_PHENOMENA_VISIBILITY","UPDATE_RADAR_VERSION","radar_version","radarSets","loading","errors","phenomenaTypes","phenomenaTypesById","HANDLE_SIGNAL_LIST_VISIBILITY","HANDLE_SIGNAL_CREATE_VISIBILITY","FETCH_SIGNALS_SUCCESS","total","FETCH_MORE_SIGNALS_SUCCESS","CREATE_SIGNAL_SUCCESS","confirmDialog","loadingError","component","defaultMessage","message","actionTypes","getNetworkMethods","successType","success","dispatch","err","uploadFileRequest","filePath","file","fileHeaders","uploadUrl","put","uploadFile","getImageUrl","MEDIA_API_URL","handleImageUploadIfNeeded","imageFile","image","toggleEditMenuVisiblity","visibilityState","getUserGroups","requestTranslation","groupRequest","drupalApi","getGroups","membershipRequest","getMemberships","Promise","all","memberships","membershipGroupIds","values","membership","parseInt","gid","indexOf","catch","changeAddRadarFormVisibility","page","changeDisplayHaloWhenRating","rating","changeRadarName","changeMapIntro","changeRadarLanguage","language","changeRadarGroup","changeAddRadarFormPage","changePhenomenaSet","set","changeHideUsersFromTrial","bool","changeRadarImage","changeRadarTitleImage","changeVotingOn","changeRatingsOn","changeRadarSharing","changeRadarSharingExpiry","date","changeRatingsSettings","axisXTitle","axisXMax","axisXMin","axisYTitle","axisYMax","axisYMin","fourFieldsTopLeft","fourFieldsTopRight","fourFieldsBottomLeft","fourFieldsBottomRight","changeDiscussionOn","changeCommentsOn","changeLikingOn","changeVotingUp","toggleFilter","setActiveFilter","setActiveTagFilter","resetFilters","createRadar","getState","isObject","radarInput","updateRadar","hideForm","getRadarSets","getRadarTemplates","sectorPageHandler","timerangePageHandler","clearAllErrors","changeAddPhenomenaVisibility","changeEditPhenomenaVisibility","console","composeEnhancers","compose","store","createStore","rootReducer","applyMiddleware","thunk","radarCallbacks","openPhenomenonEditor","Phenomenon","handleDrag","e","stopPropagation","props","onPhenomenaDrag","phenomenonRef","ref","getPhenomenonType","defaultValue","alias","getClassNameState","includesTag","getFilterClassName","tagFilter","setFilter","getClassNameDrag","dragged","deleting","this","addEventListener","removeEventListener","fill","labelWidth","phenomenaSize","cx","cy","fontSize","hidden","radarId","title","short_title","halo","style","color","hideEdit","hasGroup","hasOwnProperty","groupUrl","urlParams","vsid","getPhenomenonUrl","classes","classNames","left","data-href","className","size","x","y","width","height","xlinkHref","display","alignItems","justifyContent","textAnchor","verticalAnchor","PureComponent","getConstrainedValue","min","max","Phenomena","range","copyPhenomena","constraints","sector","xScale","domain","yScale","index","fy","startForce","nodes","force","stop","strength","distanceMax","on","node","setState","getNodeCoordinates","invert","nextProps","nextPhenomena","isEqual","draggedPhenomenon","phenomenaDisplayProps","key","AllPhenomena","timeRanges","getPhenomenaDisplayProps","connect","bindActionCreators","isCollaborationToolsAllowed","createSelector","g","collaboration_tools","customQuillModules","toolbar","header","font","list","indent","clipboard","matchVisual","radarLanguages","initialCommentTopics","checked","TIMELINE_TEMPLATE","position","year","description","timerangeColors","interpolate","formats","URL","webkitURL","CreateRadarForm","setFieldError","field","hasError","validateRadarName","hasRadarNameError","validateGroup","hasGroupError","groupValue","handleRadarNameChange","target","handleMapIntroChange","handleValueChange","handleRadarLanguageChange","handlePhenomenaSetChange","imageUrl","radarSet","logo_image","handleDisplayHaloWhenRatingChange","handleGroupChange","handleDiscussionOnChange","handleVotingOnChange","handleRatingsOnChange","handleLikingOnChange","handleCommentsOnChange","handleVotingSelection","handleHideUsersFromTrialClick","handleTopicChange","topicLabel","updatedTopics","commentTopics","topic","handleImageSelect","fileName","files","reader","FileReader","onload","img","Image","src","createObjectURL","readAsDataURL","handleTitleImageSelect","imageTitleFile","handleTitleImageDelete","handleImageDelete","handleNextClick","validate","handleBackClick","handleCloseClick","redirectUser","renderConclusionForm","paddingBottom","modules","onChange","renderBasicSettingsForm","propsRadarTitleImage","renderTitleLogoInput","searchable","options","clearable","radarLogoEnabled","SelectImageContainer","RadarImageContainer","RadarImage","RadarImageCloseContainer","onClick","RadarImageClose","SelectImageInputContainer","SelectImageInput","accept","placeholder","SelectImageButton","RadarTitleImage","whiteBg","renderFormPage","renderUserOptionsForm","renderHeaderAndLanguageForm","first","titleLogo","shouldSetDefaultRadarSet","push","SpaceBetween","HalfWidth","icons","defaultChecked","marginTop","times","FullWidthBgContainer","paddingTop","Columns","Column","Label","Input","FieldError","maxWidth","renderFieldError","SelectWrapper","select","toLowerCase","disabled","phrase","firstPage","Pagination","PaginationLine","PaginationNumber","active","renderCancelButton","renderNextButton","shown","renderPagination","styled","div","input","i","getRadarSetsByLanguage","PhenomenaSelector","AddPhenomenaSandbox","createModalShown","filtersShown","successfullyCreatedCallback","handlePhenomenaSelection","selectedPhenomena","handleCreateNew","handleAdd","addPublicPhenomenaToRadar","hideAddForm","bumpResetFilters","updateMouseCoords","storePhenomenon","radar","isOpen","contentLabel","modalStyles","ariaHideApp","onRequestClose","onSubmit","newsFeedChanges","onCancel","onDelete","placing","handle","zIndex","opacity","cursor","onSelect","onCreate","onAddToRadarClick","sandbox","handleFilterChange","renderCreateModal","handler","radarApi","Error","updateRadarVersion","radarDataApiProxy","Proxy","radarDataApi","getPhenomenaTypes","screenshot","selector","waitFor","encoding","addHeading","addTitle","addSlide","addCoverSlide","addPreviewSlide","addSectorsSlide","addSectorSummarySlide","addSectorContent","addTopVotedContentSlide","addRatedContentImageSlide","addRatedContentAxisSlide","addCommentSummarySlide","slide","tr","addText","text","comment_count","breakLine","radarResultsUrl","hyperlink","xPhenomena","yPhenomena","xOffset","forEach","axis","w","h","bold","rows","rating_avg","phenomenonTypeTitlesById","toFixed","addTable","colW","valign","addImage","pageNum","totalCount","vote_sum","toUpperCase","summary","time_range","time","yearMin","yearMax","timeRangeStr","isTextBox","shrinkText","toText","notes","bullet","lineSpacing","masterName","undefined","radarUrl","autoShrink","align","createdDate","username","opts","pptx","assign","fontFace","txt","PptxGenJS","getUsername","reportCreatedDate","Date","toLocaleDateString","phenomenonTypes","reduce","obj","getRadar","results_url","radarPhenomenaDataById","getRadarPhenomena","radarPhenomena","p","sort","defineLayout","layout","defineSlideMaster","objects","sectorPhenomena","sectorId","splice","sortedPhenomena","aVoteSum","aTimestamp","bVoteSum","bTimestamp","topVotedPageCount","Math","ceil","topVotedPageNum","axisPhenomena","aRatingAvg","bRatingAvg","aAvg","writeFile","html","htmlToText","fromString","wordwrap","ignoreImage","singleNewLineParagraphs","fetchRadar","radarData","linkEl","createElement","setAttribute","head","appendChild","phenomenaData","speech_bubble","refetchRadarData","deleteRadarPhenomenon","callback","phenomenon_uuid","deletePhenomenon","updatePhenomenonPosition","phenomenaApiErrorHandler","errorFunc","response","error_code","archived","_upload","rest","phenomenonInput","media","storePhenomenonWithNewsFeeds","storedPhenomenon","status","failedNewsFeedTitles","NEWSFEED_ERROR_PARTIAL","NEWSFEED_ERROR","updatePhenomenon","positionData","updatedPhenomenon","updatePhenomenonVersion","cloneRadar","parentRadarId","deleteRadar","generatePowerpoint","generatePPTX","toggleConfirmationDialog","ConfirmDialog","AddSignalForm","body","errorsShown","handleTitleChange","handleBodyChange","handleCreate","createSignal","changeSignalCreateVisibility","SignalImage","changeSignalListVisibility","fetchRadarSignals","searchInput","getSignals","archiveSignal","signalId","archiveDocument","TYPE_SIGNAL","signal","titleMissing","languageMissing","doc","upsertDocument","SignalList","debounceTimeout","handleArchiveSignal","handleScroll","signalData","totalPages","scrollHeight","scrollTop","clientHeight","handleSearchChange","clearTimeout","setTimeout","nextState","nextPage","willBeVisible","canArchiveSignals","image_url","created","created_at","created_by_name","toJSON","SignalItem","backgroundColor","alt","objectFit","dangerouslySetInnerHTML","__html","split","reverse","join","confirm","SearchResultsList","small","renderSignal","bind","onScroll","padding","renderSignals","ShareRadarModal","requestClose","requestOpenPublicLink","checkPublicLinkExsited","publicLink","isPublicShareUrlEnabled","transform","borderRadius","paddingLeft","marginRight","Component","PublicLink","isModalOpen","publicURL","openConfirmationModal","openDeleteConfirmationModal","useState","shareInput","setShareInput","linkCopied","setLinkCopied","onRequestCloseModal","styles","ReactModal__Content","Modal__Title","readOnly","onFocus","el","onCopy","focus","flexShrink","RegenerateBtn","SavePublicLink__Container","ConfirmationModal","regeneratePublicLink","confirmationModal","confirmationModalClose","paddingModalStyles","textAlign","DeleteConfirmationModal","deletePublicLink","deleteConfirmationModal","deleteConfirmationModalClose","marginLeft","SharedLinkModalAfterDelete","SharedLinkModalAfterDeleteClose","RadarTitle","SideNav","deletingModalOpen","sharingModalOpen","clonedModalOpen","generatingModalOpen","publicLinkModal","publicSharedLink","publicSharedUserInfo","radarShareId","publicSharedLinkExsited","radarTitle","toggleOpenEditMenu","clonedRadarCallback","newRadarHref","closeRadar","redirect","getReturnUrl","closePublicLink","openPublicLinkModal","createOrReplaceRadarPublicShare","log","getRadarPublicShare","onRegeneratePublicLink","regenerateRadarPublicShare","closeConfirmationModal","closeDeleteConfirmationModal","onDeletePublicLink","removeRadarPublicShare","onCloseSharedLinkModalAfterDelete","onShareRadarClick","shareQuery","publicShareUrlEnabled","returnId","signalToolEnabled","collaborationToolsAllowed","renderRadarEditor","onClose","Container","Edit","EditMenu","EditTriangle","EditMenuHeader","lineHeight","EditMenuItem","CloseButton","span","returnUri","ErrorModal","SectorEditorForm","titleInput","descriptionInput","handleDescriptionChange","updateSector","Title","SubTitle","ButtonsContainer","h2","h3","EditSectorMenu","timeranges","addSector","deleteSector","handleEditSectorForm","top","RadarPage","zoomed","phenomenaDragged","isZoomable","zoomTransform","handleResultsRedirect","isEditorPageOpen","hideSectorMenuEdit","editMenuPosition","showSectorEditMenu","pageX","pageY","handleEditPhenomenonFormClose","renderRadar","containerWidth","containerHeight","k","shouldRadarRender","xmlns","svgRef","radarRef","renderTimelines","renderSectors","renderTimelineTooltip","renderLogo","renderPhenomena","renderDragMarker","renderMenuLink","scaled","r","stroke","icon","renderEditabilityTooltip","offset","middleOfSectorAngle","startAngle","endAngle","toolTipOffset","renderSectorEditor","last","lastSectors","lastRadius","outerRadius","editSector","zoomExtent","newlyCreated","setDraggedPhenomenon","documentElement","updatingPhenomena","longpressTimeout","onPhenomenaDragEnd","handleMouseAction","radarRadius","radians","atan2","PI","sqrt","pow","isOutside","timeRange","innerRadius","outerTimeRange","boundaryRadius","boundaryTime","endYear","startYear","outerSector","scale","mouseCoords","deleteRadarPhenomenonOpen","preventDefault","svg","labelHeight","iconSize","handleWebsocketUpdate","update","toast","svgDimensions","containerSize","zoom","scaleExtent","isIconImgLoading","sectorDescriptionModal","attachEvents","prevProps","call","scaleBy","isLast","strokeWidth","strokeDasharray","selectedKey","arc","d","radarLogoLinkDisabled","logoRadius","tooltipHeight","tooltipY","line","isPlaceholder","getTimerangeLabelPath","pointerEvents","dy","startOffset","topics","onMessage","Authorization","hideInfoButton","RadarTitleLogo","direction","renderTitle","renderBottomLeftNav","renderEditSectorMenu","renderSandbox","radarWidth","baseVal","renderEditPhenomenonForm","renderSockJsClient","renderCreateRadarModal","renderSectorDescriptionModal","renderDeleteRadarPhenomenonModal","h1","placement","selectedSector","isEmpty","next","previous","createSector","affectedSectors","s","resultData","deletedSectorId","radarVersion","getPhenomena","getSectorPhenomena","phenomenas","getTimelineSectors","getTimeRanges","timeLineBoundaries","getRadarData","createTimeRanges","getDraggedPhenomenon","Dimensions","WrappedComponent","thisRadius","centerRadius","previousRadius","band","keys","sectorIndex","step","phenomenonRadius","getCreateTimeRanges","createPhenomenon","createPhenomenonWithPosition","roundToX","num","X","round","updateTimerange","timerange","updateRadarTimeRange","timeRangeData","updateTimerangePosition","newTimelinePositions","oldTimelinePositions","newPosition","difference","timelineToUpdate","updatePositions","removeTimeline","deleteRadarTimeRange","positions","timeline","updateTimelinePositions","timelineYearRangeValues","addTimeline","newTimelines","newTimelineIndex","sortedIndexBy","timelinePosition","addRadarTimeRange","newTimelineState","toggleLabelMode","timerangeEditModal","updateTimerangeBlock","oldPositions","calculateModalDisplacement","MODAL_TO_RADAR_MARGIN","availableWidth","innerWidth","MODAL_WIDTH","cancelEvents","blurHandles","handleYearChange","handleLabelChange","handleLabelPositionChange","generateLabelPositionOptions","nextPosition","option","validateTimerangeInput","firstYear","lastYear","isNaN","nextTimeline","previousTimeline","RANGE_BOUNDARY","previousYear","nextYear","findIndex","resetTimerangeEditModal","renderTimeRangeModal","edit","disabledText","LabelInput","maxLength","InputContainer","YearInput","renderHandles","handleProps","dragging","isDisabled","toString","DragIconContainer","border","data-toggle","onMouseDown","onMouseUp","aria-labelledby","upperFirst","toLower","savePreviousPosition","handles","getElementsByClassName","blur","orientation","navigator","userAgent","TimeRangeEditorContainer","isMobileDevice","RangeStyles","onBeforeChange","onAfterChange","newPositions","vertical","allowCross","pushable","RANGE_MAX","Z_INDEX_MODAL","createGlobalStyle","TimerangeEditorForm","OptionsListItem","LegendContainer","FiltersButton","StateContainer","PhenomenaState","HubLink","ActiveFiltersIndicator","useTags","activeFilters","rel","fontWeight","renderTags","phenomenaType","groupType","borderBottom","hostname","RadarStyles","initTranslations","pptxTimestamp","en","fi","pptxCommentsTitle","pptxCommentsText","count","download","downloadPPTXDescription","pptxGenerateReport","generatingPPTXError","pptxNotVoted","pptxReportBy","pptxSectorListTitle","pptxRatedContent","pptxReportTitle","pptxSector","pptxSectorContent","pptxTopVotedContent","timelineModeTitle","timelineModeSubtitle","timelineDeleteTitle","timelineDeleteSubtitle","addTimelineButton","deleteSignalConfirmation","add","timerangeBoundaryError","timerangeSpaceError","timerangeAmountError","timerangeError","timerangeSmallerYearError","timerangeLargerYearError","timerangeCurrentYearError","currentYear","timelineEditor","updatingTimelinesPositionError","removingTimelineError","addingTimelineError","timerangeExistsError","typeLabel","labelPosition","afterLabel","previousLabel","consecutiveYearError","filterPhenomena","goToHub","moreInfoHub","toggleTimelineMode","done","cancel","filterByType","filterByTag","openPublicLink","createPublicLink","publicLinkNote","publicLinkURL","regeneratePublicLinkNote","deletePublicLinkBtn","sharePublicLinkConfirmation","sharePublicLinkConfirmationNote","deletePublicLinkConfirmation","deletePublicLinkConfirmationNote","copyToClipboard","publicLinkCopied","shareRadarFromUsrMngmt","publicLinkExisted","checkPublicLinkAlreadyExisted","goToManagement","ok","sharedLinkDeletedNote","appElement","getElementById","startSession","ReactDOM","render","getAttribute","toastClassName","progressClassName","serviceWorker","ready","registration","unregister","newsFeedApi","addNewsFeed","removeNewsFeed","feedUuid","getNewsFeeds","mergePhenomena","phenomenonDocuments","searchApiResult","radarDataApiData","include_archived","NEWSFEED_SUCCESS","archivePhenomenon","storeNewsFeeds","addedNewsFeeds","deletedNewsFeeds","newsFeed","operations","delete","added","newsFeedStatus","getPhenomenonByUUIDAndGroup","getDocument","related_phenomena","relatedPhenomena","newsFeeds","transformFromLegacy","shortTitle","lead","video","videoText","phenomenonType","feedTag","timing","links","feed_tags","transformToLegacy","videoUrl","mediaText","other","httpPostRequest","query","enhanced","types","time_min","time_max","test","radar_uuid","getRadars","empty","fields","template","normalizePhenomenon","x_offset","sector_id","normalizePhenomenonInput","radar_id","parseFloat","restData","phenomenonData","sectorData","module","exports","sessionStorage","getItem","getCsrfToken","roles","JSON","parse","csrfRes","csrfToken","setItem","tokenRes","token","user_id","user_name","stringify","interceptors","use","reject","normalizeRadar","hide_users","map_intro","axis_x_title","axis_x_max","axis_x_min","axis_y_title","axis_y_max","axis_y_min","four_fields_top_left","four_fields_top_right","four_fields_bottom_left","four_fields_bottom_right","enable_issue_rating","allow_issue_rating","show_freewall","enable_issue_commenting","allow_comment_thumbing","display_halo_when_rating","signal_tool_enabled","owner_id","enable_url_login","url_login_expire","url_login_link","radar_template","title_logo","timeline_label_format","normalizeRadarInput","template_id","normalizeUpdateRadarInput","normalizeCreateRadarInput","normalizeRelatedPhenomena","phenom","dto","short_name","group_id","megatrend","issue_state","video_url","media_text","ingress_body","feed_tag","visibility","normalizePhenomenonTypes","customTypes","defaultTypes","order","sortedTypes","sortBy","sortTypes","normalizeGroupPhenomenonTypes","groupPhenomenonTypes","normalizeFeedTags","feedTags","normalizeRestApiResult","drupalRestApiObject","normalizeGroup","GET","DELETE","PATCH","parent_radar_id","createRadarSectorPhenomenon","updateRadarSectorPhenomenon","phenomenonId","deleteRadarSectorPhenomenon","updateGroup","getRadarsByGroupId","getMembershipByGroupId","roleFilter","searchPhrase","deleteMemberships","membershipIds","mid","updateMembershipRole","getGroupById","grantRadarUserAccess","revokeRadarUserAccess","inviteToRadar","createRadarShareLink","groupTypes","getRssFeedTags","getGroupsWithMemberShips","groupsToNormalize","fetchShares","regenerateShare","deleteShare","handlePublicShareInfo","expired","login_expire","getTime","info","radar_share_url","getVotingResults","prototype","start"],"mappings":"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","file":"static/js/main.9b3d272c.chunk.js","sourcesContent":["import { getGroupSettings, getHubspotAlertsTaxonomy } from '../drupal-api'\nimport { get } from 'lodash-es'\nimport axios from 'axios'\nimport { getSessionToken } from '../session'\n\nconst TAG_SERVICE_API_URL = process.env.REACT_APP_TAG_SERVICE_API_URL\n\nconst GET = 'GET'\nconst POST = 'POST'\nconst DELETE = 'DELETE'\nconst PUT = 'PUT'\nconst PATCH = 'PATCH'\n\nasync function httpRequest (method, path, payload = null) {\n  return axios({\n    method: method,\n    url: `${TAG_SERVICE_API_URL}/${path}`,\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${getSessionToken()}`\n    },\n    data: payload\n  }).then(res => res.data)\n}\n\nexport async function tagPhenomenon (groupId, phenomenonUuid, tagUri, property = 'fp:docs/props/has') {\n  const { error } = await httpRequest(POST, `?group=${groupId}`, { tag: tagUri, content: `fp:docs/phenomenon/${phenomenonUuid}`, property })\n  return Boolean(error)\n}\n\nexport async function removeTagPhenomenon (groupId, phenomenonUuid, tagUri, property = 'fp:docs/props/has') {\n  const { error } = await httpRequest(POST, `remove?group=${groupId}`, { tag: tagUri, content: `fp:docs/phenomenon/${phenomenonUuid}`, property })\n  return Boolean(error)\n}\n\n/**\n * Returns tag uri string array for a phenomenon uuid\n *\n * @param groupId\n * @param phenomenonUuid\n * @param property\n * @return {Promise<String[]>}\n */\nexport async function getTagUrisByPhenomenonUuid (groupId, phenomenonUuid, property = 'fp:docs/props/has') {\n  const tags = await httpRequest(GET, `fp:docs/phenomenon/${phenomenonUuid}?group=${groupId}`) || []\n  return tags.filter(({ property: tagProperty }) => tagProperty === property).map(({ tag }) => tag)\n\n}\n\n/**\n * Returns an object with phenomenon uuids as keys and tag uri string arrays as values\n *\n * @param groupId\n * @param {String[]} phenomenonUuids\n * @param property\n * @return {Promise<{[String]: String[] }>}\n */\nexport async function getTagUrisByPhenomenonUuids (groupId, phenomenonUuids, property = 'fp:docs/props/has') {\n  let tagsByUris = await httpRequest(POST, `tags?group=${groupId}`, { content: phenomenonUuids.map(uuid => `fp:docs/phenomenon/${uuid}`) })\n\n  // If returned object is empty, Service returns falsily empty array instead of an object\n  if (Array.isArray(tagsByUris) && tagsByUris.length === 0) {\n    return {}\n  }\n  const result = {}\n  for (let [ docUri, tags ] of Object.entries(tagsByUris)) {\n    const docUuid = docUri.replace('fp:docs/phenomenon/', '')\n    result[docUuid] = tags.filter(({ property: tagProperty }) => tagProperty === property).map(({ tag }) => tag)\n  }\n  return result\n\n}\n\nexport async function getTagByUri (uri) {\n  const prefixes = [\n    {\n      re: /^fp:tags\\/group\\/(\\d+)\\/(.*)$/,\n      resolver: ([, group, namePart]) => groupTags[Number(group)].find(({ name }) => name === namePart)\n    },\n    {\n      re: /^fp:tags\\/theme\\/(.*)$/,\n      resolver: ([, namePart]) => fpTags.find(({ name }) => name === namePart)\n    }\n  ]\n  for (const { re, resolver } of prefixes) {\n    const matches = uri.match(re)\n    if (matches !== null) {\n      return resolver(matches)\n    }\n  }\n}\n\nexport async function getLocalizedTagByUri (uri, lang) {\n  const { ...tag } = getTagByUri(uri)\n  if (tag) {\n    if (typeof tag.label === 'string') {\n      return tag\n    } else {\n      return { ...tag, label: tag.label[lang] }\n    }\n  }\n}\n\nfunction addTagUris (prefix, tags) {\n  return tags.map(({ name, ...tag }) => ({ uri: `${prefix}${name}`, ...tag }))\n}\n\nexport async function getGroupTags (groupId) {\n  // server returns 500 error for public group, which has groupId of 0, workaround\n  if (groupId) {\n    return addTagUris(`fp:tags/group/${groupId}/`, get(await getGroupSettings(Number(groupId)), ['data', 'settings', 'tags'], []))\n  }\n\n  return []\n}\n\nexport async function getFpTags () {\n  const { results = [] } = await getHubspotAlertsTaxonomy()\n  return addTagUris('fp:tags/theme/', results.map(({ name, translation, url_alias = '' }) => ({ label: {'fi': translation, 'en': name}, name: url_alias.replace('/hubspot-alerts/', '')})))\n}\n\nexport async function getLocalizedFpTags (lang) {\n  return getFpTags().map(({ label, ...tag }) => ({ ...tag, label: label[lang] }))\n}\n","import axios from 'axios'\nimport { getSessionToken } from '../session'\n\nconst PHENOMENA_STATISTICS_API_URL = process.env.REACT_APP_PHENOMENA_STATISTICS_API_URL\n\nconst GET = 'GET'\nconst POST = 'POST'\nconst DELETE = 'DELETE'\nconst PATCH = 'PATCH'\n\nasync function httpRequest(method, path, payload = null) {\n    return axios({\n        method,\n        url: `${PHENOMENA_STATISTICS_API_URL}/${path}`,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${getSessionToken()}`\n        },\n        withCredentials: true,\n        data: payload || null\n    })\n}\n\nconst phenomenaStatisticsApi = {\n  getPhenomenaStatistics: async (uuids) => {\n    return httpRequest(GET, `?uuid=${uuids}`)\n  }\n}\n\nexport default phenomenaStatisticsApi","import * as d3 from 'd3'\nimport {\n    PUBLIC_URL\n} from './env'\nimport _ from 'lodash'\nimport { getUserRoles } from '@sangre-fp/connectors/session'\n\nexport const getCoordsFromAngleAndRadius = (angle, radius) => d3.radialLine()([[angle, radius]])\n    .match(/^M(.+),(.+)Z$/)\n    .slice(1)\n    .map(Number)\n\nexport const detectLeftButton = evt => {\n    const event = evt || window.event\n    if ('buttons' in evt) {\n        return event.buttons === 1\n    }\n    const button = event.which || event.button\n    return button === 1\n}\n\nexport const getPhenomenonUrl = (radarId = false, phenomenon, hideEdit = false) => {\n    const { group, id } = phenomenon\n    const hasGroup = phenomenon.hasOwnProperty('group')\n    const groupUrl = hasGroup ? `group=${group}` : ''\n\n    if (!radarId) {\n        return `${PUBLIC_URL}/fp-phenomena/${id}${groupUrl.length ? `/?${groupUrl}` : ''}`\n    }\n\n    const urlParams = new URLSearchParams(window.location.search)\n    const vsid = urlParams.get('vsid')\n\n    // eslint-disable-next-line\n    return `${PUBLIC_URL}/node/${radarId}?issue=${id}&map_id=${radarId}&source_position=right&source_page=radar-view${groupUrl.length ? `&${groupUrl}` : ''}${hideEdit ? '&hideEdit=true' : ''}${vsid ? `&vsid=${vsid}` : ''}`\n}\n\nexport const editorRole = role =>  role === 'manager' || role === 'owner' || role === 'editor'\n\nexport const publicEditorRole = permissions => !!_.find(permissions, permission => permission === 'fp editor')\n\nexport const makeGroup = group => {\n    const {\n        id,\n        label,\n        radarsUsed,\n        radarsAllowed: radarsAllowedString,\n        accountDrupalRoles,\n        accountPermissions,\n        availableResources\n    } = group\n\n    // backend is returning this as a string for whatever reason\n    const radarsAllowed = Number(radarsAllowedString)\n\n    // not sure why this info is in the group\n    const canEditPublic = accountDrupalRoles && publicEditorRole(accountDrupalRoles[0])\n    const canEdit = accountPermissions && editorRole(accountPermissions.role)\n\n    return {\n        ...group,\n        id,\n        value: id,\n        label,\n        radarsAllowed,\n        radarsUsed,\n        hasAvailableRadars: radarsUsed < radarsAllowed,\n        availableResources,\n        canEditPublic,\n        canEdit\n    }\n}\n\nexport const isFpEditor = publicEditorRole(getUserRoles())\n\nexport const arrayMoveMutate = (array, from, to) => {\n    array.splice(to < 0 ? array.length + to : to, 0, array.splice(from, 1)[0])\n}\n\nexport const arrayMove = (array, from, to) => {\n    const arr = array.slice()\n    arrayMoveMutate(arr, from, to)\n    return arr\n}\n","import _ from 'lodash'\nimport { makeGroup, isFpEditor } from '../helpers'\nimport { getCurrentLanguage, setLanguage } from '@sangre-fp/i18n'\nimport {\n    HANDLE_ADD_FORM_VISIBILITY,\n    CHANGE_ADD_FORM_PAGE,\n    CHANGE_RADAR_NAME,\n    CHANGE_MAP_INTRO,\n    CHANGE_RADAR_LANGUAGE,\n    CHANGE_PHENOMENA_SET,\n    CHANGE_HIDE_USERS_FROM_TRIAL,\n    CHANGE_RADAR_IMAGE,\n    CHANGE_RADAR_TITLE_IMAGE,\n    CHANGE_VOTING_ON,\n    CHANGE_RATINGS_ON,\n    CHANGE_RATINGS_SETTINGS,\n    CHANGE_DISCUSSION_ON,\n    CHANGE_COMMENTS_ON,\n    CHANGE_LIKING_ON,\n    CHANGE_VOTING_UP,\n    CHANGE_EXISTING_RADAR_PAGE,\n    HANDLE_EDIT_SECTOR_PAGE_VISIBILITY,\n    HANDLE_EDIT_TIMERANGES_PAGE_VISIBILITY,\n    HANDLE_ADD_PHENOMENA_VISIBILITY,\n    GET_GROUPS_SUCCESS,\n    CHANGE_RADAR_GROUP,\n    HANDLE_EDIT_PHENOMENA_VISIBILITY,\n    CHANGE_DISPLAY_HALO_WHEN_RATING,\n    CHANGE_RADAR_SHARING,\n    CHANGE_RADAR_SHARING_EXPIRY,\n    CREATE_RADAR_SUCCESS,\n    FETCH_RADAR_SUCCESS,\n    UPDATE_RADAR_SUCCESS,\n    UPDATE_RADAR_VERSION,\n    TOGGLE_EDIT_MENU_VISIBILITY,\n    TOGGLE_LABEL_MODE,\n    SET_DRAGGED_PHENOMENON\n} from '@sangre-fp/reducers/actionTypes'\n\n// polyfill fix for edge\nconst paramsString = document.location.search\nconst searchParams = new URLSearchParams(paramsString)\nconst id = Number(searchParams.get('node'))\n\nconst initialState = {\n    id: id || false,\n    existingRadarPage: !!id,\n    addRadarFormOpen: !id,\n    addRadarFormPage: 1,\n    groups: [],\n    group: false,\n    radarName: '',\n    mapIntro: null,\n    radarLanguage: getCurrentLanguage(),\n    phenomenaSet: false,\n    hideUsersFromTrial: false,\n    radarImage: false,\n    votingOn: false,\n    ratingsOn: false,\n    discussionOn: false,\n    commentsOn: false,\n    likingOn: false,\n    votingUp: true,\n    editMenuOpen: false,\n    editSectorsPageOpen: false,\n    editTimeRangesPageOpen: false,\n    addPhenomenaVisible: false,\n    editPhenomenaVisible: null,\n    account: false,\n    displayHaloWhenRating: null,\n    enableUrlLogin: false,\n    urlLoginExpire: null,\n    urlLoginLink: '',\n    isRadarTemplate: false,\n    radarTitleImage: false,\n    timelineLabelFormat: false,\n    draggedPhenomenonId: false\n}\n\nexport default (state = initialState, { type, payload }) => {\n    switch (type) {\n        case SET_DRAGGED_PHENOMENON:\n            return {\n                ...state,\n                draggedPhenomenonId: payload\n            }\n        case TOGGLE_LABEL_MODE:\n            return {\n                ...state,\n                timelineLabelFormat: !state.timelineLabelFormat\n            }\n        case TOGGLE_EDIT_MENU_VISIBILITY:\n            return {\n                ...state,\n                editMenuOpen: payload\n            }\n        case UPDATE_RADAR_SUCCESS:\n            return {\n                ...state,\n                ...payload\n            }\n        case CREATE_RADAR_SUCCESS:\n            const { origin, pathname } = window.location\n            window.location.href = origin + pathname + `?node=${payload.id}`\n\n            return {\n                ...state,\n                ...payload,\n                editSectorsPageOpen: !payload.time_ranges.length\n            }\n        case HANDLE_ADD_FORM_VISIBILITY:\n            return {\n                ...state,\n                addRadarFormOpen: !state.addRadarFormOpen,\n                addRadarFormPage: payload || 1\n            }\n        case FETCH_RADAR_SUCCESS:\n            setLanguage(payload.radarLanguage)\n            const account = payload.account\n            const role = account ? account.role : false\n            const canDeleteRadar = role === 'owner' || role === 'manager' || String(account.userId) === String(payload.ownerId)\n            const canEditRadar = role === 'owner' || role === 'editor' || role === 'manager' || isFpEditor\n            const isVisitor = role === 'visitor'\n            const canShareRadar = role === 'owner' || role === 'manager'\n\n            return {\n                ...state,\n                ...payload,\n                canDeleteRadar,\n                canEditRadar,\n                isVisitor,\n                canShareRadar\n            }\n        case CHANGE_RADAR_SHARING:\n            return {\n                ...state,\n                enableUrlLogin: payload\n            }\n        case CHANGE_RADAR_SHARING_EXPIRY:\n            return {\n                ...state,\n                urlLoginExpire: payload\n            }\n        case CHANGE_EXISTING_RADAR_PAGE:\n            return {\n                ...state,\n                existingRadarPage: payload\n            }\n        case HANDLE_EDIT_SECTOR_PAGE_VISIBILITY:\n            return {\n                ...state,\n                editSectorsPageOpen: !state.editSectorsPageOpen\n            }\n        case HANDLE_EDIT_TIMERANGES_PAGE_VISIBILITY:\n            return {\n                ...state,\n                editTimeRangesPageOpen: !state.editTimeRangesPageOpen\n            }\n        case CHANGE_RADAR_NAME:\n            return {\n                ...state,\n                radarName: payload\n            }\n        case CHANGE_MAP_INTRO:\n            return {\n                ...state,\n                mapIntro: payload\n            }\n        case CHANGE_RADAR_LANGUAGE:\n            setLanguage(payload)\n\n            return {\n                ...state,\n                radarLanguage: payload\n            }\n        case CHANGE_ADD_FORM_PAGE:\n            return {\n                ...state,\n                addRadarFormPage: payload\n            }\n        case CHANGE_PHENOMENA_SET:\n            return {\n                ...state,\n                phenomenaSet: payload\n            }\n        case CHANGE_RADAR_GROUP:\n            return {\n                ...state,\n                group: payload\n            }\n        case CHANGE_HIDE_USERS_FROM_TRIAL:\n            return {\n                ...state,\n                hideUsersFromTrial: payload\n            }\n        case CHANGE_RADAR_IMAGE:\n            return {\n                ...state,\n                radarImage: payload\n            }\n        case CHANGE_RADAR_TITLE_IMAGE:\n            return {\n                ...state,\n                radarTitleImage: payload\n            }\n        case CHANGE_VOTING_ON:\n            return {\n                ...state,\n                votingOn: payload\n            }\n        case CHANGE_DISPLAY_HALO_WHEN_RATING:\n            return {\n                ...state,\n                displayHaloWhenRating: payload\n            }\n        case CHANGE_RATINGS_ON:\n            return {\n                ...state,\n                ratingsOn: payload\n            }\n        case CHANGE_RATINGS_SETTINGS:\n            return {\n                ...state,\n                ...payload\n            }\n        case CHANGE_DISCUSSION_ON:\n            return {\n                ...state,\n                discussionOn: payload\n            }\n        case CHANGE_COMMENTS_ON:\n            return {\n                ...state,\n                commentsOn: payload\n            }\n        case CHANGE_LIKING_ON:\n            return {\n                ...state,\n                likingOn: payload\n            }\n        case CHANGE_VOTING_UP:\n            return {\n                ...state,\n                votingUp: payload\n            }\n        case GET_GROUPS_SUCCESS:\n            // filter out groups without ids\n            const groups = _.filter(\n                _.map(payload, makeGroup),\n                group => group.id\n            )\n\n            return {\n                ...state,\n                groups\n            }\n        case HANDLE_ADD_PHENOMENA_VISIBILITY:\n            return {\n                ...state,\n                addPhenomenaVisible: !state.addPhenomenaVisible\n            }\n        case HANDLE_EDIT_PHENOMENA_VISIBILITY:\n            return {\n                ...state,\n                editPhenomenaVisible: payload\n            }\n        case UPDATE_RADAR_VERSION:\n            return {\n                ...state,\n                radar_version: payload\n            }\n        default:\n            return state\n    }\n}\n","import {\n    FETCH_RADAR_SUCCESS,\n    UPDATE_PHENOMENON,\n    CREATE_PHENOMENA_SUCCESS,\n    DELETE_PHENOMENA_SUCCESS,\n    CREATE_PHENOMENA_POSITION_SUCCESS,\n    UPDATE_PHENOMENON_INGESTION_SUCCESS,\n    UPDATE_PHENOMENON_VERSION,\n    REFETCH_DATA_SUCCESS\n} from '@sangre-fp/reducers/actionTypes'\n\nconst initialState = []\n\nexport default (state = initialState, { type, payload }) => {\n    switch (type) {\n        case REFETCH_DATA_SUCCESS:\n            return payload.phenomena\n\n        case FETCH_RADAR_SUCCESS:\n            return payload.phenomena\n\n        case UPDATE_PHENOMENON:\n            return state.map(phenomenon => {\n                if (phenomenon.id === payload.id) {\n                    return {\n                        ...phenomenon,\n                        ...payload\n                    }\n                }\n\n                return phenomenon\n            })\n\n        case UPDATE_PHENOMENON_VERSION: {\n            return state.map(phenomenon => {\n                if (phenomenon.id === payload.id) {\n                    return {\n                        ...phenomenon,\n                        version: payload.version\n                    }\n                }\n\n                return phenomenon\n            })\n        }\n\n        case CREATE_PHENOMENA_SUCCESS:\n            return state.concat(payload)\n\n        case DELETE_PHENOMENA_SUCCESS:\n            return state.filter(item => item.id !== payload.id)\n\n        case CREATE_PHENOMENA_POSITION_SUCCESS:\n            return state.map(phenomenon => {\n                if (phenomenon.id === payload.id) {\n                    return {\n                        ...phenomenon,\n                        ...payload\n                    }\n                }\n\n                return phenomenon\n            })\n\n        case UPDATE_PHENOMENON_INGESTION_SUCCESS:\n            return state.map(phenomenon => {\n                if (phenomenon.id === payload.id) {\n                    return {\n                        ...phenomenon,\n                        ...payload\n                    }\n                }\n\n                return phenomenon\n            })\n\n        default:\n            return state\n    }\n}\n","import _ from 'lodash'\nimport {\n    TOGGLE_FILTERS,\n    SET_ACTIVE_FILTER,\n    RESET_FILTERS,\n    SET_ACTIVE_TAG_FILTER\n} from '@sangre-fp/reducers/actionTypes'\n\nconst initialState = {\n    filtersVisible: false,\n    activeFilter: [],\n    activeTagFilter: []\n}\n\nexport default (state = initialState, { type, payload }) => {\n    switch (type) {\n        case TOGGLE_FILTERS:\n            return {\n                ...state,\n                filtersVisible: !state.filtersVisible\n            }\n        case SET_ACTIVE_FILTER:\n            return {\n                ...state,\n                activeFilter: _.find(state.activeFilter, payload) ? state.activeFilter.filter(filter => filter !== payload) : [...state.activeFilter, payload]\n            }\n        case SET_ACTIVE_TAG_FILTER:\n            return {\n                ...state,\n                activeTagFilter: _.includes(state.activeTagFilter, payload) ? state.activeTagFilter.filter(filter => filter !== payload) : [...state.activeTagFilter, payload]\n            }\n        case RESET_FILTERS:\n            return {\n                ...state,\n                activeFilter: [],\n                activeTagFilter: []\n            }\n        default:\n            return state\n    }\n}\n","import {\n    HANDLE_SIGNAL_LIST_VISIBILITY,\n    FETCH_SIGNALS_SUCCESS,\n    HANDLE_SIGNAL_CREATE_VISIBILITY,\n    CREATE_SIGNAL_SUCCESS,\n    FETCH_MORE_SIGNALS_SUCCESS\n} from '@sangre-fp/reducers/actionTypes'\n\nconst initialState = {\n    signalListVisible: false,\n    signalCreateVisibility: false,\n    signals: [],\n    totalRadarSignals: false\n}\n\nexport default (state = initialState, { type, payload }) => {\n    switch (type) {\n        case HANDLE_SIGNAL_LIST_VISIBILITY:\n            return {\n                ...state,\n                signalListVisible: !state.signalListVisible\n            }\n        case HANDLE_SIGNAL_CREATE_VISIBILITY:\n            return {\n                ...state,\n                signalCreateVisibility: !state.signalCreateVisibility\n            }\n        case FETCH_SIGNALS_SUCCESS:\n            return {\n                ...state,\n                signals: payload.result,\n                totalRadarSignals: payload.total\n            }\n        case FETCH_MORE_SIGNALS_SUCCESS:\n            return {\n                ...state,\n                signals: [...state.signals, ...payload.result],\n                totalRadarSignals: payload.total\n            }\n        case CREATE_SIGNAL_SUCCESS:\n            return {\n                ...state,\n                signals: [{ ...payload }, ...state.signals],\n                totalRadarSignals: state.totalRadarSignals + 1\n            }\n        default:\n            return state\n    }\n}\n","import { combineReducers } from 'redux'\nimport radarSettings from './radarSettings'\nimport phenomena from './phenomena'\nimport timelines from '@sangre-fp/reducers/timelines'\nimport filters from './filters'\nimport signals from './signals'\n\nimport {\n    loading,\n    errors,\n    radarSets,\n    phenomenaTypes,\n    phenomenaTypesById,\n    confirmDialog,\n    sectors\n} from '@sangre-fp/reducers'\n\nexport default combineReducers({\n    sectors,\n    filters,\n    phenomena,\n    timelines,\n    radarSettings,\n    radarSets,\n    loading,\n    errors,\n    phenomenaTypes,\n    phenomenaTypesById,\n    signals,\n    confirmDialog\n})\n","import * as actionTypes from '@sangre-fp/reducers/actionTypes'\n\nexport const loadingStart = component => ({\n    type: `${actionTypes.LOADING}/${component}`,\n    payload: { component }\n})\n\nexport const loadingSuccess = component => ({\n    type: `${actionTypes.LOADING_SUCCESS}/${component}`,\n    payload: { component }\n})\n\nexport const loadingError = (component, error, defaultMessage, message) => ({\n    type: `${actionTypes.LOADING_ERROR}/${component}`,\n    payload: { component, error, defaultMessage, message }\n})\n\nexport const getNetworkMethods = (type, successType, defaultMessage) => {\n    const loading = () => loadingStart(type)\n    const success = payload => dispatch => {\n        dispatch(loadingSuccess(type))\n        return dispatch({\n            type: successType,\n            payload\n        })\n    }\n    const error = (err, message) => dispatch =>\n        dispatch(loadingError(type, err, defaultMessage, message))\n    return {\n        loading,\n        success,\n        error\n    }\n}\n\n","import axios from 'axios'\n// import { MEDIA_API_URL } from '../../env'\nimport { getSessionToken } from '../session'\n\nconst MEDIA_API_URL = process.env.REACT_APP_MEDIA_API_URL\n\nasync function uploadFileRequest(filePath, file) {\n    const fileHeaders = {\n        'Content-Type': file.type || 'application/octet-stream',\n        'Authorization': `Bearer ${getSessionToken()}`\n    }\n    const uploadUrl = `${MEDIA_API_URL}/${filePath}`\n    return axios\n        .put(uploadUrl, file, { headers: fileHeaders })\n            .then(res => res.data.name || res.data)\n}\n\nexport async function uploadFile(file, groupId = 0) {\n    return uploadFileRequest(groupId ? `${groupId}/${file.name}` : `${file.name}`, file)\n}\n\nexport const getImageUrl = path => {\n    if (path && !path.match(/^https?:\\/\\//)) {\n        return MEDIA_API_URL + '/' + path\n    }\n\n    return path\n}\n\nexport const handleImageUploadIfNeeded = async (imageFile, groupId) => {\n    if (imageFile && typeof imageFile !== 'string') {\n        const image = await uploadFile(imageFile, groupId)\n        return getImageUrl(image)\n    }\n\n    return imageFile\n}\n","import _ from 'lodash'\nimport * as actionTypes from '@sangre-fp/reducers/actionTypes'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { getNetworkMethods } from './network'\nimport drupalApi from '@sangre-fp/connectors/drupal-api'\nimport { handleImageUploadIfNeeded } from '@sangre-fp/connectors/media-api'\n\nexport const toggleEditMenuVisiblity = (visibilityState = false) => dispatch => (\n    dispatch({ type: actionTypes.TOGGLE_EDIT_MENU_VISIBILITY , payload: visibilityState })\n)\n\nexport const getUserGroups = () => dispatch => {\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.GET_GROUPS,\n        actionTypes.GET_GROUPS_SUCCESS,\n        requestTranslation('fetchingGroupsError')\n    )\n\n    dispatch(loading())\n\n    const groupRequest = drupalApi.getGroups()\n    const membershipRequest = drupalApi.getMemberships()\n\n    return Promise.all([groupRequest, membershipRequest]).then(([groups, memberships]) => {\n        const membershipGroupIds = memberships ? Object.values(memberships).map(membership => parseInt(membership.gid, 10)) : []\n        dispatch(success(groups ? Object.values(groups).filter(group => membershipGroupIds.indexOf(group.id) !== -1) : []))\n    })\n    .catch(err => {\n        dispatch(error(err))\n    })\n}\n\nexport const changeAddRadarFormVisibility = (page = false) => dispatch => {\n    if (page) {\n        dispatch({ type: actionTypes.HANDLE_ADD_FORM_VISIBILITY, payload: page })\n    } else {\n        dispatch({ type: actionTypes.HANDLE_ADD_FORM_VISIBILITY })\n    }\n}\n\nexport const changeDisplayHaloWhenRating = rating => dispatch => dispatch({ type: actionTypes.CHANGE_DISPLAY_HALO_WHEN_RATING, payload: rating })\nexport const changeRadarName = name => dispatch => dispatch({ type: actionTypes.CHANGE_RADAR_NAME, payload: name })\nexport const changeMapIntro = mapIntro => dispatch => dispatch({ type: actionTypes.CHANGE_MAP_INTRO, payload: mapIntro })\nexport const changeRadarLanguage = language => dispatch => dispatch({ type: actionTypes.CHANGE_RADAR_LANGUAGE, payload: language })\nexport const changeRadarGroup = group => dispatch => dispatch({ type: actionTypes.CHANGE_RADAR_GROUP, payload: group })\nexport const changeAddRadarFormPage = page => dispatch => dispatch({ type: actionTypes.CHANGE_ADD_FORM_PAGE, payload: page })\nexport const changePhenomenaSet = set => dispatch => dispatch({ type: actionTypes.CHANGE_PHENOMENA_SET, payload: set })\nexport const changeHideUsersFromTrial = bool => dispatch => dispatch({ type: actionTypes.CHANGE_HIDE_USERS_FROM_TRIAL, payload: bool })\nexport const changeRadarImage = image => dispatch => dispatch({ type: actionTypes.CHANGE_RADAR_IMAGE, payload: image })\nexport const changeRadarTitleImage = image => dispatch => dispatch({ type: actionTypes.CHANGE_RADAR_TITLE_IMAGE, payload: image })\nexport const changeVotingOn = bool => dispatch => dispatch({ type: actionTypes.CHANGE_VOTING_ON, payload: bool })\nexport const changeRatingsOn = bool => dispatch => dispatch({ type: actionTypes.CHANGE_RATINGS_ON, payload: bool })\nexport const changeRadarSharing = bool => dispatch => dispatch({ type: actionTypes.CHANGE_RADAR_SHARING, payload: bool })\n\nexport const changeRadarSharingExpiry = date => dispatch => dispatch({ type: actionTypes.CHANGE_RADAR_SHARING_EXPIRY, payload: date })\n\nexport const changeRatingsSettings = ({\n    axisXTitle,\n    axisXMax,\n    axisXMin,\n    axisYTitle,\n    axisYMax,\n    axisYMin,\n    fourFieldsTopLeft,\n    fourFieldsTopRight,\n    fourFieldsBottomLeft,\n    fourFieldsBottomRight\n}) => dispatch => dispatch({\n    type: actionTypes.CHANGE_RATINGS_SETTINGS,\n    payload: {\n        axisXTitle,\n        axisXMax,\n        axisXMin,\n        axisYTitle,\n        axisYMax,\n        axisYMin,\n        fourFieldsTopLeft,\n        fourFieldsTopRight,\n        fourFieldsBottomLeft,\n        fourFieldsBottomRight\n    }\n})\n\nexport const changeDiscussionOn = bool => dispatch =>\n    dispatch({ type: actionTypes.CHANGE_DISCUSSION_ON, payload: bool })\n\nexport const changeCommentsOn = bool => dispatch =>\n    dispatch({ type: actionTypes.CHANGE_COMMENTS_ON, payload: bool })\n\nexport const changeLikingOn = bool => dispatch =>\n    dispatch({ type: actionTypes.CHANGE_LIKING_ON, payload: bool })\n\nexport const changeVotingUp = bool => dispatch =>\n    dispatch({ type: actionTypes.CHANGE_VOTING_UP, payload: bool })\n\nexport const toggleFilter = () => dispatch => dispatch({ type: actionTypes.TOGGLE_FILTERS })\n\nexport const setActiveFilter = filter => dispatch => dispatch({ type: actionTypes.SET_ACTIVE_FILTER, payload: filter })\n\nexport const setActiveTagFilter = filter => dispatch => dispatch({ type: actionTypes.SET_ACTIVE_TAG_FILTER, payload: filter })\n\nexport const resetFilters = () => dispatch => dispatch({ type: actionTypes.RESET_FILTERS })\n\nexport const createRadar = () => async (dispatch, getState) => {\n    const radarSettings = getState().radarSettings\n    const {\n        group,\n        radarImage,\n        radarTitleImage\n    } = radarSettings\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.CREATE_RADAR,\n        actionTypes.CREATE_RADAR_SUCCESS,\n        requestTranslation('creatingRadarError')\n    )\n\n    dispatch(loading())\n\n    try {\n        const groupId = _.isObject(group) ? _.get(group, 'id', 0) : group\n\n        const radarInput = {\n            ...radarSettings,\n            radarImage: await handleImageUploadIfNeeded(radarImage, groupId),\n            radarTitleImage: await handleImageUploadIfNeeded(radarTitleImage, groupId)\n        }\n\n        const data = await drupalApi.createRadar(radarInput)\n\n        dispatch(success(data))\n    } catch (err) {\n        dispatch(error(err))\n    }\n}\n\nexport const updateRadar = (hideForm = true) => async (dispatch, getState) => {\n    const radarSettings = getState().radarSettings\n\n    const {\n        group,\n        radarImage,\n        radarTitleImage,\n        id\n    } = radarSettings\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.UPDATE_RADAR,\n        actionTypes.UPDATE_RADAR_SUCCESS,\n        requestTranslation('updatingRadarError')\n    )\n\n    dispatch(loading())\n\n    try {\n        const groupId = _.isObject(group) ? _.get(group, 'id', 0) : group\n\n        const radarInput = {\n            ...radarSettings,\n            radarImage: await handleImageUploadIfNeeded(radarImage, groupId),\n            radarTitleImage: await handleImageUploadIfNeeded(radarTitleImage, groupId)\n        }\n\n        const data = await drupalApi.updateRadar(id, radarInput)\n\n        if (hideForm) {\n            dispatch({ type: actionTypes.HANDLE_ADD_FORM_VISIBILITY })\n        }\n\n        dispatch(success(data))\n    } catch (e) {\n        dispatch(error(e))\n    }\n}\n\nexport const getRadarSets = () => (dispatch) => {\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.GET_RADAR_SETS,\n        actionTypes.GET_RADAR_SETS_SUCCESS,\n        requestTranslation('fetchingSetsError')\n    )\n\n    dispatch(loading())\n\n    return drupalApi.getRadarTemplates()\n        .then(data => dispatch(success(data)))\n        .catch(err => dispatch(error(err)))\n}\n\nexport const sectorPageHandler = () => dispatch =>\n    dispatch({ type: actionTypes.HANDLE_EDIT_SECTOR_PAGE_VISIBILITY })\n\nexport const timerangePageHandler = () => dispatch =>\n    dispatch({ type: actionTypes.HANDLE_EDIT_TIMERANGES_PAGE_VISIBILITY })\n\nexport const clearAllErrors = () => dispatch =>\n    dispatch({ type: actionTypes.CLEAR_ALL_ERRORS })\n\nexport const changeAddPhenomenaVisibility = () => ({ type: actionTypes.HANDLE_ADD_PHENOMENA_VISIBILITY })\n\nexport const changeEditPhenomenaVisibility = phenomenonUuid => (dispatch, getState) => {\n    const { phenomena } = getState()\n\n    const phenomenon = phenomenonUuid\n        ? _.find(phenomena, { id: phenomenonUuid })\n        : null\n\n    if (phenomenonUuid && !phenomenon) {\n        console.error('Invalid phenomenonUuid', phenomenonUuid)\n    }\n\n    return dispatch({\n        type: actionTypes.HANDLE_EDIT_PHENOMENA_VISIBILITY,\n        payload: phenomenon\n    })\n}\n","import { createStore, applyMiddleware, compose } from 'redux'\nimport thunk from 'redux-thunk'\nimport rootReducer from './reducers'\nimport {changeEditPhenomenaVisibility} from \"./actions/radarSettings\";\n\nconst composeEnhancers = process.env.NODE_ENV !== 'production' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : compose\n\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\n\n\nwindow.radarCallbacks = {\n    ...(window.radarCallbacks || {}),\n    openPhenomenonEditor: uuid => store.dispatch(changeEditPhenomenaVisibility(uuid))\n}\n\nexport default store\n","import _ from 'lodash'\nimport React, { PureComponent } from 'react'\nimport Text from 'react-svg-text'\nimport { getPhenomenonUrl } from '../helpers'\nimport classNames from 'classnames'\nimport { PhenomenonType } from '@sangre-fp/ui'\n\n\nexport default class Phenomenon extends PureComponent {\n    handleDrag = e => {\n        // turning off prevent default because it didn't allow phenomena to open on ipad\n        // e.preventDefault()\n        e.stopPropagation()\n        const { onPhenomenaDrag, phenomenon } = this.props\n        onPhenomenaDrag(e, phenomenon)\n    }\n\n    componentDidMount() {\n        const { onPhenomenaDrag } = this.props\n\n        if (onPhenomenaDrag) {\n            this.phenomena.addEventListener('mousedown', this.handleDrag)\n            this.phenomena.addEventListener('touchstart', this.handleDrag)\n            this.phenomena.addEventListener('ontouchstart', this.handleDrag)\n        }\n    }\n\n    componentWillUnmount() {\n        const onPhenomenaDrag = this.props\n\n        if (onPhenomenaDrag) {\n            this.phenomena.removeEventListener('mousedown', this.handleDrag)\n            this.phenomena.addEventListener('touchstart', this.handleDrag)\n            this.phenomena.addEventListener('ontouchstart', this.handleDrag)\n        }\n    }\n\n    phenomenonRef = ref => {\n        this.phenomena = ref\n    }\n\n    getPhenomenonType = () => {\n        const { phenomenaTypesById, phenomenon: { content: { type: id } } } = this.props\n\n        const defaultValue =  _.find(phenomenaTypesById, type => type.alias === 'undefined')\n\n        return phenomenaTypesById[id] || defaultValue\n    }\n\n    getClassNameState = () => {\n        const { alias } = this.getPhenomenonType()\n\n        return alias\n    }\n\n    includesTag = (tags, filter) => {\n        let includes = false\n\n        _.map(tags, tag => {\n            if (_.includes(filter, tag)) {\n                includes = true\n            }\n        })\n\n        return includes\n    }\n\n    getFilterClassName = () => {\n        const { id } = this.getPhenomenonType()\n        const { filter, tagFilter, phenomenon: { tags } } = this.props\n\n        if (\n            filter\n            && filter.length\n            && !(_.find(filter, setFilter => setFilter.id === id))\n        ) {\n            return 'phenomenon-disabled'\n        }\n\n        if (\n            tagFilter\n            && tagFilter.length\n            && !this.includesTag(tags, tagFilter)\n        ) {\n            return 'phenomenon-disabled'\n        }\n\n        return null\n    }\n\n    getClassNameDrag = (dragged, deleting) => {\n        if (dragged && deleting) {\n            return 'deleting'\n        }\n\n        if (dragged) {\n            return 'dragged'\n        }\n\n        return ''\n    }\n\n    render() {\n        const {\n            deleting,\n            labelWidth,\n            phenomenaSize,\n            cx,\n            cy,\n            fontSize,\n            dragged,\n            hidden,\n            radarId,\n            phenomenon,\n            votingOn\n        } = this.props\n\n        const { content: { title, short_title }, group, halo } = phenomenon\n\n        // todo change to use project URL\n        // eslint-disable-next-line\n        const watermarkLink = 'https://go.futuresplatform.com/sites/all/themes/AltFutures_theme/images/watermark-fp.png?v=2'\n\n        let fill\n        if (dragged) {\n            if (deleting) {\n                fill = 'rgba(229, 104, 105, 1)'\n            } else {\n               fill = 'rgba(43, 201, 143, 0.3)'\n            }\n        } else if (this.getPhenomenonType().style) {\n            fill = this.getPhenomenonType().style.color\n        } else {\n            fill = 'rgba(43, 201, 143, 1)'\n        }\n\n        const radius = phenomenaSize / 2\n        const style = {\n            fontSize: `${fontSize}px`\n        }\n        const href = getPhenomenonUrl(radarId, phenomenon)\n\n        const classes = classNames(\n            'phenomenon',\n            this.getClassNameState(),\n            this.getClassNameDrag(dragged, deleting),\n            this.getFilterClassName(),\n            {\n                left: typeof radarId !== 'undefined',\n                hidden\n            }\n        )\n\n        return (\n            <g data-href={href}\n               ref={this.phenomenonRef}\n               className={classes}\n            >\n                <PhenomenonType phenomenon={phenomenon}\n                                type={this.getPhenomenonType().alias}\n                                size={phenomenaSize}\n                                x={cx}\n                                halo={votingOn && halo}\n                                y={cy}\n                                fill={fill} />\n                { group === 0 && !deleting &&\n                    <image\n                        x={cx - radius}\n                        y={cy - radius}\n                        width={radius * 2}\n                        height={radius * 2}\n                        xlinkHref={watermarkLink}\n                    />\n                }\n                { deleting &&\n                    <foreignObject\n                        x={cx - radius}\n                        y={cy - radius}\n                        width={phenomenaSize}\n                        height={phenomenaSize}\n                        style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center'\n                        }}\n                    >\n                        <div\n                            className={'material-icons'}\n                            style={{\n                                color: 'rgba(255, 255, 255, 0.4)',\n                                fontSize: '35px',\n                                width: '100%',\n                                height: '100%',\n                                display: 'flex',\n                                justifyContent: 'center',\n                                alignItems: 'center'\n                            }}\n                            textAnchor={'middle'}\n                        >\n                            delete\n                        </div>\n                    </foreignObject>\n                }\n                <Text textAnchor={'middle'}\n                      verticalAnchor={'start'}\n                      x={cx}\n                      y={cy + (radius * 1.4)}\n                      width={labelWidth}\n                      className={'phenomena-label noselect'}\n                      style={style}>\n                    {short_title || title}\n                </Text>\n            </g>\n        )\n    }\n}\n","export const PUBLIC_URL = process.env.REACT_APP_PUBLIC_URL\nexport const MEDIA_API_URL = process.env.REACT_APP_MEDIA_API_URL\nexport const DRUPAL_API_URL = process.env.REACT_APP_DRUPAL_API_URL\nexport const SEARCH_API_URL = process.env.REACT_APP_SEARCH_API_URL\nexport const RADAR_DATA_API_URL = process.env.REACT_APP_RADAR_DATA_API_URL\nexport const RADAR_DATA_WEBSOCKET_URL = process.env.REACT_APP_RADAR_DATA_WEBSOCKET_URL\nexport const NEWS_FEED_API_URL = process.env.REACT_APP_NEWS_FEED_API_URL\nexport const PHENOMENA_STATISTICS_API_URL = process.env.REACT_APP_PHENOMENA_STATISTICS_API_URL\nexport const TAG_SERVICE_API_URL = process.env.REACT_APP_TAG_SERVICE_API_URL\n","import React, { PureComponent } from 'react'\nimport * as d3 from 'd3'\nimport Phenomenon from './Phenomenon'\nimport { getCoordsFromAngleAndRadius } from '../helpers'\nimport isEqual from 'lodash/isEqual'\n\nconst getConstrainedValue = ([min, max], value) => {\n    if (value < min) {\n        return min\n    }\n    if (value > max) {\n        return max\n    }\n    return value\n}\n\nexport default class Phenomena extends PureComponent {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            nodes: this.copyPhenomena()\n        }\n    }\n\n    // TODO check if this should be variable based on the actual sector size\n    range = [0, 100]\n    copyPhenomena = (phenomena = this.props.phenomena) => {\n        const { sector: { constraints } } = this.props\n        this.xScale = d3.scaleLinear().domain(constraints.angle).range(this.range)\n        this.yScale = d3.scaleLinear().domain(constraints.radius).range(this.range)\n        return phenomena.map(({ angle, radius, size }, index) => ({\n            index,\n            x: this.xScale(angle),\n            y: this.yScale(radius),\n            fy: this.yScale(radius),\n            size\n        }))\n    }\n\n    startForce = () => {\n        // const {centroid} = this.props\n        // const [x, y] = centroid\n        const { nodes } = this.state\n\n        if (this.force) {\n            this.force.stop()\n        }\n\n        if (nodes.length > 1) {\n            this.force =\n                d3.forceSimulation(nodes)\n                // TODO check if forceCollide or distanceMin could be used to prevent overlays\n                    .force('charge', d3\n                            .forceManyBody()\n                            .strength(-5)\n                            // TODO check scaling distances based on the actual arc length\n                            .distanceMax(this.range[1] / nodes.length)\n                        // TODO check scaling distanceMin based on the actual arc length\n                        // .distanceMin(d => d.size)\n                    )\n                    // TODO check scaling radius based on the actual arc length\n                    // .force('collision', d3.forceCollide().radius(d => d.size))\n                    .on('tick', () => {\n                        // eslint-disable-next-line\n                        nodes.map(node => {\n                            node.x = getConstrainedValue(this.range, node.x)\n                            node.y = getConstrainedValue(this.range, node.y)\n                        })\n                        this.setState({ nodes: nodes.slice() })\n                    })\n        }\n    }\n\n    componentDidMount() {\n        this.startForce()\n    }\n\n    componentWillReceiveProps(nextProps) {\n        const { phenomena: nextPhenomena } = nextProps\n        const { phenomena } = this.props\n\n        if (!isEqual(nextPhenomena, phenomena)) {\n            this.setState({ nodes: this.copyPhenomena(nextPhenomena) }, this.startForce)\n        }\n    }\n\n    componentWillUnmount() {\n        if (this.force) {\n            this.force.stop()\n        }\n    }\n\n    getNodeCoordinates = (index) => {\n        const { nodes } = this.state\n\n        const node = nodes[index]\n\n        const angle = this.xScale.invert(node.x)\n        const radius = this.yScale.invert(node.y)\n\n        const [cx, cy] = getCoordsFromAngleAndRadius(angle, radius)\n\n        return { cx, cy }\n    }\n\n    render() {\n        const { phenomena, draggedPhenomenon, phenomenaDisplayProps } = this.props\n\n        return (\n            <g>\n                {phenomena.map((phenomenon, index) => {\n                    const { id } = phenomenon\n                    const dragged = draggedPhenomenon\n                        && draggedPhenomenon.id === id\n\n                    return (\n                        <Phenomenon\n                            {...this.props}\n                            {...this.getNodeCoordinates(index)}\n                            key={index}\n                            hidden={dragged}\n                            phenomenon={phenomenon}\n                            {...phenomenaDisplayProps}\n                        />\n                    )\n                })}\n            </g>\n        )\n    }\n}\n","import React, { PureComponent } from 'react'\nimport Phenomena from './Phenomena'\n\nexport default class AllPhenomena extends PureComponent {\n    render() {\n        const { timeRanges, getPhenomenaDisplayProps } = this.props\n        const phenomenaDisplayProps = getPhenomenaDisplayProps()\n\n        return (\n            <g className={'phenomena'}>\n                {timeRanges.map((({ value, sectors }) =>\n                    sectors.filter(({ phenomena }) => !!phenomena.length).map(sector => (\n                        <Phenomena\n                            {...this.props}\n                            key={`${sector.id}-${value}`}\n                            sector={sector}\n                            phenomena={sector.phenomena}\n                            phenomenaDisplayProps={phenomenaDisplayProps}\n                        />\n                    )))\n                )}\n            </g>\n        )\n    }\n}\n","import { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport AllPhenomena from '../components/AllPhenomena'\nimport { } from '../actions/radarSettings'\n\nexport default connect(\n    state => {\n        const {\n            radarSettings: {\n                id,\n                canEditRadar,\n                votingOn\n            },\n            filters: {\n                activeFilter,\n                activeTagFilter\n            }\n        } = state\n\n        return {\n            radarId: id,\n            canEdit: canEditRadar,\n            filter: activeFilter,\n            tagFilter: activeTagFilter,\n            votingOn\n        }\n    },\n    dispatch => bindActionCreators({\n    }, dispatch)\n)(AllPhenomena)\n","import { createSelector } from 'reselect'\nimport { find } from 'lodash'\n\nconst getRadarSettingsGroups = (state) => state.radarSettings && state.radarSettings.groups\n\nexport const isCollaborationToolsAllowed = createSelector([ getRadarSettingsGroups ], (groups) => {\n    return (groupId) => {\n        const group = find(groups, g => groupId === g.id)\n        if (group) {\n            if (group.availableResources.hasOwnProperty('collaboration_tools')) {\n                return !!group.availableResources.collaboration_tools\n            }\n            // Allowed for legacy accounts\n            return true\n        }\n        return false\n    }\n})\n","import * as d3 from 'd3'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { getSessionToken } from '@sangre-fp/connectors/session'\n\nexport const customQuillModules = {\n    toolbar: [\n        [{ header: ['1', '2', '3', '4', '5'] }, { font: [] }],\n        ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n        [{ list: 'ordered' }, { list: 'bullet' },\n            { indent: '-1' }, { indent: '+1' }],\n        ['link'],\n        ['clean']\n    ],\n    clipboard: {\n        // toggle to add extra line breaks when pasting HTML:\n        matchVisual: false\n    }\n}\n\nexport const centerRadiusPercentage = 0.15\nexport const radarBorderWidth = 80\n\nexport const ALL_GROUP_VALUE = -1\n\nexport const radarLanguages = () => [\n    { value: 'en', label: requestTranslation('english') },\n    { value: 'fi', label: requestTranslation('finnish') }\n]\n\nexport const radarLanguagesWithAll = () => [\n    { value: 'all', label: requestTranslation('all') },\n    ...radarLanguages()\n]\n\nexport const initialCommentTopics = [\n    { label: 'Opportunities', checked: false },\n    { label: 'Threats', checked: false },\n    { label: 'Actions', checked: false }\n]\n\nexport const getWebSocketHeaders = () => ({ Authorization: `Bearer ${getSessionToken()}` })\n\nexport const RANGE_MIN = 0\nexport const RANGE_MAX = 1\nexport const MAX_TIMELINES = 10\nexport const RANGE_BOUNDARY = RANGE_MAX / MAX_TIMELINES\nexport const TIMELINE_TEMPLATE = {\n    position: null,\n    year: '',\n    description: '',\n    label: ''\n}\n\nexport const timerangeColors = d3.scaleLinear()\n    .domain([30, 2, 1, 0])\n    .range(['#333334', '#E7E7E8', '#F3F3F4', '#FBFBFC'])\n    .interpolate(d3.interpolateRgb)\n","export const modules = {\n    toolbar: [\n        [{ header: ['1', '2', '3', '4', '5'] }, { font: [] }],\n        ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n        [{ list: 'ordered' }, { list: 'bullet' },\n            { indent: '-1' }, { indent: '+1' }],\n        ['link', 'video'],\n        ['clean']\n    ],\n    clipboard: {\n        // toggle to add extra line breaks when pasting HTML:\n        matchVisual: false\n    }\n}\n\nexport const formats = [\n    'header', 'font', 'size',\n    'bold', 'italic', 'underline', 'strike', 'blockquote',\n    'list', 'bullet', 'indent',\n    'link', 'video'\n]","import React, { PureComponent } from 'react'\nimport styled from 'styled-components'\nimport _ from 'lodash'\nimport Select from 'react-select'\nimport Toggle from 'react-toggle'\nimport {\n    Loading,\n    Radiobox,\n    Checkbox\n} from '@sangre-fp/ui'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { radarLanguages, initialCommentTopics, customQuillModules } from '../config'\nimport { PUBLIC_URL } from '../env'\nimport ReactQuill from 'react-quill'\n\nimport filter from 'lodash/filter'\nimport find from 'lodash/find'\nimport first from 'lodash/first'\nimport times from 'lodash/times'\n\nimport { formats } from '../quill'\nimport classNames from 'classnames'\n\nconst URL = window.URL || window.webkitURL\n\nexport const PAGE_HEADER_AND_LANGUAGE = 1\nexport const PAGE_BASIC_SETTINGS = 2\nexport const PAGE_USER_OPTIONS = 3\nexport const PAGE_CONCLUSIONS = 4\n\n// TODO enable when implemented\nconst COMMENT_TOPICS_ENABLED = false\nconst RATING_ARROWS_ENABLED = false\n\nexport default class CreateRadarForm extends PureComponent {\n    // state is getting set because we are implementing a cancel + save button\n    constructor(props) {\n        super(props)\n        let group = false\n\n        if (props.group) {\n            group = props.group\n        } else if (props.groups.length > 0) {\n            const searchParams = (new URL(document.location)).searchParams\n            const groupId = Number(searchParams.get('gid'))\n\n            if (groupId && find(props.groups, ({ value }) => Number(value) === Number(groupId))) {\n                group = groupId\n            } else {\n                group = first(props.groups).value\n            }\n        }\n\n        const {\n            radarName, mapIntro, radarLanguage, radarSets, hideUsersFromTrial, radarImage, votingOn,\n            ratingsOn, discussionOn, commentsOn, likingOn, votingUp, axisXTitle, axisXMin,\n            axisXMax, axisYTitle, axisYMin, axisYMax, fourFieldsTopLeft, fourFieldsTopRight,\n            fourFieldsBottomLeft, fourFieldsBottomRight, displayHaloWhenRating, titleLogo\n        } = props\n\n\n        this.state = {\n            errors: [],\n            phenomenaSet: radarSets.length ? radarSets[0].value : false,\n            commentTopics: initialCommentTopics,\n            radarTitleImage: titleLogo,\n            group,\n            radarName,\n            mapIntro,\n            radarLanguage,\n            hideUsersFromTrial,\n            radarImage,\n            votingOn,\n            ratingsOn,\n            discussionOn,\n            commentsOn,\n            likingOn,\n            votingUp,\n            axisXTitle,\n            axisXMin,\n            axisXMax,\n            axisYTitle,\n            axisYMin,\n            axisYMax,\n            fourFieldsTopLeft,\n            fourFieldsTopRight,\n            fourFieldsBottomLeft,\n            fourFieldsBottomRight,\n            displayHaloWhenRating\n        }\n    }\n\n    componentDidMount() {\n        const { getRadarSets, getUserGroups, existingRadarPage } = this.props\n\n        if (!existingRadarPage) {\n            getUserGroups()\n            getRadarSets()\n        }\n    }\n\n    shouldSetDefaultRadarSet(nextProps) {\n        const { phenomenaSet } = this.state\n        const { radarSets } = this.props\n\n        // receiving radarSets, set not selected yet\n        if (nextProps.radarSets.length && !phenomenaSet) {\n            return true\n        }\n\n        // already received radarSets, but they've changed (probably due to language change)\n        if (radarSets.length && nextProps.radarSets !== radarSets) {\n            // check if current selection is in new set\n            return !find(\n                nextProps.radarSets,\n                radarSet => radarSet.value === phenomenaSet\n            )\n        }\n\n        return false\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.shouldSetDefaultRadarSet(nextProps)) {\n            if (nextProps.radarSets.length) {\n                const radarSet = first(nextProps.radarSets)\n                const imageUrl = radarSet.logo_image || false\n                this.setState({ phenomenaSet: radarSet.value, imageUrl })\n            } else {\n                this.setState({ phenomenaSet: true })\n            }\n        }\n\n        if (nextProps.groups.length && !this.state.group) {\n            const searchParams = (new URL(document.location)).searchParams\n            const groupId = Number(searchParams.get('gid'))\n\n            if (groupId && find(nextProps.groups, ({ value }) => Number(value) === Number(groupId))) {\n                this.setState({ group: groupId })\n            } else {\n                this.setState({ group: first(nextProps.groups).value })\n            }\n        }\n    }\n\n    setFieldError = (field, hasError) => {\n        const { errors } = this.state\n\n        if (hasError) {\n            if (errors.indexOf(field) < 0) {\n                this.setState({ errors: [...errors, field] })\n            }\n        } else {\n            this.setState({ errors: filter(errors, error => error !== field) })\n        }\n\n        return !hasError\n    }\n\n    validateRadarName = () => this.setFieldError('radarName', this.hasRadarNameError())\n\n    validateGroup = () => this.setFieldError('group', this.hasGroupError())\n\n    hasGroupError = () => {\n        const { groups } = this.props\n        const { group: groupValue } = this.state\n\n        const group = find(groups, ({ value }) => value === groupValue)\n\n        return group && !group.hasAvailableRadars\n    }\n\n    hasRadarNameError = () => !this.state.radarName\n\n    validate() {\n        const { addRadarFormPage } = this.props\n\n        const errors = []\n\n        if (addRadarFormPage === PAGE_HEADER_AND_LANGUAGE) {\n            if (this.hasGroupError()) {\n                errors.push('group')\n            }\n            if (this.hasRadarNameError()) {\n                errors.push('radarName')\n            }\n        }\n\n        this.setState({ errors })\n        return errors.length === 0\n    }\n\n    handleRadarNameChange = e => this.setState({\n        radarName: e.target.value\n    }, () => this.validateRadarName())\n    handleMapIntroChange = value => this.setState({ mapIntro: value })\n    handleValueChange = value => e => this.setState({ [value]: e.target.value })\n    handleRadarLanguageChange = ({ value }) => {\n        const { changeRadarLanguage } = this.props\n        changeRadarLanguage(value)\n        this.setState({ radarLanguage: value })\n    }\n    handlePhenomenaSetChange = ({ value }) => {\n        let { imageUrl } = this.state\n        const { radarSets } = this.props\n        const radarSet = find(radarSets, set => set.id === value)\n        if (radarSet && radarSet.logo_image !== '') {\n            imageUrl = radarSet.logo_image\n        } else {\n            imageUrl = false\n        }\n        this.setState({ phenomenaSet: value, imageUrl })\n    }\n    handleDisplayHaloWhenRatingChange = ({ value }) => this.setState({ displayHaloWhenRating: value })\n    handleGroupChange = ({ value }) => this.setState({ group: value }, () => this.validateGroup())\n    handleDiscussionOnChange = () => this.setState({ discussionOn: !this.state.discussionOn })\n    handleVotingOnChange = () => this.setState({ votingOn: !this.state.votingOn })\n    handleRatingsOnChange = () => this.setState({ ratingsOn: !this.state.ratingsOn })\n    handleLikingOnChange = () => this.setState({ likingOn: !this.state.likingOn })\n    handleCommentsOnChange = () => this.setState({ commentsOn: !this.state.commentsOn })\n    handleVotingSelection = () => this.setState({ votingUp: !this.state.votingUp })\n    handleHideUsersFromTrialClick = () =>\n        this.setState({ hideUsersFromTrial: !this.state.hideUsersFromTrial })\n\n    handleTopicChange = (topicLabel, checked) => {\n        const { commentTopics } = this.state\n        const updatedTopics = commentTopics.map(topic => topic.label === topicLabel\n            ? { ...topic, checked }\n            : topic\n        )\n\n        this.setState({ commentTopics: updatedTopics })\n    }\n\n    handleImageSelect = (e, file) => {\n        const fileName = file || e.target.files[0]\n        const reader = new FileReader()\n\n        reader.onload = () => {\n            let img = new Image()\n            img.src = URL.createObjectURL(fileName)\n\n            img.onload = () => {\n                this.setState({\n                    radarImage: reader.result,\n                    imageFile: fileName,\n                    imageUrl: false\n                })\n            }\n        }\n        reader.readAsDataURL(fileName)\n    }\n\n    handleTitleImageSelect = (e, file) => {\n        const fileName = file || e.target.files[0]\n        const reader = new FileReader()\n\n        reader.onload = () => {\n            let img = new Image()\n            img.src = URL.createObjectURL(fileName)\n\n            img.onload = () => {\n                this.setState({\n                    radarTitleImage: reader.result,\n                    imageTitleFile: fileName\n                })\n            }\n        }\n        reader.readAsDataURL(fileName)\n    }\n\n    handleTitleImageDelete = () => {\n        this.setState({\n            radarTitleImage: false,\n            imageTitleFile: false\n        })\n    }\n\n    handleImageDelete = () => {\n        this.setState({\n            radarImage: false,\n            imageFile: false,\n            imageUrl: false\n        })\n    }\n\n    handleNextClick = () => {\n        const {\n            addRadarFormPage,\n            changeRadarLanguage,\n            changeRadarName,\n            changeMapIntro,\n            changeAddRadarFormPage,\n            changeHideUsersFromTrial,\n            changeRadarImage,\n            changeDiscussionOn,\n            changeVotingOn,\n            changeVotingUp,\n            changeRatingsOn,\n            changeRatingsSettings,\n            changeCommentsOn,\n            changeLikingOn,\n            createRadar,\n            changePhenomenaSet,\n            changeRadarGroup,\n            id,\n            updateRadar,\n            changeDisplayHaloWhenRating,\n            isCollaborationToolsAllowed,\n            changeRadarTitleImage\n        } = this.props\n\n        const {\n            radarLanguage,\n            radarName,\n            mapIntro,\n            hideUsersFromTrial,\n            discussionOn,\n            votingOn,\n            votingUp,\n            ratingsOn,\n            commentsOn,\n            likingOn,\n            phenomenaSet,\n            group,\n            axisXTitle,\n            axisXMax,\n            axisXMin,\n            axisYTitle,\n            axisYMax,\n            axisYMin,\n            fourFieldsTopLeft,\n            fourFieldsTopRight,\n            fourFieldsBottomLeft,\n            fourFieldsBottomRight,\n            imageFile,\n            imageTitleFile,\n            displayHaloWhenRating\n        } = this.state\n\n        if (this.validate()) {\n            // todo make these in a pagely manner:)\n            switch (addRadarFormPage) {\n                case PAGE_HEADER_AND_LANGUAGE:\n                    changeRadarLanguage(radarLanguage)\n                    changeRadarName(radarName)\n                    changeRadarGroup(group)\n\n                    if (!id) {\n                        changeAddRadarFormPage(PAGE_BASIC_SETTINGS)\n                    } else {\n                        updateRadar()\n                    }\n\n                    break\n                case PAGE_BASIC_SETTINGS:\n                    changeRadarImage(imageFile)\n                    changeRadarTitleImage(imageTitleFile)\n                    changeHideUsersFromTrial(hideUsersFromTrial)\n                    changePhenomenaSet(phenomenaSet)\n\n                    if (!id) {\n                        if (isCollaborationToolsAllowed(group)) {\n                            changeAddRadarFormPage(PAGE_USER_OPTIONS)\n                        } else {\n                            createRadar()\n                        }\n                    } else {\n                        updateRadar()\n                    }\n\n                    break\n                case PAGE_USER_OPTIONS:\n                    changeDisplayHaloWhenRating(displayHaloWhenRating)\n                    changeDiscussionOn(discussionOn)\n                    changeVotingOn(votingOn)\n                    changeVotingUp(votingUp)\n                    changeRatingsOn(ratingsOn)\n                    changeRatingsSettings({\n                        axisXTitle,\n                        axisXMax,\n                        axisXMin,\n                        axisYTitle,\n                        axisYMax,\n                        axisYMin,\n                        fourFieldsTopLeft,\n                        fourFieldsTopRight,\n                        fourFieldsBottomLeft,\n                        fourFieldsBottomRight\n                    })\n                    changeCommentsOn(commentsOn)\n                    changeLikingOn(likingOn)\n\n                    if (!id) {\n                        createRadar()\n                    } else {\n                        updateRadar()\n                    }\n\n                    break\n                case PAGE_CONCLUSIONS:\n                    changeMapIntro(mapIntro)\n\n                    if (!id) {\n                        changeAddRadarFormPage(PAGE_CONCLUSIONS)\n                    } else {\n                        updateRadar()\n                    }\n\n                    break\n                default:\n                    break\n            }\n        }\n    }\n\n    handleBackClick = () => {\n        const { addRadarFormPage, changeAddRadarFormPage } = this.props\n        const previousPage = addRadarFormPage - 1\n\n        changeAddRadarFormPage(previousPage)\n    }\n\n    handleCloseClick = () => this.props.changeAddRadarFormVisibility()\n    redirectUser = () => window.location.replace(PUBLIC_URL || '/')\n    renderUserOptionsForm() {\n        const {\n            votingOn,\n            ratingsOn,\n            discussionOn,\n            commentsOn,\n            commentTopics,\n            likingOn,\n            votingUp,\n            axisXTitle,\n            axisXMin,\n            axisXMax,\n            axisYTitle,\n            axisYMin,\n            axisYMax,\n            fourFieldsTopLeft,\n            fourFieldsTopRight,\n            fourFieldsBottomLeft,\n            fourFieldsBottomRight,\n            displayHaloWhenRating\n        } = this.state\n\n        return (\n            <div className='modal-form-sections'>\n                <div className='modal-form-section modal-form-header'>\n                    <h2>\n                        {requestTranslation('activateUsers')}\n                    </h2>\n                </div>\n                <div className='modal-form-section'>\n                    <SpaceBetween>\n                        <HalfWidth>\n                            <h3>\n                                {requestTranslation('voting')}\n                            </h3>\n                            <SpaceBetween>\n                                <p>\n                                    {requestTranslation('createFormVotingDescription')}\n                                </p>\n                                <Toggle\n                                    icons={false}\n                                    defaultChecked={votingOn}\n                                    onChange={this.handleVotingOnChange}\n                                />\n                            </SpaceBetween>\n                        </HalfWidth>\n                        {RATING_ARROWS_ENABLED && votingOn && (\n                            <HalfWidth>\n                                <h4>\n                                    {requestTranslation('arrows')}\n                                </h4>\n                                <SpaceBetween style={{ width: '200px' }}>\n                                    <Radiobox\n                                        label={requestTranslation('up')}\n                                        value='up'\n                                        checked={votingUp}\n                                        onClick={this.handleVotingSelection}\n                                    />\n                                    <Radiobox\n                                        label={requestTranslation('upDown')}\n                                        value='updown'\n                                        checked={!votingUp}\n                                        onClick={this.handleVotingSelection}\n                                    />\n                                </SpaceBetween>\n                            </HalfWidth>\n                        )}\n                    </SpaceBetween>\n                    <div style={{ marginTop: '20px' }}>\n                        <h4>\n                            {requestTranslation('upvotesForHalo')}\n                        </h4>\n                        <Select\n                            searchable={false}\n                            name='group'\n                            className='fp-radar-select'\n                            value={displayHaloWhenRating}\n                            onChange={this.handleDisplayHaloWhenRatingChange}\n                            options={times(20, value => ({ label: value + 1, value: value + 1 }))}\n                            clearable={false}\n                        />\n                    </div>\n                </div>\n\n                <div className='modal-form-section'>\n                    <HalfWidth>\n                        <h3>\n                            {requestTranslation('rating')}\n                        </h3>\n                        <SpaceBetween>\n                            <p>\n                                {requestTranslation('createFormRatingDescription')}\n                            </p>\n                            <Toggle icons={false}\n                                    defaultChecked={ratingsOn}\n                                    onChange={this.handleRatingsOnChange}\n                            />\n                        </SpaceBetween>\n                    </HalfWidth>\n                </div>\n\n                {ratingsOn && (\n                    <FullWidthBgContainer style={{ paddingTop: 0 }}>\n                        <SpaceBetween>\n                            <HalfWidth>\n                                <h4>\n                                    {requestTranslation('horizontalAxis')}\n                                </h4>\n                                <Columns>\n                                    <Column>\n                                        <Label>\n                                            {requestTranslation('axisName')}\n                                        </Label>\n                                        <Input type={'text'}\n                                               value={axisXTitle || ''}\n                                               onChange={this.handleValueChange('axisXTitle')}/>\n                                    </Column>\n                                </Columns>\n                                <Columns>\n                                    <Column>\n                                        <Label>\n                                            {requestTranslation('leftEnd')}\n                                        </Label>\n                                        <Input type={'text'}\n                                               value={axisXMin || ''}\n                                               onChange={this.handleValueChange('axisXMin')}/>\n                                    </Column>\n                                    <Column>\n                                        <Label>\n                                            {requestTranslation('rightEnd')}\n                                        </Label>\n                                        <Input type={'text'}\n                                               value={axisXMax || ''}\n                                               onChange={this.handleValueChange('axisXMax')}/>\n                                    </Column>\n                                </Columns>\n                            </HalfWidth>\n                            <HalfWidth>\n                                <h4>\n                                    {requestTranslation('verticalAxis')}\n                                </h4>\n                                <Columns>\n                                    <Column>\n                                        <Label>\n                                            {requestTranslation('axisName')}\n                                        </Label>\n                                        <Input type={'text'}\n                                               value={axisYTitle || ''}\n                                               onChange={this.handleValueChange('axisYTitle')}/>\n                                    </Column>\n                                </Columns>\n                                <Columns>\n                                    <Column>\n                                        <Label>\n                                            {requestTranslation('lowEnd')}\n                                        </Label>\n                                        <Input type={'text'}\n                                               value={axisYMin || ''}\n                                               onChange={this.handleValueChange('axisYMin')}/>\n                                    </Column>\n                                    <Column>\n                                        <Label>\n                                            {requestTranslation('highEnd')}\n                                        </Label>\n                                        <Input type={'text'}\n                                               value={axisYMax || ''}\n                                               onChange={this.handleValueChange('axisYMax')}/>\n                                    </Column>\n                                </Columns>\n                            </HalfWidth>\n                        </SpaceBetween>\n                    </FullWidthBgContainer>\n                )}\n                {ratingsOn && (\n                    <FullWidthBgContainer style={{ paddingTop: 0 }}>\n                        <h4>\n                            {requestTranslation('cornersText')}\n                        </h4>\n                        <SpaceBetween>\n                            <HalfWidth>\n                                <Columns>\n                                    <Column>\n                                        <Label>\n                                            {requestTranslation('topLeft')}\n                                        </Label>\n                                        <Input type={'text'}\n                                               value={fourFieldsTopLeft || ''}\n                                               onChange={\n                                                   this.handleValueChange('fourFieldsTopLeft')\n                                               }/>\n                                    </Column>\n                                    <Column>\n                                        <Label>\n                                            {requestTranslation('topRight')}\n                                        </Label>\n                                        <Input type={'text'}\n                                               value={fourFieldsTopRight || ''}\n                                               onChange={\n                                                   this.handleValueChange('fourFieldsTopRight')\n                                               }/>\n                                    </Column>\n                                </Columns>\n                                <Columns>\n                                    <Column>\n                                        <Label>\n                                            {requestTranslation('bottomLeft')}\n                                        </Label>\n                                        <Input type={'text'}\n                                               value={fourFieldsBottomLeft || ''}\n                                               onChange={\n                                                   this.handleValueChange('fourFieldsBottomLeft')\n                                               }/>\n                                    </Column>\n                                    <Column>\n                                        <Label>\n                                            {requestTranslation('bottomRight')}\n                                        </Label>\n                                        <Input type={'text'}\n                                               value={fourFieldsBottomRight || ''}\n                                               onChange={\n                                                   this.handleValueChange('fourFieldsBottomRight')\n                                               }/>\n                                    </Column>\n                                </Columns>\n                            </HalfWidth>\n                        </SpaceBetween>\n                    </FullWidthBgContainer>\n                )}\n\n                <div className='modal-form-section'>\n                    <SpaceBetween>\n                        <HalfWidth>\n                            <h3>\n                                {requestTranslation('commenting')}\n                            </h3>\n                            <SpaceBetween>\n                                <p>\n                                    {requestTranslation('createFormCommentingDescription')}\n                                </p>\n                                <Toggle\n                                    icons={false}\n                                    defaultChecked={commentsOn}\n                                    onChange={this.handleCommentsOnChange}\n                                />\n                            </SpaceBetween>\n                            <SpaceBetween style={{ marginTop: '15px' }}>\n                                <p>\n                                    {requestTranslation('allowLikeCommenting')}\n                                </p>\n                                <Toggle icons={false}\n                                        defaultChecked={likingOn}\n                                        onChange={this.handleLikingOnChange}\n                                />\n                            </SpaceBetween>\n                        </HalfWidth>\n                        {commentsOn && COMMENT_TOPICS_ENABLED && (\n                            <HalfWidth>\n                                <h4>\n                                    {requestTranslation('commentTopics')}\n                                </h4>\n                                <div>\n                                    {commentTopics.map(({ label, checked }, index) => (\n                                        <Checkbox key={index}\n                                                  blue\n                                                  label={label}\n                                                  checked={checked}\n                                                  onChange={() =>\n                                                      this.handleTopicChange(label, !checked)\n                                                  }/>\n                                    ))}\n                                </div>\n                            </HalfWidth>\n                        )}\n                    </SpaceBetween>\n                </div>\n                <div className='modal-form-section'>\n                    <HalfWidth>\n                        <SpaceBetween>\n                            <h3 className='mb-0'>\n                                {requestTranslation('discussion')}\n                            </h3>\n                            <Toggle icons={false}\n                                    defaultChecked={discussionOn}\n                                    onChange={this.handleDiscussionOnChange}\n                            />\n                        </SpaceBetween>\n                    </HalfWidth>\n                </div>\n            </div>\n        )\n    }\n\n    renderFieldError(field, props = {}) {\n        const { errors } = this.state\n\n        const hasError = errors.length > 0 && errors.indexOf(field) >= 0\n        return hasError && (\n            <FieldError {...props}>\n                {requestTranslation(`radar-error-${field}`)}\n            </FieldError>\n        )\n    }\n\n    renderHeaderAndLanguageForm() {\n        const { radarName, radarLanguage, group } = this.state\n        const { groups, id } = this.props\n\n        return (\n            <div className='modal-form-sections'>\n                <div className='modal-form-section modal-form-header'>\n                    <h2>\n                        {requestTranslation('headerTitle')}\n                    </h2>\n                </div>\n                <div className='modal-form-section'>\n                    <h3>\n                        {requestTranslation('header')}\n                    </h3>\n                    <div className='form-group'>\n                        <Input type={'text'}\n                               value={radarName}\n                               onChange={this.handleRadarNameChange}\n                               style={{ maxWidth: '300px', display: 'inline-block' }}\n                        />\n                        {this.renderFieldError('radarName')}\n                    </div>\n                </div>\n                <div className='modal-form-section lightgray-bg'>\n                    <h3>\n                        {requestTranslation('group')}\n                    </h3>\n                    {!id && (\n                        <div className='form-group'>\n                            <p>\n                                {requestTranslation('groupAvailabilityText')}\n                            </p>\n                            <SelectWrapper>\n                                <Select searchable={false}\n                                        name='group'\n                                        className='fp-radar-select'\n                                        value={group}\n                                        onChange={this.handleGroupChange}\n                                        options={groups}\n                                        clearable={false}\n                                />\n                            </SelectWrapper>\n                            {this.renderFieldError('group', { select: true })}\n                        </div>\n                    )}\n                    {id && (\n                        <p>\n                            {requestTranslation('groupAvailability')} {group.title}\n                        </p>\n                    )}\n                </div>\n                {!id && (\n                    <div className='modal-form-section pb-0'>\n                        <h3>\n                            {requestTranslation('language')}\n                        </h3>\n                        <p>\n                            {requestTranslation('languageAvailability')}\n                        </p>\n                        <Select searchable={false}\n                                name='language'\n                                className='fp-radar-select'\n                                value={radarLanguage || radarLanguages()[0]}\n                                onChange={this.handleRadarLanguageChange}\n                                options={radarLanguages()}\n                                clearable={false}\n                                placeholder={requestTranslation('select').toLowerCase() + '...'}\n                        />\n                    </div>\n                )}\n            </div>\n        )\n    }\n\n    renderConclusionForm = () => {\n        const { mapIntro } = this.state\n\n        return (\n            <div className='modal-form-sections'>\n                <div className='modal-form-section modal-form-header'>\n                    <h2>\n                        {requestTranslation('conclusions')}\n                    </h2>\n                </div>\n                <div className='modal-form-section'>\n                    <ReactQuill\n                        className='fp-wysiwyg'\n                        style={{\n                            height: '250px',\n                            paddingBottom: '42px'\n                        }}\n                        modules={customQuillModules}\n                        formats={formats}\n                        value={mapIntro ? mapIntro : ''}\n                        onChange={this.handleMapIntroChange}\n                    />\n                </div>\n            </div>\n        )\n    }\n\n    renderBasicSettingsForm = () => {\n        const { phenomenaSet, hideUsersFromTrial, radarImage, imageUrl, group, radarTitleImage } = this.state\n        const { radarSets, id, groups, radarTitleImage: propsRadarTitleImage } = this.props\n        // TODO: check why group can be either just an id, or an object with id key, drupal ??\n        const renderTitleLogoInput = _.find(groups, ({ value }) => Number(value) === (Number(group) || Number(group.id)))\n\n        return (\n            <div className='modal-form-sections'>\n                <div className='modal-form-section modal-form-header'>\n                    <h2>\n                        {requestTranslation('basicSettings')}\n                    </h2>\n                </div>\n                {!id && (\n                    <div className='modal-form-section'>\n                        <h3>\n                            {requestTranslation('selectPhenomenaSet')}\n                        </h3>\n                        <Select searchable={false}\n                                name='phenomena-set'\n                                className='fp-radar-select fp-radar-select-hizindex fp-radar-select--no-margin'\n                                value={phenomenaSet}\n                                onChange={this.handlePhenomenaSetChange}\n                                options={radarSets}\n                                clearable={false}\n                        />\n                    </div>\n                )}\n                <div className='modal-form-section'>\n                    <h3>\n                        {renderTitleLogoInput && renderTitleLogoInput.radarLogoEnabled\n                            ? requestTranslation('selectRadarTitleImage') : requestTranslation('selectRadarImage')}\n                    </h3>\n                    <div className='form-group'>\n                        <div className='d-flex w-100 justify-content-between'>\n                            <SelectImageContainer>\n                                {!(radarImage || imageUrl) && requestTranslation('noImageSelected')}\n                                {(radarImage || imageUrl) && (\n                                    <RadarImageContainer>\n                                        <RadarImage src={imageUrl || radarImage}/>\n                                        <RadarImageCloseContainer onClick={this.handleImageDelete}>\n                                            <RadarImageClose className='material-icons'>close</RadarImageClose>\n                                        </RadarImageCloseContainer>\n                                    </RadarImageContainer>\n                                )}\n                                <SelectImageInputContainer>\n                                    <SelectImageInput type='file'\n                                                      accept='image/*'\n                                                      onChange={this.handleImageSelect}\n                                                      placeholder='SELECT'\n                                                      onClick={event => {\n                                                        event.target.value = null\n                                                    }}\n                                    />\n                                    <SelectImageButton className='btn btn-sm btn-outline-secondary'>\n                                        {requestTranslation('select')}\n                                    </SelectImageButton>\n                                </SelectImageInputContainer>\n                            </SelectImageContainer>\n                            {renderTitleLogoInput && renderTitleLogoInput.radarLogoEnabled ? (\n                                <SelectImageContainer>\n                                    {!(radarTitleImage || propsRadarTitleImage) && requestTranslation('noImageSelected')}\n                                    {(radarTitleImage || propsRadarTitleImage) && (\n                                        <RadarImageContainer>\n                                            <RadarTitleImage src={radarTitleImage || propsRadarTitleImage}/>\n                                            <RadarImageCloseContainer onClick={this.handleTitleImageDelete}>\n                                                <RadarImageClose className='material-icons'>close</RadarImageClose>\n                                            </RadarImageCloseContainer>\n                                        </RadarImageContainer>\n                                    )}\n                                    <SelectImageInputContainer>\n                                        <SelectImageInput type='file'\n                                                          accept='image/*'\n                                                          onChange={this.handleTitleImageSelect}\n                                                          placeholder='SELECT'\n                                                          onClick={event => {\n                                                            event.target.value = null\n                                                        }}\n                                        />\n                                        <SelectImageButton className='btn btn-sm btn-outline-secondary'>\n                                            {requestTranslation('select')}\n                                        </SelectImageButton>\n                                    </SelectImageInputContainer>\n                                </SelectImageContainer>\n                            ) : null}\n                        </div>\n                        <p className='description'>\n                            {requestTranslation('radarImageText')}\n                        </p>\n                    </div>\n                </div>\n                <div className={classNames('modal-form-section', { 'pb-0': !id })}>\n                    <h3>\n                        {requestTranslation('hideUserList')}\n                    </h3>\n                    <div className={classNames('form-group', { 'pb-0': !id })}>\n                        <Checkbox whiteBg\n                                  label={requestTranslation('hideUserListLabel')}\n                                  checked={hideUsersFromTrial}\n                                  onChange={this.handleHideUsersFromTrialClick}\n                        />\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    renderFormPage = () => {\n        const { addRadarFormPage } = this.props\n\n        switch (addRadarFormPage) {\n            case PAGE_CONCLUSIONS:\n                return this.renderConclusionForm()\n            case PAGE_BASIC_SETTINGS:\n                return this.renderBasicSettingsForm()\n            case PAGE_USER_OPTIONS:\n                return this.renderUserOptionsForm()\n            default:\n                return this.renderHeaderAndLanguageForm()\n        }\n    }\n\n    renderNextButton() {\n        const { errors } = this.state\n        const { loading, existingRadarPage } = this.props\n\n        const disabled = errors.length || loading.length\n        const phrase = existingRadarPage ? 'save' : 'next'\n\n        return (\n            <button disabled={disabled}\n                        className={'btn btn-lg btn-primary'}\n                        onClick={this.handleNextClick}>\n                {requestTranslation(phrase)}\n            </button>\n        )\n    }\n\n    renderCancelButton() {\n        const { addRadarFormPage, existingRadarPage } = this.props\n        const firstPage = addRadarFormPage === PAGE_HEADER_AND_LANGUAGE\n        const phrase = existingRadarPage || firstPage ? 'cancel' : 'back'\n        const onClick = firstPage ? this.redirectUser : this.handleBackClick\n\n        return (\n            <button className='btn btn-lg btn-plain-gray'\n                          onClick={existingRadarPage ? this.handleCloseClick : onClick}>\n                {requestTranslation(phrase)}\n            </button>\n        )\n    }\n\n    renderPagination() {\n        const { addRadarFormPage, isCollaborationToolsAllowed } = this.props\n        const { group: groupId } = this.state\n        return (\n            <Pagination>\n                <PaginationLine />\n                <PaginationNumber active={addRadarFormPage === PAGE_HEADER_AND_LANGUAGE}>\n                    1\n                </PaginationNumber>\n                <PaginationNumber active={addRadarFormPage === PAGE_BASIC_SETTINGS}>\n                    2\n                </PaginationNumber>\n                {isCollaborationToolsAllowed(groupId) && <PaginationNumber active={addRadarFormPage === PAGE_USER_OPTIONS}>\n                    3\n                </PaginationNumber>}\n            </Pagination>\n        )\n    }\n\n    render() {\n        const { existingRadarPage, loading } = this.props\n\n        return (\n            <div>\n                {this.renderFormPage()}\n                <div className='modal-form-section modal-form-actions'>\n                    <div>\n                        {this.renderCancelButton()}\n                        {this.renderNextButton()}\n                    </div>\n                </div>\n                <Loading shown={loading.length} color={'black'} />\n                {!existingRadarPage && this.renderPagination()}\n            </div>\n        )\n    }\n}\n\nconst SelectWrapper = styled.div`\n    display: inline-block;\n    margin-right: 15px;\n`\n\nconst FieldError = styled.div`\n    margin-top: ${({ select }) => select ? '7px' : '0'};\n    display: ${({ select }) => select ? 'block' : 'inline-block'};\n    clear: right;\n    color: red;\n`\n\nconst Pagination = styled.div`\n    position: absolute;\n    top: 30px;\n    right: 30px;\n    display: flex;\n    width: 100px;\n    justify-content: space-between;\n`\n\nconst PaginationLine = styled.div`\n    width: 100%;\n    height: 1px;\n    background: gray;\n    position: absolute;\n    top: 50%;\n    z-index: 1;\n`\n\nconst PaginationNumber = styled.div`\n    width: 23px;\n    height: 23px;\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: white;\n    padding-top: 0px;\n    font-size: 13px;\n    box-sizing: border-box;\n    z-index: 10;\n    background: ${props => props.active ? '#006998' : 'gray'};\n`\n\nconst Input = styled.input`\n    width: 300px;\n    background: transparent;\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    margin-right: 15px;\n    font-size: 16px;\n    padding-left: 20px;\n    height: 45px;\n    border-radius: 1px;\n    box-sizing: border-box;\n`\n\nconst FullWidthBgContainer = styled.div`\n    width: 100%;\n    background-color: #f1f3f3;\n    box-sizing: border-box;\n    padding: 30px 50px;\n    &:after {\n      content: \"\";\n      display: table;\n      clear: both;\n    }\n`\n\nconst SelectImageInputContainer = styled.div`\n    position: relative;\n    width: 100px;\n    height: 40px;\n    margin-left: 20px;\n`\n\nconst SelectImageInput = styled.input`\n    z-index: 20;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n    background: transparent;\n    position: absolute;\n    top: 0;\n    left: 0;\n    &:hover {\n        cursor: pointer;\n    }\n`\n\nconst SelectImageButton = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100px;\n    height: 40px;\n    border: 1px solid #006998;\n    color: #006998;\n    border-radius: 40px;\n    background: transparent;\n    font-size: 16px;\n    font-weight: 700;\n    &:hover {\n        transition: all 0.4s ease;\n        cursor: pointer;\n        color: white;\n        background-color: #006998;\n    }\n`\n\nconst SelectImageContainer = styled.div`\n    display: flex;\n    margin-bottom: 20px;\n    align-items: center;\n`\n\nconst RadarImage = styled.img`\n    width: 200px;\n    height: 200px;\n    border-radius: 50%;\n    object-fit: cover;\n    border: 1px solid transparent;\n`\n\nconst RadarTitleImage = styled.img`\n    height: 85px;\n    width: auto;\n    object-fit: contain;\n    border: 1px solid transparent;\n`\n\nconst RadarImageContainer = styled.div`\n    position: relative;\n    background-color: rgba(0,0,0, 0.1);\n`\n\nconst RadarImageCloseContainer = styled.div`\n    position: absolute;\n    top: -15px;\n    right: -15px;\n    border-radius: 50%;\n    background-color: #f1f3f3;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 30px;\n    height: 30px;\n    border: 1px solid gray;\n    &:hover {\n        cursor: pointer;\n    }\n`\n\nconst RadarImageClose = styled.i`\n    /*color: gray;*/\n    opacity: 0.7;\n`\n\nconst breakpoint = '767px'\nconst HalfWidth = styled.div`\n    @media (min-width: ${breakpoint}) {\n        width: 45%;\n        display: flex;\n        flex-direction: column;\n    }\n`\n\nconst SpaceBetween = styled.div`\n    @media (min-width: ${breakpoint}) {\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-start;\n    }\n`\n\nconst Label = styled.label`\n    white-space: nowrap;\n`\n\nconst columnPadding = 10\nconst Columns = styled.div`\n    width: ${({ width }) => width ? width : 'auto'};\n    display: flex;\n    margin: 0 -${columnPadding}px 10px -${columnPadding}px;\n`\n\nconst Column = styled.div`\n    flex: 1 1 ${({ width }) => width ? width : '0%'};\n    padding: 0 ${columnPadding}px;\n`\n","import { connect } from 'react-redux'\nimport { compose, bindActionCreators } from 'redux'\nimport { createSelector } from 'reselect'\nimport { getCurrentLanguage } from '@sangre-fp/i18n'\nimport { isCollaborationToolsAllowed } from '../selectors'\nimport CreateRadarForm from '../components/CreateRadarForm'\nimport filter from 'lodash/filter'\nimport includes from 'lodash/includes'\nimport {\n    changeAddRadarFormVisibility,\n    changeRadarName,\n    changeMapIntro,\n    changeRadarLanguage,\n    changeAddRadarFormPage,\n    changePhenomenaSet,\n    changeHideUsersFromTrial,\n    changeRadarImage,\n    changeVotingOn,\n    changeRatingsOn,\n    changeRatingsSettings,\n    changeDiscussionOn,\n    changeCommentsOn,\n    changeLikingOn,\n    changeVotingUp,\n    createRadar,\n    changeRadarGroup,\n    updateRadar,\n    getRadarSets,\n    getUserGroups,\n    changeDisplayHaloWhenRating,\n    changeRadarTitleImage\n} from '../actions/radarSettings'\n\n\nconst getStateRadarSets = state => state.radarSets\n\n// sets for both languages have language set to 'und'\nconst LANGUAGE_UNDEFINED = 'und'\n\nconst getRadarSetsByLanguage = createSelector(\n    [getCurrentLanguage, getStateRadarSets],\n    (language, radarSets) => filter(\n        radarSets,\n        radarSet => includes([language, LANGUAGE_UNDEFINED], radarSet.language)\n    )\n)\n\nconst mapStateToProps = state => {\n    const {\n        radarSettings,\n        loading\n    } = state\n\n    const radarSets = getRadarSetsByLanguage(state)\n    return {\n        ...radarSettings,\n        radarSets,\n        loading,\n        isCollaborationToolsAllowed: isCollaborationToolsAllowed(state)\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return bindActionCreators({\n        changeDisplayHaloWhenRating,\n        changeAddRadarFormVisibility,\n        changeRadarName,\n        changeMapIntro,\n        changeRadarLanguage,\n        changeAddRadarFormPage,\n        changePhenomenaSet,\n        changeHideUsersFromTrial,\n        changeRadarImage,\n        changeVotingOn,\n        changeRatingsOn,\n        changeRatingsSettings,\n        changeDiscussionOn,\n        changeCommentsOn,\n        changeLikingOn,\n        changeVotingUp,\n        createRadar,\n        changeRadarGroup,\n        updateRadar,\n        getUserGroups,\n        getRadarSets,\n        changeRadarTitleImage\n    }, dispatch)\n}\n\nexport default compose(\n    connect(mapStateToProps, mapDispatchToProps)\n)(CreateRadarForm)\n","import { connect } from 'react-redux'\nimport { PhenomenaSelector } from '@sangre-fp/content-editor'\n\nexport default connect(\n    state => {\n        const {\n            phenomena,\n            radarSettings: {\n                group\n            }\n        } = state\n\n        return {\n            phenomena,\n            group\n        }\n    }\n)(PhenomenaSelector)\n","import React, { PureComponent } from 'react'\nimport * as d3 from 'd3'\nimport Draggable from 'react-draggable'\nimport PhenomenaSelector from '../containers/SandboxPhenomenaSelectorContainer'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { ListContainer, modalStyles, ListClose, CloseIcon, BorderTitleContainer as Container, Modal } from '@sangre-fp/ui'\nimport { PhenomenonEditForm } from \"@sangre-fp/content-editor\"\n\nexport default class AddPhenomenaSandbox extends PureComponent {\n    state = {\n        createModalShown: false,\n        filtersShown: false,\n        resetFilters: 0\n    }\n\n    componentDidMount() {\n        const { updateMouseCoords } = this.props\n        const sandbox = d3.select('.add-phenomena-to-radar')\n\n        sandbox\n            .on('mousemove', updateMouseCoords)\n            .on('touchstart', updateMouseCoords)\n            .on('touchmove', updateMouseCoords)\n    }\n\n    successfullyCreatedCallback = phenomenon => {\n        const { onPhenomenaDrag } = this.props\n\n        onPhenomenaDrag(false, phenomenon, true)\n    }\n\n    handlePhenomenaSelection = selectedPhenomena => this.setState({ selectedPhenomena })\n    handleCreateNew = () => this.setState({ createModalShown: true })\n\n    handleAdd = phenomenon => {\n        const { addPublicPhenomenaToRadar } = this.props\n\n        addPublicPhenomenaToRadar(phenomenon, this.successfullyCreatedCallback)\n    }\n\n    hideAddForm = () => this.setState({ createModalShown: false })\n    bumpResetFilters = () => this.setState({ resetFilters: this.state.resetFilters + 1 })\n\n    renderCreateModal() {\n        const {\n            changeAddPhenomenaVisibility,\n            storePhenomenon,\n            onPhenomenaDrag,\n            radar\n        } = this.props\n\n        const { createModalShown } = this.state\n\n        return (\n            <Modal isOpen={createModalShown}\n                   contentLabel={'Create phenomena'}\n                   style={modalStyles}\n                   ariaHideApp={false}\n                   onRequestClose={this.hideAddForm}\n            >\n                <PhenomenonEditForm\n                    onSubmit={(values, newsFeedChanges) => {\n                        storePhenomenon(values, newsFeedChanges, phenomenon => {\n                            this.hideAddForm()\n                            changeAddPhenomenaVisibility()\n                            onPhenomenaDrag(false, phenomenon, true)\n                        })\n                    }}\n                    onCancel={this.hideAddForm}\n                    onDelete={() => {}}\n                    radar={radar}\n                />\n            </Modal>\n        )\n    }\n\n    render() {\n        const {\n            changeAddPhenomenaVisibility,\n            radarId,\n            language,\n            placing\n        } = this.props\n        const {\n            selectedPhenomena,\n            filtersShown,\n            resetFilters\n        } = this.state\n\n        return (\n            <Draggable handle=\".handle\">\n                <ListContainer\n                    className={'add-phenomena-to-radar'}\n                    style={{\n                        zIndex: placing ? 0 : 1,\n                        opacity: placing ? 0.8 : 1\n                    }}\n                >\n                    <Container className='flex-shrink-0 handle' style={{ cursor: 'move' }}>\n                        <h3 className='radar-widget-title mb-0'>\n                            {requestTranslation('sandboxTitle')}\n                        </h3>\n                    </Container>\n                    <ListClose onClick={changeAddPhenomenaVisibility}>\n                        <CloseIcon className='material-icons'>close</CloseIcon>\n                    </ListClose>\n                    <Container className={'phenomena-list-container'} filtersShown={filtersShown}>\n                        <PhenomenaSelector\n                            radarId={radarId}\n                            language={language}\n                            onSelect={this.handlePhenomenaSelection}\n                            onCreate={this.handleCreateNew}\n                            selectedPhenomena={selectedPhenomena}\n                            onAddToRadarClick={this.handleAdd}\n                            sandbox\n                            filter\n                            filtersShown={filtersShown}\n                            handleFilterChange={() => this.setState({ filtersShown: !filtersShown })}\n                            resetFilters={resetFilters}\n                            bumpResetFilters={this.bumpResetFilters}\n                        />\n                    </Container>\n                    {filtersShown ? (\n                        <Container filtersShown={filtersShown}>\n                            <button className='btn btn-outline-secondary w-100 d-flex align-items-center justify-content-center' onClick={this.bumpResetFilters}>\n                                <i className='material-icons mr-1' style={{ fontSize: '16px' }}>replay</i>\n                                {requestTranslation('resetFilters')}\n                            </button>\n                        </Container>\n                    ) : (\n                        <Container className='d-flex flex-shrink-0'>\n                            <button\n                              onClick={this.handleCreateNew}\n                              className='btn btn-outline-secondary'\n                            >\n                              {requestTranslation(\"addNewPhenomena\")}\n                            </button>\n                            <button className='btn btn-primary ml-auto'\n                                    onClick={changeAddPhenomenaVisibility}>\n                                {requestTranslation('done')}\n                            </button>\n                        </Container>\n                    )}\n                    {this.renderCreateModal()}\n                </ListContainer>\n            </Draggable>\n        )\n    }\n}\n","import 'proxy-polyfill'\nimport radarDataApi from '@sangre-fp/connectors/radar-data-api'\nimport store from './configureStore'\nimport { updateRadarVersion } from './actions/radarData'\n\nconst handler = {\n  get(radarApi, name) {\n    return (...args) => {\n      if (!radarApi.hasOwnProperty(name)) {\n        throw new Error('Invalid call')\n      }\n\n      return radarApi[name](...args)\n        .then(res => {\n          store.dispatch(updateRadarVersion(res.data.radar_version))\n\n          return res.data\n        })\n    }\n  }\n}\n\nconst radarDataApiProxy = new Proxy(radarDataApi, handler)\n\nexport default radarDataApiProxy\n\n","import { getNetworkMethods } from './network'\nimport drupalApi from '@sangre-fp/connectors/drupal-api'\nimport * as actionTypes from '@sangre-fp/reducers/actionTypes'\nimport { requestTranslation } from '@sangre-fp/i18n'\n\nexport const getPhenomenaTypes = groupId => (dispatch, getState) => {\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.GET_PHENOMENA_TYPES,\n        actionTypes.GET_PHENOMENA_TYPES_SUCCESS,\n        requestTranslation('fetchingPhenomenaTypesError')\n    )\n\n    dispatch(loading())\n\n    return drupalApi.getPhenomenaTypes(groupId)\n        .then(data => dispatch(success(data)))\n        .catch(err => dispatch(error(err)))\n}\n","import axios from 'axios'\nimport { getSessionToken } from '../session'\nconst SCREENSHOT_SERVICE_API_URL = process.env.REACT_APP_SCREENSHOT_SERVICE_API_URL\n\nexport const SCREENSHOT_ENCODING_BINARY='binary'\nexport const SCREENSHOT_ENCODING_BASE64='base64'\n\nexport async function screenshot({ url, selector = null, waitFor = 2000, encoding = SCREENSHOT_ENCODING_BASE64}) {\n  const payload = { url, encoding, waitFor }\n  if (selector) {\n    payload.selector = selector\n  }\n  return axios({\n    method: 'POST',\n    url: `${SCREENSHOT_SERVICE_API_URL}`,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    withCredentials: true,\n    data: payload\n  }).then(({ data }) => data)\n\n}\n\n","import PptxGenJS from 'pptxgenjs'\nimport { requestTranslation as tr } from '@sangre-fp/i18n'\nimport radarDataApi from '@sangre-fp/connectors/radar-data-api'\nimport { getPhenomenaTypes, getRadar } from '@sangre-fp/connectors/drupal-api'\nimport { getUsername } from '@sangre-fp/connectors/session'\nimport htmlToText from 'html-to-text'\nimport { getRadarPhenomena } from '@sangre-fp/connectors/phenomena-api'\nimport { get } from 'lodash'\nimport { screenshot } from '@sangre-fp/connectors/screenshot-service-api'\nexport default async function generatePPTX(radarId, groupId) {\n  const pptx = new PptxGenJS()\n  const username = getUsername()\n  const reportCreatedDate = new Date()\n  const createdDate = reportCreatedDate.toLocaleDateString()\n  const phenomenonTypes = await getPhenomenaTypes(groupId)\n  const phenomenonTypeTitlesById = phenomenonTypes.reduce((obj, { id, title }) => ({ ...obj, [id]: title }), {})\n  const { radarName, results_url: radarResultsUrl, url: radarUrl, phenomena: radarPhenomenaDataById, axisXTitle, axisYTitle, comment_count, ratingsOn, votingOn, discussionOn, commentsOn } = await getRadar(radarId)\n  const { data: { sectors } } = await radarDataApi.getRadar(radarId)\n  const { phenomena: radarPhenomena } = await getRadarPhenomena(radarId, groupId)\n  let phenomena = radarPhenomena.map(p => ({ ...radarPhenomenaDataById[p.id], ...p })).sort(({ time: aTime }, { time: bTime }) => aTime - bTime)\n  pptx.defineLayout({ name: 'FP', width: 13.33, height: 7.5 });\n  pptx.layout = 'FP';\n  pptx.defineSlideMaster({\n    title: \"FP_SLIDE\",\n    // slideNumber: { x: 10, y: 7.8, color: '000000' },\n    objects: [\n      {\n        image: {\n          x: 0.37,\n          y: 7.02,\n          w: 2.17,\n          h: 0.32,\n          data: getFuturesPlatformLogo()\n        },\n      },\n      {\n        text: {\n          text: `${createdDate}  ${tr('pptxReportBy')} ${username}`, options: { x: 4, y: 7.04, w: 9.0, h: 0.3, fontSize:12, align: 'right' }\n        }\n      }\n    ]\n  })\n\n  function addHeading(txt, slide) {\n    slide.addText(txt, { x: 0.4, y: 0.4, fontSize: 18, valign: \"top\", w: 12, h: 0.4 })\n  }\n\n  function addTitle(txt, slide) {\n    slide.addText(txt, { x: 0.4, y: 0.68, fontSize: 25, color: '44546a', bold: true, valign: \"top\", w: 12, h: 0.5 })\n  }\n\n  function addSlide(opts = {}) {\n    return pptx.addSlide(Object.assign({\n      masterName: \"FP_SLIDE\",\n      fontFace: 'Arial',\n      fontSize: 12\n    }, opts))\n  }\n\n  function addCoverSlide() {\n    const slide = addSlide({\n      masterName: undefined\n    })\n    // Radar Title\n    slide.addText(radarName, { x: 0.16, y: 2.57, w: 13, h: 1.63, autoShrink: true, align: 'center', bold: true, fontSize: 50 })\n    // Content Summary Text\n    slide.addText([\n      { text: `${tr('pptxReportTitle')} `, options: { bold: true, breakLine: false } },\n      { text: createdDate, options: { breakLine: false } },\n      { text: ` ${tr('pptxReportBy')} `, options: { bold: true, breakLine: false } },\n      { text: username, options: { breakLine: false } },\n    ], { x: 0.16, y: 4.24, w: 13, h: 2, fontSize: 20, align: 'center', color: '44546a' })\n    slide.addImage({\n      x: 4.7,\n      y: 6.5,\n      w: 3.92,\n      h: 0.59,\n      data: getFuturesPlatformLogo()\n    })\n  }\n\n  async function addPreviewSlide() {\n    const slide = addSlide({ masterName: undefined })\n    try {\n      const { data } = await screenshot({ url: radarUrl, waitFor: 5000 })\n      slide.addImage({\n        data: `image/png;base64,${data}`,\n        x: 0,\n        y: 0,\n        w: 13.33,\n        h: 7.5\n      })\n    } catch (err) {\n      console.error('radar preview screenshot failed')\n    }\n  }\n\n  function addSectorsSlide() {\n    const slide = addSlide()\n    addHeading(radarName, slide)\n    addTitle(tr('pptxSectorListTitle'), slide)\n    slide.addText(sectors.map(({title}) => ({\n      text: title, options: { bullet: true }\n    })), { x: 0.4, y: 1.2, fontSize: 15, lineSpacing: 25, valign:\"top\", w: 12, h: 5 })\n  }\n\n  function addSectorSummarySlide({ title, notes }) {\n    const slide = addSlide()\n    addHeading(tr('pptxSector').toUpperCase(), slide)\n    addTitle(title, slide)\n    slide.addText(toText(notes), { x: 0.4, y: 1.2, w: 11.5, h: 6, fontSize: 12, isTextBox: true, shrinkText: true, valign: 'top' })\n  }\n\n  function addSectorContent(id, title, phenomena) {\n    const slide = addSlide()\n    addHeading(tr('pptxSectorContent').toUpperCase(), slide)\n    addTitle(title, slide)\n    let xOffset = 0\n    // TODO: Replace time with crowdsourced\n    phenomena.forEach(({ content: { short_title, type, summary, time_range }, time }) => {\n      const yearMin = time_range?.min\n      const yearMax = time_range?.max\n      let timeRangeStr = ''\n      if (yearMin || yearMax) {\n        timeRangeStr = `${yearMin}-${yearMax}`\n      }\n\n      slide.addText(short_title, { x: 0.4 + xOffset, y: 1.2, w: 3.9, h: 0.3, isTextBox: true, shrinkText: true, bold: true, fontSize: 15 })\n      slide.addText(`${phenomenonTypeTitlesById[type]} ${timeRangeStr}`, { x: 0.4 + xOffset, y: 1.4, w: 3.9, h: 0.3, shrinkText: true, fontSize: 10 })\n      slide.addText(`${tr('pptxTimestamp')}: ${time || '-'}`, { x: 0.4 + xOffset, y: 1.6, w: 3.9,  h: 0.3, shrinkText: true, fontSize: 10 })\n      slide.addText(toText(summary), { x: 0.4 + xOffset, y: 1.9, w: 3.9, h: 5, isTextBox: true, shrinkText: true, valign: 'top', fontSize: 12 })\n      xOffset += 4\n    })\n\n  }\n\n  function addTopVotedContentSlide(phenomena, pageNum, totalCount) {\n    const slide = addSlide()\n    addHeading(radarName, slide)\n    addTitle(tr('pptxTopVotedContent'), slide)\n    const rows = phenomena.map(({ content: { short_title, type }, vote_sum }) => (\n      [\n        { text: short_title, options: { bold: true } },\n        { text: `${phenomenonTypeTitlesById[type]}` },\n        { text: typeof vote_sum === 'number' ? vote_sum : '-' }\n      ]\n    ))\n    slide.addTable(rows, { x: 0.5, y: 1.3, w: 12, h: 5, colW: [8, 1.5, 1.5], valign: 'top' })\n  }\n\n  async function addRatedContentImageSlide() {\n    const slide = addSlide()\n    addHeading(radarName, slide)\n    addTitle(tr('pptxRatedContent'), slide)\n\n    try {\n      const { data } = await screenshot({ waitFor: 5000, url: `${radarResultsUrl}?tab=1`, selector: 'div.rating-results-diagram' })\n      slide.addImage({\n        data: `image/png;base64,${data}`,\n        x: 0.4,\n        y: 1.4,\n        w: 7.1,\n        h: 5.3\n      })\n    } catch (err) {\n      console.error('rating results diagram screenshot failed')\n    }\n  }\n\n  function addRatedContentAxisSlide(xPhenomena, yPhenomena) {\n    const slide = addSlide()\n    addHeading(radarName, slide)\n    addTitle(tr('pptxRatedContent'), slide)\n\n    let xOffset = 0.4;\n    [xPhenomena, yPhenomena].forEach(({ title, axis, phenomena }) => {\n      slide.addText(title, { x: xOffset, y: 1.4, fontSize: 18, w: 13, h: 0.35, bold: true })\n      const rows = phenomena.map(({ content: { short_title, type }, rating_avg }) => {\n        return [\n          { text: short_title, options: { bold: true } },\n          { text: `${phenomenonTypeTitlesById[type]}` },\n          { text: rating_avg && typeof rating_avg[axis] === 'number' ? (rating_avg[axis] / 100).toFixed(2) : '-' }\n        ]\n\n        }\n      )\n      if (rows.length > 0) {\n        slide.addTable(rows, { x: xOffset, y: 2, w: 5.5, h: 4.7, colW: [3.5, 1.5, 0.5], valign: 'top' })\n      }\n      xOffset += 6.8\n    })\n  }\n\n  function addCommentSummarySlide() {\n    const slide = addSlide()\n    addHeading(radarName, slide)\n    addTitle(tr('pptxCommentsTitle'), slide)\n\n    slide.addText([\n      {text: tr('pptxCommentsText', comment_count) , options: { breakLine: false }},\n      {text: `${radarResultsUrl}?tab=2`, options: { hyperlink: {url: `${radarResultsUrl}?tab=2` }}}\n    ], { x: 0.4, y: 2 })\n  }\n\n  addCoverSlide()\n  await addPreviewSlide()\n\n  // Sectors\n  addSectorsSlide()\n  sectors.forEach(function (sector) {\n    addSectorSummarySlide(sector)\n    let sectorPhenomena = phenomena.filter(({ sectorId }) => sectorId === sector.id)\n    do {\n      addSectorContent(sector.id, sector.title, sectorPhenomena.splice(0, 3))\n    } while (sectorPhenomena.length > 0)\n  })\n\n  // Top Voted Phenomena\n  if (votingOn) {\n    const sortedPhenomena = [...phenomena].sort(({ vote_sum: aVoteSum = -1000000, time: aTimestamp }, { vote_sum: bVoteSum = -1000000, time: bTimestamp }) => {\n      if (aVoteSum === bVoteSum) {\n        return aTimestamp-bTimestamp\n      }\n      return bVoteSum-aVoteSum\n    })\n\n    const topVotedPageCount = Math.ceil(sortedPhenomena.length % 15)\n    let topVotedPageNum = 1\n    do {\n      addTopVotedContentSlide(sortedPhenomena.splice(0, 15), topVotedPageCount, topVotedPageNum++, topVotedPageCount)\n    } while (sortedPhenomena.length > 0)\n  }\n\n  // Content Rating\n  if (ratingsOn) {\n    await addRatedContentImageSlide()\n\n    const axisPhenomena = ['x', 'y'].map(axis => [...phenomena].sort(({ rating_avg: aRatingAvg }, { rating_avg: bRatingAvg }) => {\n      let aAvg = get(aRatingAvg, axis, -10000000)\n      let bAvg = get(bRatingAvg, axis, -10000000)\n      return bAvg-aAvg\n    }))\n    let xPhenomena = axisPhenomena[0] || []\n    let yPhenomena = axisPhenomena[1] || []\n    do {\n      addRatedContentAxisSlide({ title: axisXTitle, axis: 'x', phenomena: xPhenomena.length > 0 ? xPhenomena.splice(0, 14) : [] }, { title: axisYTitle, axis: 'y', phenomena: yPhenomena.length > 0 ? yPhenomena.splice(0, 14) : [] })\n    } while (xPhenomena.length > 0 || yPhenomena.length > 0)\n  }\n\n  if (discussionOn || commentsOn) {\n    // Comment Summary Slide\n    addCommentSummarySlide()\n  }\n  return pptx.writeFile(radarName.replace(/(\\W+)/gi, '-'));\n}\n\nfunction toText(html) {\n  return htmlToText.fromString(html, { wordwrap: false, ignoreImage: true, singleNewLineParagraphs: false }).replace(\"\\r\", '').replace(/\\n\\n+/g, \"\\n\\n\")\n}\n\nfunction getFuturesPlatformLogo() {\n  return 'image/wmf;base64,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DAAAAAEAAAATAAAADAAAAAIAAAA7AAAACAAAABsAAAAQAAAAogwAALEDAABZAAAAIAAAAAAAAAAAAAAA//////////8BAAAAogyxA1gAAAA0AAAAAAAAAAAAAAD//////////wYAAACiDHIEIwy2BJULtgQIC7YEiQpyBIkKsQNZAAAAKAAAAAAAAAAAAAAA//////////8DAAAAiQogAhYLIAIWC6YDWAAAADQAAAAAAAAAAAAAAP//////////BgAAABYLEwROCzkElQs5BN0LOQQVDBMEFQymA1kAAAAoAAAAAAAAAAAAAAD//////////wMAAAAVDCACogwgAqIMsQM9AAAACAAAADwAAAAIAAAAPgAAABgAAAAZAQAAOQAAAFEBAAB+AAAAJQAAAAwAAAAAAACAJQAAAAwAAAABAAAAEwAAAAwAAAACAAAAOwAAAAgAAAAbAAAAEAAAAEMOAACcAgAAWQAAAEAAAAAAAAAAAAAAAP//////////CQAAAEMOnAJDDqkEtg2pBLYNnAI3DZwCNw0gAsMOIALDDpwCQw6cAj0AAAAIAAAAPAAAAAgAAAA+AAAAGAAAAGABAAA5AAAAigEAAHwAAAAlAAAADAAAAAAAAIAlAAAADAAAAAEAAAATAAAADAAAAAIAAAA7AAAACAAAABsAAAAQAAAAcREAALEDAABZAAAAIAAAAAAAAAAAAAAA//////////8BAAAAcRGxA1gAAAA0AAAAAAAAAAAAAAD//////////wYAAABxEXIE8hC2BGQQtgTXD7YEWA9yBFgPsQNZAAAAKAAAAAAAAAAAAAAA//////////8DAAAAWA8gAuUPIALlD6YDWAAAADQAAAAAAAAAAAAAAP//////////BgAAAOUPEwQdEDkEZBA5BKwQOQTkEBME5BCmA1kAAAAoAAAAAAAAAAAAAAD//////////wMAAADkECACcREgAnERsQM9AAAACAAAADwAAAAIAAAAPgAAABgAAACZAQAAOQAAANEBAAB+AAAAJQAAAAwAAAAAAACAJQAAAAwAAAABAAAAEwAAAAwAAAACAAAAOwAAAAgAAAAbAAAAEAAAAAETAAA8AwAAWQAAACAAAAAAAAAAAAAAAP//////////AQAAAAETPANYAAAANAAAAAAAAAAAAAAA//////////8GAAAATRM8A2gTFQNoE+wCaBPCAk0TmwIBE5sCWQAAACgAAAAAAAAAAAAAAP//////////AwAAAMYSmwLGEjwDARM8Az0AAAAIAAAAGwAAABAAAADJEgAAuAMAAFkAAAA0AAAAAAAAAAAAAAD//////////wYAAADJErgDxhK4A8YSqQQ5EqkEORIgAg0TIAJYAAAANAAAAAAAAAAAAAAA//////////8GAAAAthMgAvcTiQL3E+wC9xM4A9ATiANxE6kDWQAAACgAAAAAAAAAAAAAAP//////////AwAAAE4UqQSTE6kEyRK4Az0AAAAIAAAAPAAAAAgAAAA+AAAAGAAAAOYBAAA5AAAAHgIAAHwAAAAlAAAADAAAAAAAAIAlAAAADAAAAAEAAAATAAAADAAAAAIAAAA7AAAACAAAABsAAAAQAAAAZxUAAJwCAABZAAAAUAAAAAAAAAAAAAAA//////////8NAAAAZxWcAmcVGQMoFhkDKBaTA2cVkwNnFSwEOBYsBDgWqQTZFKkE2RQgAjgWIAI4FpwCZxWcAj0AAAAIAAAAPAAAAAgAAAA+AAAAGAAAACwCAAA5AAAAUQIAAHwAAAAlAAAADAAAAAAAAIAlAAAADAAAAAEAAAATAAAADAAAAAIAAAA7AAAACAAAABsAAAAQAAAAkhgAAIQCAABZAAAAJAAAAAAAAAAAAAAA//////////8CAAAAkhiEAjkY2QJYAAAAQAAAAAAAAAAAAAAA//////////8JAAAAIBi+AvoXkAK1F5AChheQAm4XpgJuF8QCbhfjAokX8wKsFwYDWQAAACAAAAAAAAAAAAAAAP//////////AQAAABcYPQNYAAAAQAAAAAAAAAAAAAAA//////////8JAAAAYhhkA5QYpwOUGPcDlBheBEIYtgS5F7YEIRe2BM4WSAS+FicEWQAAACAAAAAAAAAAAAAAAP//////////AQAAABgX0ANYAAAAQAAAAAAAAAAAAAAA//////////8JAAAAKhfxA2kXOQS4FzkE7Bc5BAkYGwQJGPcDCRjRA+gXuAOrF5gDWQAAACAAAAAAAAAAAAAAAP//////////AQAAAGAXcQNYAAAAQAAAAAAAAAAAAAAA//////////8JAAAAERdHA+EWEwPhFscC4RZdAj8XEwK1FxMCIxgTAmQYUgKSGIQCPQAAAAgAAAA8AAAACAAAAD4AAAAYAAAAXwIAADcAAACQAgAAfgAAACUAAAAMAAAAAAAAgCUAAAAMAAAAAQAAABMAAAAMAAAAAgAAADsAAAAIAAAAGwAAABAAAADcGgAAPAMAAFkAAAAkAAAAAAAAAAAAAAD//////////wIAAADcGjwDFxs8A1gAAAA0AAAAAAAAAAAAAAD//////////wYAAABjGzwDfhsVA34b7AJ+G8ICYxubAhcbmwJZAAAAJAAAAAAAAAAAAAAA//////////8CAAAA3BqbAtwaPAM9AAAACAAAABsAAAAQAAAAIxsAACACAABZAAAAIAAAAAAAAAAAAAAA//////////8BAAAAIxsgAlgAAAA0AAAAAAAAAAAAAAD//////////wYAAADMGyACDRyJAg0c7AINHE4DzBu4AyMbuANZAAAAMAAAAAAAAAAAAAAA//////////8FAAAA3Bq4A9waqQRPGqkETxogAiMbIAI9AAAACAAAADwAAAAIAAAAPgAAABgAAAC+AgAAOQAAAOwCAAB8AAAAJQAAAAwAAAAAAACAJQAAAAwAAAABAAAAEwAAAAwAAAACAAAAOwAAAAgAAAAbAAAAEAAAALgdAAAsBAAAWQAAADgAAAAAAAAAAAAAAP//////////BwAAALgdLAS4HakEhRypBIUcIAITHSACEx0sBLgdLAQ9AAAACAAAADwAAAAIAAAAPgAAABgAAAD5AgAAOQAAABkDAAB8AAAAJQAAAAwAAAAAAACAJQAAAAwAAAABAAAAEwAAAAwAAAACAAAAOwAAAAgAAAAbAAAAEAAAAFsfAAAUAwAAWQAAACwAAAAAAAAAAAAAAP//////////BAAAAFsfFAMcH9sDmB/bA1sfFAM9AAAACAAAABsAAAAQAAAA+B4AAFAEAABZAAAAQAAAAAAAAAAAAAAA//////////8JAAAA+B5QBNweqQRSHqkEHh8gApYfIAJjIKkE2B+pBLwfUAT4HlAEPQAAAAgAAAA8AAAACAAAAD4AAAAYAAAAKQMAADkAAABgAwAAfAAAACUAAAAMAAAAAAAAgCUAAAAMAAAAAQAAABMAAAAMAAAAAgAAADsAAAAIAAAAGwAAABAAAACsIQAAnAIAAFkAAABAAAAAAAAAAAAAAAD//////////wkAAACsIZwCrCGpBB8hqQQfIZwCnyCcAp8gIAIrIiACKyKcAqwhnAI9AAAACAAAADwAAAAIAAAAPgAAABgAAABmAwAAOQAAAI8DAAB8AAAAJQAAAAwAAAAAAACAJQAAAAwAAAABAAAAEwAAAAwAAAACAAAAOwAAAAgAAAAbAAAAEAAAAFIjAACcAgAAWQAAAEgAAAAAAAAAAAAAAP//////////CwAAAFIjnAJSIxgDEyQYAxMkkgNSI5IDUiOpBMUiqQTFIiACIyQgAiMknAJSI5wCPQAAAAgAAAA8AAAACAAAAD4AAAAYAAAAnwMAADkAAADEAwAAfAAAACUAAAAMAAAAAAAAgCUAAAAMAAAAAQAAABMAAAAMAAAAAgAAADsAAAAIAAAAGwAAABAAAAAsJQAAZAMAAFkAAAAgAAAAAAAAAAAAAAD//////////wEAAAAsJWQDWAAAAEwAAAAAAAAAAAAAAP//////////DAAAACwl5ANqJTgE2CU4BEYmOASEJuQDhCZkA4Qm5AJGJpAC2CWQAmolkAIsJeQCLCVkAz0AAAAIAAAAGwAAABAAAAASJwAAZAMAAFkAAAAgAAAAAAAAAAAAAAD//////////wEAAAASJ2QDWAAAAEwAAAAAAAAAAAAAAP//////////DAAAABInKASLJrYE2CW2BCYltgSfJCgEnyRkA58koQImJRMC2CUTAosmEwISJ6ECEidkAz0AAAAIAAAAPAAAAAgAAAA+AAAAGAAAANEDAAA3AAAAEgQAAH4AAAAlAAAADAAAAAAAAIAlAAAADAAAAAEAAAATAAAADAAAAAIAAAA7AAAACAAAABsAAAAQAAAAVygAADwDAABZAAAAIAAAAAAAAAAAAAAA//////////8BAAAAVyg8A1gAAAA0AAAAAAAAAAAAAAD//////////wYAAACjKDwDvigVA74o7AK+KMICoyibAlcomwJZAAAAKAAAAAAAAAAAAAAA//////////8DAAAAHCibAhwoPANXKDwDPQAAAAgAAAAbAAAAEAAAAB8oAAC4AwAAWQAAADQAAAAAAAAAAAAAAP//////////BgAAAB8ouAMcKLgDHCipBI8nqQSPJyACYyggAlgAAAA0AAAAAAAAAAAAAAD//////////wYAAAAMKSACTSmJAk0p7AJNKTgDJimIA8coqQNZAAAAKAAAAAAAAAAAAAAA//////////8DAAAApCmpBOkoqQQfKLgDPQAAAAgAAAA8AAAACAAAAD4AAAAYAAAAHwQAADkAAABXBAAAfAAAACUAAAAMAAAAAAAAgCUAAAAMAAAAAQAAABMAAAAMAAAAAgAAADsAAAAIAAAAGwAAABAAAAACLAAAqQQAAFkAAABUAAAAAAAAAAAAAAD//////////w4AAAACLKkEAizfAoUr9wMUK/cDmCrfApgqqQQKKqkECiogAs4qIAJMK0ED1SsgAo8sIAKPLKkEAiypBD0AAAAIAAAAPAAAAAgAAAA+AAAAGAAAAGEEAAA5AAAAowQAAHwAAAAlAAAADAAAAAAAAIAoAAAADAAAAAEAAAAnAAAAGAAAAAEAAAAAAAAAAGmYAAAAAAAlAAAADAAAAAEAAAATAAAADAAAAAIAAAA7AAAACAAAABsAAAAQAAAAqgYAAFQDAABZAAAAIAAAAAAAAAAAAAAA//////////8BAAAAqgZUA1gAAABMAAAAAAAAAAAAAAD//////////wwAAACqBiwFKwWqBlIDqgZ5AaoG+/8sBfv/VAP7/30BeQEAAFIDAAArBQAAqgZ9AaoGVAM9AAAACAAAADwAAAAIAAAAPgAAABgAAAAAAAAAAAAAALIAAACyAAAAJQAAAAwAAAAAAACAKAAAAAwAAAABAAAAJwAAABgAAAABAAAAAAAAAP///wAAAAAAJQAAAAwAAAABAAAAEwAAAAwAAAACAAAAOwAAAAgAAAAbAAAAEAAAAKsEAAAkBAAAWQAAACAAAAAAAAAAAAAAAP//////////AQAAAKsEJARYAAAATAAAAAAAAAAAAAAA//////////8MAAAAuwQYBNQEJgTfBDcE6QRFBO4EYATWBHAExwR5BLMEeQSmBG4EjwRaBJgEMgSrBCQEPQAAAAgAAAA8AAAACAAAAD4AAAAYAAAAegAAAG0AAACEAAAAdwAAACUAAAAMAAAAAAAAgCUAAAAMAAAAAQAAABMAAAAMAAAAAgAAADsAAAAIAAAAGwAAABAAAADCAwAAgAQAAFkAAAAgAAAAAAAAAAAAAAD//////////wEAAADCA4AEWAAAAGQAAAAAAAAAAAAAAP//////////EgAAAHoDfgRtA8wDbgMmA28DdQKHAysCtgMRAtgD/gFLBAUCUQQGAu4EEAIrBXkCKwXbAisFnQO7BK0DWwTpAw4EGgQKBIAEwgOABD0AAAAIAAAAPAAAAAgAAAA+AAAAGAAAAFsAAAA1AAAAigAAAHgAAAAlAAAADAAAAAAAAIAlAAAADAAAAAEAAAATAAAADAAAAAIAAAA7AAAACAAAABsAAAAQAAAALQMAAEsCAABZAAAAIAAAAAAAAAAAAAAA//////////8BAAAALQNLAlgAAACgAAAAAAAAAAAAAAD//////////yEAAAAsAxUCBgMMAtoCCAKyAgQCOQICAgACCgKyARcCpwGbAqUBLAOiAc4DrwF8BPYBgAT2AYAE9wGABPcBgAQPAoEEIAJ2BC4CZgRDAk4EUQIrBGgCDgSSAtoDrwLNA9sCpwMfA20D/QImA/4C8AL/AsgCDAOuAhIDogIlA3sCLQNiAi0DSwI9AAAACAAAADwAAAAIAAAAPgAAABgAAAAsAAAANgAAAFUAAAB4AAAAJQAAAAwAAAAAAACAOwAAAAgAAAAbAAAAEAAAAAAAAAAAAAAAWQAAACwAAAAAAAAAAAAAAP//////////BAAAAAAAAAAAALQGiSy0BoksAAA8AAAACAAAAEMAAAAMAAAABQAAACgAAAAMAAAAAQAAAA4AAAAUAAAAAAAAABAAAAAUAAAA'\n}","import _ from 'lodash'\n\nimport { loadingError, getNetworkMethods } from './network'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport drupalApi from '@sangre-fp/connectors/drupal-api'\nimport radarDataApi from '../radarDataApiProxy'\nimport { PUBLIC_URL } from '../env'\nimport * as actionTypes from '@sangre-fp/reducers/actionTypes'\nimport {\n    getRadarPhenomena, NEWSFEED_ERROR,\n    NEWSFEED_ERROR_PARTIAL,\n    storePhenomenonWithNewsFeeds\n} from '@sangre-fp/connectors/phenomena-api'\nimport { handleImageUploadIfNeeded } from '@sangre-fp/connectors/media-api'\nimport { getPhenomenaTypes } from './phenomenaTypes'\nimport generatePPTX from '../pptx-generator'\n\nexport const updateRadarVersion = version => ({\n    type: actionTypes.UPDATE_RADAR_VERSION,\n    payload: version\n})\n\nexport function preloadImages (imageSources) {\n    imageSources\n        .forEach(i => {\n        const linkEl = document.createElement('link');\n        linkEl.setAttribute('rel', 'preload');\n        linkEl.setAttribute('href', i);\n        linkEl.setAttribute('as', 'image');\n        document.head.appendChild(linkEl);\n        });\n    }\n\nexport const fetchRadar = () => async (dispatch, getState) => {\n    const id = getState().radarSettings.id\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.FETCH_RADAR,\n        actionTypes.FETCH_RADAR_SUCCESS,\n        requestTranslation('fetchingRadarError')\n    )\n\n    dispatch(loading())\n\n    try {\n        const radarData = await drupalApi.getRadar(id)\n\n        const img = new Image();\n        img.onload = async () => {\n            \n        }\n        preloadImages([`${PUBLIC_URL}${radarData?.radarImage}`])\n        img.src = radarData?.radarImage // by setting an src, you trigger browser download\n        const phenomenaData = await getRadarPhenomena(id, radarData.group.id)\n\n            Object.values(phenomenaData.phenomena).forEach(res => {\n                res.halo = _.get(radarData.phenomena[res.id], 'halo', false)\n                res.speech_bubble = _.get(radarData.phenomena[res.id], 'speech_bubble', false)\n            })\n\n            const result = { ...radarData, ...phenomenaData }\n\n            dispatch(getPhenomenaTypes(radarData.group.id)).then(() => dispatch(success(result)))\n    } catch (err) {\n        dispatch(error(err))\n    }\n}\n\nexport const refetchRadarData = () => async (dispatch, getState) => {\n    const radarId = getState().radarSettings.id\n    const groupId = getState().radarSettings.group.id\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.REFETCH_DATA,\n        actionTypes.REFETCH_DATA_SUCCESS,\n        requestTranslation('refetchingPhenomenaError')\n    )\n\n    dispatch(loading())\n\n    try {\n        const result = await getRadarPhenomena(radarId, groupId)\n\n        dispatch(success(result))\n    } catch (err) {\n        dispatch(error(err))\n    }\n}\n\nexport const deleteRadarPhenomenon = (phenomenon, callback) => (dispatch, getState) => {\n    const { time, version, id } = phenomenon\n    const radarId = getState().radarSettings.id\n\n    if (!time) {\n        if (callback) {\n            callback()\n        }\n\n        return dispatch({ type: actionTypes.DELETE_PHENOMENA_SUCCESS, payload: phenomenon })\n    }\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.DELETE_PHENOMENA,\n        actionTypes.DELETE_PHENOMENA_SUCCESS,\n        requestTranslation('deletingPhenomenaError')\n    )\n\n    dispatch(loading())\n\n    const data = {\n        version,\n        phenomenon_uuid: id\n    }\n\n    return radarDataApi.deletePhenomenon(radarId, data)\n        .then(() => {\n            dispatch(success(phenomenon))\n            if (callback) {\n                callback()\n            }\n        })\n        .catch(err => dispatch(error(err)))\n}\n\nexport const updatePhenomenonPosition = phenomenon => ({\n    type: actionTypes.UPDATE_PHENOMENON,\n    payload: phenomenon\n})\n\nexport const updatePhenomenonVersion = phenomenon => ({\n    type: actionTypes.UPDATE_PHENOMENON_VERSION,\n    payload: phenomenon\n})\n\nconst phenomenaApiErrorHandler = (error, errorFunc, dispatch) => {\n    switch (error.response.data.error_code) {\n        case 'outdated-version':\n            dispatch(errorFunc(new Error('Outdated version'), requestTranslation('outDatedVersionError')))\n            break\n        case 'resource-not-found':\n            dispatch(errorFunc(new Error('Not found'), requestTranslation('phenomenaNotFound')))\n            break\n        case 'already-exists':\n            dispatch(errorFunc(new Error('Already exists'), requestTranslation('phenomenaExists')))\n            break\n        case 'invalid-input':\n            dispatch(errorFunc(new Error('Invalid input'), requestTranslation('phenomenaInvalid')))\n            break\n        default:\n            dispatch(errorFunc(error))\n            break\n    }\n}\n\nexport const storePhenomenon = (phenomenon, newsFeedChanges, callback, archived = false) => async (dispatch) => {\n    let {\n        group,\n        _upload: {\n          imageFile,\n          imageUrl,\n          // image // Contains image data url\n        } = {},\n        ...rest\n    } = phenomenon\n\n    const { loading, success, error } = phenomenon.id\n        ? getNetworkMethods(\n            actionTypes.UPDATE_PHENOMENON_INGESTION,\n            actionTypes.UPDATE_PHENOMENON_INGESTION_SUCCESS,\n            requestTranslation('updatingPhenomenaError')\n        ) : getNetworkMethods(\n            actionTypes.CREATE_PHENOMENA,\n            actionTypes.CREATE_PHENOMENA_SUCCESS,\n            requestTranslation('creatingPhenomenaError')\n        )\n\n    dispatch(loading())\n\n    const phenomenonInput = {\n        ...rest,\n        archived,\n        group,\n    }\n\n    phenomenonInput.content.media.image = await handleImageUploadIfNeeded(imageFile || imageUrl, group) || ''\n\n\n    try {\n        const { storedPhenomenon, status, failedNewsFeedTitles } = await storePhenomenonWithNewsFeeds(phenomenonInput, newsFeedChanges)\n\n        if (status === NEWSFEED_ERROR_PARTIAL) {\n            dispatch(error(new Error('News feed error'), requestTranslation('someNewsFeedCreationError', failedNewsFeedTitles)))\n        } else if (status === NEWSFEED_ERROR) {\n            dispatch(error(new Error('News feed error'), requestTranslation(phenomenon.id ? 'newsFeedUpdateError' : 'newsFeedCreationError')))\n        } else {\n            dispatch(success(storedPhenomenon))\n            callback(storedPhenomenon)\n        }\n    } catch (e) {\n        dispatch(error(e))\n    }\n}\n\nexport const updatePhenomenon = (phenomenon, positionData) => (dispatch, getState) => {\n    dispatch(updatePhenomenonPosition({ ...phenomenon, ...positionData }))\n\n    const radarId = getState().radarSettings.id\n    const { id } = phenomenon\n    const updatedPhenomenon = _.find(getState().phenomena, { id })\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.UPDATE_PHENOMENON_ASYNC,\n        actionTypes.UPDATE_PHENOMENON_ASYNC_SUCCESS,\n        requestTranslation('updatingPhenomenaError')\n    )\n\n    const { sectorId, time, xOffset, version } = updatedPhenomenon\n\n    const data = {\n        sectorId,\n        time,\n        xOffset,\n        id,\n        version\n    }\n\n    dispatch(loading())\n\n    return radarDataApi.updatePhenomenon(radarId, data)\n        .then(response => {\n            dispatch(updatePhenomenonVersion(response.phenomenon))\n\n            dispatch(success())\n        })\n        .catch(err => {\n            phenomenaApiErrorHandler(err, error, dispatch)\n\n            return dispatch(refetchRadarData())\n        })\n}\n\nexport const createPhenomenonWithPosition = (phenomenon, positionData) => (dispatch, getState) => {\n    dispatch(updatePhenomenonPosition({ ...phenomenon, ...positionData }))\n\n    const { id } = phenomenon\n\n    const updatedPhenomenon = _.find(getState().phenomena, { id })\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.CREATE_PHENOMENA_POSITION,\n        actionTypes.CREATE_PHENOMENA_POSITION_SUCCESS,\n        requestTranslation('settingPhenomenaError')\n    )\n\n    const radarId = getState().radarSettings.id\n\n    const { sectorId, time, xOffset } = updatedPhenomenon\n\n    dispatch(loading())\n\n    const data = {\n        radarId,\n        id,\n        sectorId,\n        time,\n        xOffset\n    }\n\n    radarDataApi.createPhenomenon(Number(radarId), data)\n        .then(resultData => dispatch(success(resultData.phenomenon)))\n        .catch(err => {\n            phenomenaApiErrorHandler(err, error, dispatch)\n\n            return dispatch(refetchRadarData())\n        })\n}\n\nexport const setDraggedPhenomenon = id => dispatch =>\n    dispatch({ type: actionTypes.SET_DRAGGED_PHENOMENON, payload: id })\n\n\nexport const cloneRadar = callback => (dispatch, getState) => {\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.CLONE_RADAR,\n        actionTypes.CLONE_RADAR_SUCCESS,\n        requestTranslation('cloningRadarError')\n    )\n\n    const parentRadarId = getState().radarSettings.id\n\n    dispatch(loading())\n\n    drupalApi.cloneRadar(parentRadarId)\n        .then(radarData => {\n            dispatch(success(radarData))\n            callback(`${PUBLIC_URL}/radar?node=${radarData.id}`)\n        })\n        .catch(err => {\n            if (err && err.response && err.response.status === 400) {\n                dispatch(loadingError(\n                    actionTypes.CLONE_RADAR,\n                    err,\n                    '',\n                    requestTranslation('licenseError'))\n                )\n            } else {\n                dispatch(error(err))\n            }\n        })\n}\n\nexport const deleteRadar = () => (dispatch, getState) => {\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.DELETING_RADAR,\n        actionTypes.DELETING_RADAR_SUCCESS,\n        requestTranslation('deletingRadarError')\n    )\n\n    dispatch(loading())\n\n    return drupalApi.deleteRadar(getState().radarSettings.id)\n        .then(() => {\n            dispatch(success())\n            document.location.href = '/'\n        })\n        .catch(err => dispatch(error(err)))\n}\n\nexport const addPublicPhenomenaToRadar = (phenomenon, callback) => (dispatch, getState) => {\n    const { id } = phenomenon\n\n    dispatch({\n        type: actionTypes.CREATE_PHENOMENA_SUCCESS,\n        payload: phenomenon\n    })\n\n    callback(_.find(getState().phenomena, { id }))\n}\n\nexport const generatePowerpoint = (id, groupId) => (dispatch, getState) => {\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.GENERATE_POWERPOINT,\n        actionTypes.GENERATE_POWERPOINT_SUCCESS,\n        requestTranslation('generatingPPTXError')\n    )\n\n    dispatch(loading())\n\n    return generatePPTX(id, groupId)\n        .then(() => dispatch(success()))\n        .catch(err => dispatch(error(err)))\n}","import { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport AddPhenomenaSandbox from '../components/AddPhenomenaSandbox'\nimport { changeAddPhenomenaVisibility } from '../actions/radarSettings'\nimport { storePhenomenon, addPublicPhenomenaToRadar } from '../actions/radarData'\n\nexport default connect(\n    (state) => {\n        const {\n            radarSettings: {\n                id,\n                group,\n                radarLanguage,\n                addPhenomenaVisible\n            },\n        } = state\n\n        return {\n            radarId: id,\n            radarLanguage,\n            addPhenomenaVisible,\n\n            radar: {\n                id,\n                groupId: group.id,\n                language: radarLanguage\n            }\n        }\n    },\n    dispatch => bindActionCreators({\n        changeAddPhenomenaVisibility,\n        storePhenomenon,\n        addPublicPhenomenaToRadar\n    }, dispatch)\n)(AddPhenomenaSandbox)\n","import * as actionTypes from '@sangre-fp/reducers/actionTypes'\n\n/*\n  payload is settings object\n  settings: {\n    text,\n    title,\n    callback\n  }\n*/\n\nexport const toggleConfirmationDialog = payload => dispatch =>\n  dispatch({ type: actionTypes.TOGGLE_CONFIRM_DIALOG, payload })\n","import { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { ConfirmDialog } from '@sangre-fp/ui'\nimport { toggleConfirmationDialog } from '../actions/confirmDialog'\n\nexport default connect(\n    state => state.confirmDialog,\n    dispatch => ({\n        ...bindActionCreators({\n            toggleConfirmationDialog\n        }, dispatch)\n    })\n)(ConfirmDialog)\n","import React, { PureComponent } from 'react'\nimport ReactQuill from 'react-quill'\nimport styled from 'styled-components'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { ButtonsContainer, Input, SelectImageButton, SelectImageInput, SelectImageInputContainer, ModalContainer } from '@sangre-fp/ui'\nimport { customQuillModules } from '../config'\nimport { formats } from '../quill'\n\n\nclass AddSignalForm extends PureComponent {\n    state = {\n        title: '',\n        body: '',\n        image: false,\n        imageFile: false,\n        imageUrl: false,\n        errorsShown: false\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.errors[0]) {\n            this.setState({ errorsShown: true })\n        }\n    }\n\n    handleTitleChange = ({ target }) => this.setState({ title: target.value })\n    handleBodyChange = value => this.setState({ body: value })\n\n    handleImageSelect = (e, file) => {\n        const fileName = file || e.target.files[0]\n        const reader = new FileReader()\n\n        reader.onload = () => {\n            let img = new Image()\n            img.src = URL.createObjectURL(fileName)\n\n            img.onload = () => {\n                this.setState({\n                    image: reader.result,\n                    imageFile: fileName\n                })\n            }\n        }\n        reader.readAsDataURL(fileName)\n    }\n\n    handleCreate = () => {\n        const { createSignal, changeSignalCreateVisibility } = this.props\n        this.setState({ errorsShown: false })\n        createSignal(this.state, changeSignalCreateVisibility)\n    }\n\n    render() {\n        const { changeSignalCreateVisibility } = this.props\n        const { title, body, image, imageUrl, errorsShown } = this.state\n\n        return (\n            <ModalContainer className='d-flex flex-column'>\n                <h2 className='m-0'>{requestTranslation('addNewSignal')}</h2>\n                <div className='mt-3'>\n                    <h3>{requestTranslation('title')}</h3>\n                    <Input type={'text'} value={title} onChange={this.handleTitleChange} />\n                    {errorsShown && !title.length && <div className='description text-danger mt-2'>{requestTranslation('fieldMissing')}</div>}\n                </div>\n                <div className='mt-3'>\n                    <h3>{requestTranslation('mainContent')}</h3>\n                    <ReactQuill\n                        className='fp-wysiwyg'\n                        style={{\n                            height: '250px',\n                            paddingBottom: '42px'\n                        }}\n                        modules={customQuillModules}\n                        formats={formats}\n                        value={body}\n                        onChange={this.handleBodyChange}\n                    />\n                    {errorsShown && !body.length && <div className='description text-danger mt-2'>{requestTranslation('fieldMissing')}</div>}\n                </div>\n                <div className='mt-3 mb-5'>\n                    <h3>{requestTranslation('image')}</h3>\n                    {!image && requestTranslation('noImageSelected')}\n                    {(image || imageUrl) && <SignalImage src={image || imageUrl} />}\n                    <SelectImageInputContainer>\n                        <SelectImageInput\n                            type='file'\n                            accept='image/*'\n                            onChange={this.handleImageSelect}\n                            placeholder={requestTranslation('select')}\n                        />\n                        <SelectImageButton className='btn btn-sm btn-outline-secondary'>\n                            {requestTranslation('select')}\n                        </SelectImageButton>\n                    </SelectImageInputContainer>\n                </div>\n                <ButtonsContainer className='mt-5'>\n                    <button\n                        className='btn btn-plain'\n                        onClick={changeSignalCreateVisibility}\n                    >\n                        {requestTranslation('cancel')}\n                    </button>\n                    <button\n                        className='btn btn-primary'\n                        onClick={this.handleCreate}\n                    >\n                        {requestTranslation('save')}\n                    </button>\n                </ButtonsContainer>\n            </ModalContainer>\n        )\n    }\n}\n\nexport default AddSignalForm\n\nconst SignalImage = styled.img`\n    max-width: 400px;\n    height: auto;\n    object-fit: cover;\n`\n","import { getNetworkMethods } from './network'\nimport { getSignals } from '@sangre-fp/connectors/search-api'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { getImageUrl, uploadFile } from '@sangre-fp/connectors/media-api'\nimport { archiveDocument, TYPE_SIGNAL, upsertDocument } from '@sangre-fp/connectors/content-service-api'\nimport * as actionTypes from '@sangre-fp/reducers/actionTypes'\n\nexport const changeSignalListVisibility = () => dispatch => dispatch({ type: actionTypes.HANDLE_SIGNAL_LIST_VISIBILITY })\nexport const changeSignalCreateVisibility = () => dispatch => dispatch({ type: actionTypes.HANDLE_SIGNAL_CREATE_VISIBILITY })\n\nexport const fetchRadarSignals = (searchInput = '', page = 0, size = 10) => async (dispatch, getState) => {\n  const { uuid, group } = getState().radarSettings\n  const { loading, success } = getNetworkMethods(\n    actionTypes.FETCH_SIGNALS,\n    page === 0 ? actionTypes.FETCH_SIGNALS_SUCCESS : actionTypes.FETCH_MORE_SIGNALS_SUCCESS,\n    requestTranslation('fetchingSignalsError')\n  )\n\n  dispatch(loading())\n  dispatch(success(await getSignals(searchInput, [group.id], page, size, uuid)))\n}\n\nexport const archiveSignal = (groupId, signalId, callback) => async (dispatch, getState) => {\n  const { loading, success, error } = getNetworkMethods(\n    actionTypes.ARCHIVE_SIGNAL,\n    actionTypes.ARCHIVE_SIGNAL_SUCCESS,\n    requestTranslation('archiveSignalError')\n  )\n  dispatch(loading())\n  try {\n    dispatch(success(await archiveDocument({group: groupId, type: TYPE_SIGNAL, id: signalId})))\n    callback()\n  } catch (err) {\n    dispatch(error(err))\n  }\n}\n\nexport const createSignal = (signal, callback) => async (dispatch, getState) => {\n  const { title, body, imageFile: file } = signal\n  const { loading, success, error } = getNetworkMethods(\n    actionTypes.CREATE_SIGNAL,\n    actionTypes.CREATE_SIGNAL_SUCCESS,\n    requestTranslation('creatingSignalsError')\n  )\n  const { uuid, radarLanguage, group: { id: groupId } } = getState().radarSettings\n  const titleMissing = !title\n  const bodyMissing = !body\n  const languageMissing = !radarLanguage\n\n  if (bodyMissing || languageMissing || titleMissing) {\n    return dispatch(error(new Error('Invalid data'), requestTranslation('missingRequiredSignalData')))\n  }\n\n  dispatch(loading())\n\n  const doc = {\n    language: radarLanguage,\n    type: TYPE_SIGNAL,\n    group: Number(groupId),\n    content: {\n      title,\n      body,\n      radar: uuid,\n      media: {\n        image: ''\n      }\n    }\n  }\n\n  try {\n    if (file) {\n      doc.content.media.image = getImageUrl(await uploadFile(file, groupId))\n    }\n    dispatch(success(await upsertDocument(doc)))\n    callback()\n  } catch (err) {\n    dispatch(error(err))\n  }\n}\n","import { connect } from 'react-redux'\nimport AddSignalForm from '../components/AddSignalForm'\nimport { compose, bindActionCreators } from 'redux'\nimport { createSignal, changeSignalCreateVisibility } from '../actions/signals'\n\nconst mapStateToProps = (state) => {\n    const {\n        loading,\n        errors\n    } = state\n\n    return {\n        loading,\n        errors\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    ...bindActionCreators({\n        createSignal,\n        changeSignalCreateVisibility\n    }, dispatch)\n})\n\nexport default compose(\n    connect(mapStateToProps, mapDispatchToProps)\n)(AddSignalForm)\n","import React, { PureComponent } from 'react'\nimport {\n    ListBackground,\n    ListContainer,\n    ListClose,\n    CloseIcon,\n    ButtonsContainer,\n    modalStyles,\n    SidePadding,\n    SearchInput\n} from '@sangre-fp/ui'\nimport _ from 'lodash'\nimport AddSignalForm from '../containers/AddSignalFormContainer'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { Modal } from '@sangre-fp/ui'\nimport styled from 'styled-components'\n\nconst PAGE_SIZE = 10\nconst SEARCH_DEBOUNCE_TIME = 250\n\nclass SignalList extends PureComponent {\n    state = {\n        page: 1,\n        searchInput: ''\n    }\n\n    debounceTimeout = false\n\n    componentWillUpdate(nextProps, nextState) {\n        const { fetchRadarSignals, signalData: { totalRadarSignals, signalListVisible }, loading } = this.props\n        const { page, searchInput } = this.state\n        const nextPage = nextState.page\n        const totalPages = totalRadarSignals / PAGE_SIZE\n        const willBeVisible = nextProps.signalData.signalListVisible\n\n        if (signalListVisible !== willBeVisible) {\n            this.setState({ page: 1, searchInput: '' }, () => {\n                if (willBeVisible) {\n                    fetchRadarSignals()\n                }\n            })\n        }\n\n        if (!loading.length && nextPage !== page && nextPage > page && nextPage <= totalPages + 1) {\n            fetchRadarSignals(searchInput, nextPage - 1, PAGE_SIZE)\n        }\n    }\n\n    handleArchiveSignal = signalId => {\n        const { groupId, archiveSignal, fetchRadarSignals } = this.props\n        archiveSignal(groupId, signalId, () => {\n            fetchRadarSignals()\n        })\n    }\n\n    handleScroll = e => {\n        const { loading, signalData: { totalRadarSignals } } = this.props\n        const { page } = this.state\n        const bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight\n        const totalPages = totalRadarSignals / PAGE_SIZE\n\n        if (bottom && !loading.length && page < totalPages + 1) {\n            this.setState({ page: page + 1 })\n        }\n    }\n\n    handleSearchChange = ({ target }) => {\n        const { fetchRadarSignals } = this.props\n        this.setState({ searchInput: target.value, page: 1 })\n\n        clearTimeout(this.debounceTimeout)\n        this.debounceTimeout = setTimeout(() => fetchRadarSignals(target.value, 0, PAGE_SIZE), SEARCH_DEBOUNCE_TIME)\n    }\n\n    renderSignal(signal, index) {\n        const { canArchiveSignals } = this.props\n        const { id, content: { title, body, media: { image: image_url } = {} } = {}, created_at: created, created_by_name: username } = signal\n        const date = created ? created.slice(0, 10) : new Date().toJSON().slice(0, 10)\n\n        return (\n            <SignalItem\n                key={index}\n                className='d-flex flex-column pt-4 pb-4 justify-content-center'\n                style={{ backgroundColor: index % 2 === 0 ? 'white' : '#E7E7E8' }}\n            >\n                <h3>{title}</h3>\n                <div className='d-flex mb-2'>\n                    {(image_url && image_url.length) ?\n                        (<img\n                            alt=''\n                            src={image_url}\n                            className='mr-4 mt-2 mb-3'\n                            style={{ objectFit: 'contain', height: '105px' }}\n                        />)\n                        : null\n                    }\n                    <div dangerouslySetInnerHTML={{ __html: body }} />\n                </div>\n                {date.replace(/-/g, '.').split('.').reverse().join('.')}\n                {username ? (\n                    <div>\n                        {requestTranslation('createdBy')}:\n                        &nbsp;\n                        {username}\n                    </div>)\n                : ''}\n                {canArchiveSignals && (\n                  <ButtonsContainer style={{ justifyContent: 'flex-start' }}>\n                      <button\n                        className=\"btn btn-md btn-plain-gray pl-0\"\n                        onClick={() => window.confirm(requestTranslation('deleteSignalConfirmation')) && this.handleArchiveSignal(id)}\n                      >\n                          {requestTranslation('delete')}\n                      </button>\n                  </ButtonsContainer>\n                )}\n            </SignalItem>\n        )\n    }\n\n    renderSignals() {\n        const { signalData: { signals } } = this.props\n\n        if (signals.length) {\n            return (\n                <SearchResultsList small className='d-flex h-100 flex-column mt-5'>\n                    {_.map(signals, this.renderSignal.bind(this))}\n                </SearchResultsList>\n            )\n        }\n\n        return (\n            <SidePadding><b>{requestTranslation('noSignalsCreated')}</b></SidePadding>\n        )\n    }\n\n    renderCreateModal() {\n        const { signalData: { signalCreateVisibility } } = this.props\n\n        return (\n            <Modal\n                isOpen={signalCreateVisibility}\n                contentLabel={'Create Signal'}\n                style={modalStyles}\n                ariaHideApp={false}\n            >\n                <AddSignalForm />\n            </Modal>\n        )\n    }\n\n    render() {\n        const {\n            changeSignalListVisibility,\n            changeSignalCreateVisibility,\n            signalData: {\n                signalListVisible\n            }\n        } = this.props\n        const { searchInput } = this.state\n\n        if (!signalListVisible) {\n            return null\n        }\n\n        return (\n            <ListBackground onScroll={this.handleScroll}>\n                <ListContainer className='justify-content-between' style={{ padding: '30px 0', height: 'auto' }}>\n                    <ListClose onClick={changeSignalListVisibility}>\n                        <CloseIcon className='material-icons'>close</CloseIcon>\n                    </ListClose>\n                    <SidePadding className='d-flex justify-content-between algin-items-center'>\n                        <h2 className='m-0'>{requestTranslation('listOfSignals')}</h2>\n                        <div className='d-flex'>\n                            <SearchInput\n                                type={'search'}\n                                small={true}\n                                className='mr-4'\n                                placeholder={requestTranslation('searchByKeywords')}\n                                value={searchInput}\n                                onChange={this.handleSearchChange}\n                            />\n                            <button className='btn btn-outline-secondary flex-shrink-0'\n                                onClick={changeSignalCreateVisibility}\n                            >\n                                {requestTranslation('createNew')}\n                            </button>\n                        </div>\n                    </SidePadding>\n                    {this.renderSignals()}\n                    <SidePadding>\n                        <ButtonsContainer>\n                            <button className='btn btn-primary' onClick={changeSignalListVisibility}>\n                                {requestTranslation('close')}\n                            </button>\n                        </ButtonsContainer>\n                    </SidePadding>\n                </ListContainer>\n                {this.renderCreateModal()}\n            </ListBackground>\n        )\n    }\n}\n\nexport default SignalList\n\nconst SearchResultsList = styled.div`\n    flex: 1;\n    width: 91%;\n    min-height: 20px;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.10), 0 1px 2px rgba(0,0,0,0.10);\n    margin: 0 auto;\n    flex-grow: 1;\n    flex-shrink: 1;\n    flex-basis: 0%;\n    overflow-y: auto;\n    overflow-x: hidden;\n`\n\nconst SignalItem = styled.div`\n    border-bottom: 1px solid #d5dbdf;\n    padding: 0 25px;\n`\n","import { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport SignalList from '../components/SignalList'\nimport {\n  changeSignalListVisibility,\n  fetchRadarSignals,\n  changeSignalCreateVisibility,\n  archiveSignal\n} from '../actions/signals'\n\nexport default connect(\n  (state) => {\n        const { loading, errors, signals: signalData, radarSettings: { canEditRadar, group } } = state\n        return {\n            loading,\n            errors,\n            signalData,\n            groupId: group !== null && typeof group === 'object' ? group.id : group,\n            canArchiveSignals: canEditRadar\n        }\n    },\n    dispatch => ({\n        ...bindActionCreators({\n            changeSignalListVisibility,\n            changeSignalCreateVisibility,\n            fetchRadarSignals,\n            archiveSignal\n        }, dispatch)\n    })\n)(SignalList)\n","/* eslint-disable */\nimport React, { Component } from 'react'\nimport 'react-datepicker/dist/react-datepicker.css'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { PUBLIC_URL } from '../env'\nimport LinkIcon from '@material-ui/icons/Link';\nclass ShareRadarModal extends Component {\n  // handleClipboardClick = () => this.shareInput.focus()\n\n  render() {\n    const {\n      requestClose,\n      requestOpenPublicLink,\n      checkPublicLinkExsited,\n      publicLink,\n      changeRadarSharing,\n      changeRadarSharingExpiry,\n      enableUrlLogin,\n      urlLoginLink,\n      urlLoginExpire,\n      updateRadar,\n      group,\n      id,\n      isPublicShareUrlEnabled\n    } = this.props\n\n    const onClickOpenPublicLink = () => {\n      requestOpenPublicLink()\n    }\n\n    return (\n      <div>\n        <button onClick={requestClose} className='btn-close-modal'>\n            <i className='material-icons'>close</i>\n        </button>\n        <div className={'modal-form-sections'}>\n            <div className='modal-form-section modal-form-header'>\n                <h2 className={'confirmation-modal-title'}>{requestTranslation('shareRadar')}</h2>\n                <p className='mt-4'>\n                  {isPublicShareUrlEnabled ? requestTranslation('shareRadarFromUsrMngmt'): requestTranslation('shareRadarWithoutPublicLink')}\n                </p>\n                {checkPublicLinkExsited \n                  && publicLink \n                  && isPublicShareUrlEnabled \n                  && \n                    <div className='mt-4' style={{display: 'flex'}}>\n                      <LinkIcon style={{transform: 'rotate(310deg)', borderRadius: '20px'}}>\n                      </LinkIcon>\n                      <p style={{ paddingLeft:'8px'}}>{requestTranslation('checkPublicLinkAlreadyExisted')}\n                      </p>\n                    </div>}\n            </div>\n            <div className='modal-form-section justify-content-end d-flex'>\n                <button\n                  onClick={requestClose}\n                  className='btn btn-lg btn-plain-gray'\n                >\n                    {requestTranslation('cancel')}\n                </button>\n                {isPublicShareUrlEnabled &&\n                <div style={{ marginRight: \"20px\" }}>\n                  <a\n                    onClick={() => onClickOpenPublicLink()}\n                    className=\"btn btn-lg btn-primary\"\n                  >\n                    {checkPublicLinkExsited && publicLink ? requestTranslation(\"openPublicLink\") : requestTranslation(\"createPublicLink\")} \n                  </a>\n                </div>\n                }\n                <a\n                    href={`${PUBLIC_URL}/radarusers?gid=${group.id}&invite=${id}`}\n                    className='btn btn-lg btn-primary'\n                >\n                    {requestTranslation('goToManagement')}\n                </a>\n            </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ShareRadarModal\n","import { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport ShareRadarModal from '../components/ShareRadarModal'\nimport { changeRadarSharing, changeRadarSharingExpiry, updateRadar } from '../actions/radarSettings'\n\n\nexport default connect(\n    state => {\n        const {\n            loading,\n            errors,\n            radarSettings: {\n                enableUrlLogin,\n                urlLoginExpire,\n                urlLoginLink,\n                group,\n                id\n            }\n        } = state\n\n        return {\n            loading,\n            errors,\n            enableUrlLogin,\n            urlLoginExpire,\n            urlLoginLink,\n            group,\n            id\n        }\n    },\n    dispatch => bindActionCreators({\n        changeRadarSharing,\n        changeRadarSharingExpiry,\n        updateRadar\n    }, dispatch)\n)(ShareRadarModal)\n","import React, { useState } from 'react'\nimport { Modal, modalStyles } from '@sangre-fp/ui'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport styles from './PublicLink.module.css'\nimport RefreshIcon from '@material-ui/icons/Refresh';\nconst PublicLink = ({ isModalOpen, onRequestClose, publicURL, openConfirmationModal, openDeleteConfirmationModal}) => {\n  const [shareInput, setShareInput] = useState(\"\");\n  const [linkCopied, setLinkCopied] = useState(false);\n  const onRequestCloseModal = () => {\n    onRequestClose();\n    setLinkCopied(false)\n  }\n  return (\n    <>\n      <Modal\n        onRequestClose={onRequestCloseModal}\n        isOpen={isModalOpen}\n        style={modalStyles}\n        ariaHideApp={false}\n        className={styles.ReactModal__Content}\n      >\n        <div className=\"modal-form-sections\">\n          <div className=\"modal-form-section modal-form-header\">\n            <h2 className={styles.Modal__Title}>\n              {requestTranslation(\"publicLink\")}\n            </h2>\n            <p className=\"mt-4\">{requestTranslation(\"publicLinkNote\")}</p>\n          </div>\n          <div className=\"modal-form-section\" style={{marginTop: '33px', paddingTop: 0}}>\n            <div className=\"font-weight-bold\">\n              {requestTranslation(\"publicLinkURL\")}\n            </div>\n            <div className=\"d-flex mt-2 align-items-center\">\n              <input\n                className=\"form-control w-75\"\n                value={publicURL}\n                readOnly\n                onFocus={(e) => e.target.select()}\n                type=\"text\"\n                ref={(el) => {\n                  setShareInput(el);\n                }}\n              />\n                <CopyToClipboard text={publicURL} onCopy={\n                  () => {\n                    shareInput.focus();\n                    setLinkCopied(true)\n                  }} >\n                  <button\n                    className=\"btn btn-outline-secondary ml-3 mr-3\"\n                    style={{ height: \"35px\", flexShrink: 0 }}\n                  >\n                    {requestTranslation(\"copyToClipboard\")}\n                  </button>\n                </CopyToClipboard>\n            </div>\n            {linkCopied && <h5 style={{display: 'flex', justifyContent: 'flex-end', marginRight: '64px', color: '#006998' }}>{requestTranslation(\"publicLinkCopied\")}</h5>}\n            <div className=\"d-flex mt-3 align-items-center\">\n              <button\n                // disabled={!checked}\n                // className=\"btn btn-outline-secondary mr-3\"\n                className={styles.RegenerateBtn}\n                onClick={openConfirmationModal}\n                style={{color: '#006998'}}\n              >\n                <RefreshIcon />\n                {requestTranslation(\"regeneratePublicLink\")}\n              </button>\n            </div>\n            <div className=\"d-flex mt-4 align-items-center\">\n              {requestTranslation(\"regeneratePublicLinkNote\")}\n            </div>\n          </div>\n          <div className=\"modal-form-section modal-form-actions d-flex justify-content-between\">\n            <button\n              className=\"btn btn-lg btn-plain-gray pl-0\"\n              onClick={openDeleteConfirmationModal}\n            >\n              {requestTranslation(\"deletePublicLinkBtn\")}\n            </button>\n            <div className={styles.SavePublicLink__Container}>\n              <button\n                className={\"btn btn-lg btn-plain-gray\"}\n                onClick={onRequestCloseModal}\n              >\n                {requestTranslation(\"cancel\")}\n              </button>\n              <button\n                className={\"btn btn-lg btn-primary\"}\n                onClick={onRequestCloseModal}\n              >\n                {requestTranslation(\"save\")}\n              </button>\n            </div>\n          </div>\n        </div>\n      </Modal>\n    </>\n  );\n};\n\nexport default PublicLink;\n","import React from \"react\";\nimport { Modal, paddingModalStyles } from '@sangre-fp/ui'\nimport { requestTranslation } from '@sangre-fp/i18n'\n\nconst ConfirmationModal = ({\n  regeneratePublicLink,\n  confirmationModal,\n  confirmationModalClose,\n}) => {\n  return (\n    <Modal\n      isOpen={confirmationModal}\n      contentLabel=\"radar-modal\"\n      ariaHideApp={false}\n      style={paddingModalStyles}\n    >\n      <div className=\"confirmation-modal-content pt-4 pb-4\">\n        <h3 className=\"confirmation-modal-title\">\n          {requestTranslation(\"sharePublicLinkConfirmation\")}\n        </h3>\n        <p style={{textAlign: 'center'}}>{requestTranslation(\"sharePublicLinkConfirmationNote\")}</p>\n        <div className=\"confirmation-modal-actions\">\n          <button\n            onClick={confirmationModalClose}\n            className=\"btn btn-lg btn-plain-gray\"\n          >\n            {requestTranslation(\"cancel\").toUpperCase()}\n          </button>\n          <button\n            className=\"btn btn-lg btn-primary\"\n            onClick={regeneratePublicLink}\n          >\n            {requestTranslation(\"regeneratePublicLink\").toUpperCase()}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default ConfirmationModal;\n","import React from \"react\";\nimport { Modal, paddingModalStyles } from '@sangre-fp/ui'\nimport { requestTranslation } from '@sangre-fp/i18n'\n\nconst DeleteConfirmationModal = ({\n  deletePublicLink,\n  deleteConfirmationModal,\n  deleteConfirmationModalClose,\n}) => {\n  return (\n    <Modal\n      isOpen={deleteConfirmationModal}\n      contentLabel=\"radar-modal\"\n      ariaHideApp={false}\n      style={paddingModalStyles}\n    >\n      <div className=\"confirmation-modal-content pt-4 pb-4\">\n        <h3 className=\"confirmation-modal-title\">\n          {requestTranslation(\"deletePublicLinkConfirmation\")}\n        </h3>\n        <p style={{textAlign: 'center', marginLeft: '110px', marginRight: '117px'}}>{requestTranslation(\"deletePublicLinkConfirmationNote\")}</p>\n        <div className=\"confirmation-modal-actions\">\n          <button\n            onClick={deleteConfirmationModalClose}\n            className=\"btn btn-lg btn-plain-gray\"\n          >\n            {requestTranslation(\"cancel\").toUpperCase()}\n          </button>\n          <button\n            className=\"btn btn-lg btn-primary\"\n            onClick={deletePublicLink}\n          >\n            {requestTranslation(\"deletePublicLink\").toUpperCase()}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default DeleteConfirmationModal;\n","import React from \"react\";\nimport { Modal, paddingModalStyles } from '@sangre-fp/ui'\nimport { requestTranslation } from '@sangre-fp/i18n'\n\nconst SharedLinkModalAfterDelete = ({\n  SharedLinkModalAfterDelete,\n  SharedLinkModalAfterDeleteClose,\n  RadarTitle\n}) => {\n  return (\n    <Modal\n      isOpen={SharedLinkModalAfterDelete}\n      contentLabel=\"radar-modal\"\n      ariaHideApp={false}\n      style={paddingModalStyles}\n    >\n      <div className=\"confirmation-modal-content pt-4 pb-4\">\n        <h3 className=\"confirmation-modal-title\">\n          {requestTranslation(\"sharedLinkDeletedNote\")}\n        </h3>\n        <p style={{textAlign: 'center', marginLeft: '110px', marginRight: '117px'}}>{RadarTitle}</p>\n        <div className=\"confirmation-modal-actions\">\n          <button\n            onClick={SharedLinkModalAfterDeleteClose}\n            className=\"btn btn-lg btn-primary\"\n          >\n            {requestTranslation(\"ok\").toUpperCase()}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default SharedLinkModalAfterDelete;\n","import React, {PureComponent} from 'react'\nimport styled from 'styled-components'\nimport _ from 'lodash'\nimport {paddingModalStyles, modalStyles} from '@sangre-fp/ui'\nimport drupalApi from '@sangre-fp/connectors/drupal-api'\nimport {PUBLIC_URL} from '../env'\nimport {Modal, PopupContainer} from '@sangre-fp/ui'\nimport {requestTranslation} from '@sangre-fp/i18n'\nimport {\n    PAGE_BASIC_SETTINGS,\n    PAGE_CONCLUSIONS,\n    PAGE_HEADER_AND_LANGUAGE,\n    PAGE_USER_OPTIONS\n} from './CreateRadarForm'\nimport ShareRadarModal from '../containers/ShareRadarModalContainer'\nimport PublicLink from './PublicLink/PublicLink' \nimport ConfirmationModal from './ConfirmationModal/ConfirmationModal'\nimport DeleteConfirmationModal from './DeleteConfirmationModal/DeleteConfirmationModal'\nimport SharedLinkModalAfterDelete from './SharedLinkModalAfterDelete/SharedLinkModalAfterDelete'\n\n\nclass SideNav extends PureComponent {\n    state = {\n        deletingModalOpen: false,\n        sharingModalOpen: false,\n        clonedModalOpen: false,\n        generatingModalOpen: false,\n        publicLinkModal: false,\n        confirmationModal: false,\n        deleteConfirmationModal: false,\n        publicSharedLink: null,\n        publicSharedUserInfo: [],\n        radarShareId: null,\n        publicSharedLinkExsited: false,\n        SharedLinkModalAfterDelete: false,\n        radarTitle: '',\n        isPublicShareUrlEnabled: false\n    }\n\n    async componentDidMount() {\n        const searchParams = new URLSearchParams(document.location.search)\n        const shareQuery = Number(searchParams.get('share'))\n        const node = Number(searchParams.get('node'))\n\n        if (shareQuery ==='1' || shareQuery === 1) {\n            await drupalApi.getRadarPublicShare(node).then((data) => {\n                this.setState({\n                    publicSharedLink: data.url,\n                    publicSharedLinkExsited: true\n    \n                })\n            })\n\n            this.setState({ publicLinkModal: true })\n        }\n    }\n\n    componentDidUpdate(nextProps, nextState) {\n        const {radarSettings: {radarName}, groupId} = this.props\n        this.setState({\n            groupId: groupId,\n            radarTitle: radarName\n        })\n\n        this.props.radarSettings.groups.map(g => {\n            if (String(g?.id) === String(this.props.radarSettings?.group.id) && Number(g?.publicShareUrlEnabled) === 1) {\n                this.setState({\n                    isPublicShareUrlEnabled: true\n                })\n            }\n        })\n      }\n      \n    toggleOpenEditMenu = () => {\n        const {toggleEditMenuVisiblity, editMenuOpen} = this.props\n\n        toggleEditMenuVisiblity(!editMenuOpen)\n    }\n\n    handleCloseClick = () => {\n        const {\n            editSectorsPageOpen,\n            sectorPageHandler,\n            editTimeRangesPageOpen,\n            timerangePageHandler\n        } = this.props\n\n        if (editSectorsPageOpen) {\n            sectorPageHandler()\n        }\n\n        if (editTimeRangesPageOpen) {\n            timerangePageHandler()\n        }\n    }\n\n    clonedRadarCallback = newRadarHref => this.setState({clonedModalOpen: newRadarHref})\n\n    closeRadar = (redirect = true) => {\n        const {getReturnUrl} = this.props\n\n        if (redirect) {\n            document.href = getReturnUrl()\n        }\n        return getReturnUrl()\n    }\n\n    closePublicLink = () => {\n        this.setState({ \n            publicLinkModal: false,\n            sharingModalOpen: true\n        })\n      }\n\n    openPublicLinkModal = async () => {\n        this.setState({ sharingModalOpen: false })\n        this.setState({ publicLinkModal: true })\n        const searchParams = new URLSearchParams(document.location.search)\n        const node = Number(searchParams.get('node'))\n\n        // create a shared link\n        if(this.state.publicSharedLink === null) {\n            await drupalApi.createOrReplaceRadarPublicShare({radarId: node}).then((data) => {\n                console.log('data', data)\n                this.setState({\n                    publicSharedLink: data?.url,\n                    publicSharedLinkExsited: true\n                })\n            })\n        }\n        else {\n            await drupalApi.getRadarPublicShare(node).then((data) => {\n                this.setState({\n                    publicSharedLink: data.url,\n                    publicSharedLinkExsited: true\n    \n                })\n            })\n        }\n    }\n\n    onRegeneratePublicLink = async () => {\n        const searchParams = new URLSearchParams(document.location.search)\n        const node = Number(searchParams.get('node'))\n        await drupalApi.regenerateRadarPublicShare(node).then(data => {\n            this.setState({\n                publicSharedLink: data.url,\n                confirmationModal: false\n            })\n        })\n    }\n\n    openConfirmationModal = () => {\n        this.setState({\n            confirmationModal: true,\n            publicLinkModal: false\n        })\n    }\n\n    closeConfirmationModal= () => {\n        this.setState({\n            confirmationModal: false,\n            publicLinkModal: true\n        })\n    }\n   \n    openDeleteConfirmationModal = () => {\n        this.setState({\n            deleteConfirmationModal: true, \n            publicLinkModal: false\n\n        })\n    }\n\n    closeDeleteConfirmationModal= () => {\n        this.setState({\n            deleteConfirmationModal: false,\n            publicLinkModal: true\n        })\n    }\n\n    onDeletePublicLink = async () => {\n        const searchParams = new URLSearchParams(document.location.search)\n        const node = Number(searchParams.get('node'))\n\n        await drupalApi.removeRadarPublicShare(node).then((data) => {\n            this.setState({\n                publicSharedLink: null,\n                deleteConfirmationModal: false,\n                publicSharedLinkExsited: false,\n                SharedLinkModalAfterDelete: true\n            })\n        })\n        \n    }\n    onCloseSharedLinkModalAfterDelete = () => {\n        this.setState({\n            SharedLinkModalAfterDelete: false\n        })\n    }\n\n    onShareRadarClick = async() => {\n        const searchParams = new URLSearchParams(document.location.search)\n        const node = Number(searchParams.get('node'))\n  \n        //get shared link \n        await drupalApi.getRadarPublicShare(node).then((data) => {\n            this.setState({\n                publicSharedLink: data.url\n            })\n        })\n\n        if(this.state.publicSharedLink !== null) {\n            this.setState({\n                publicSharedLinkExsited: true\n            })\n            \n        }\n        this.setState({sharingModalOpen: true})\n\n    }\n    \n    render() {\n        const params = new URLSearchParams(window.location.search)\n        let returnId = params.get('ret_id')\n        if (returnId) {\n            returnId = returnId.replace(/[^a-f0-9-]/, '')\n        }\n        const {deletingModalOpen, clonedModalOpen, sharingModalOpen, generatingModalOpen, publicLinkModal, confirmationModal, deleteConfirmationModal, radarShareId } = this.state\n        const {\n            changeAddRadarFormVisibility,\n            sectorPageHandler,\n            timerangePageHandler,\n            deleteRadar,\n            changeAddPhenomenaVisibility,\n            editSectorsPageOpen,\n            id,\n            groupId,\n            addRadarFormOpen,\n            editPhenomenaVisible,\n            editMenuOpen,\n            toggleEditMenuVisiblity,\n            canEditRadar,\n            canDeleteRadar,\n            cloneRadar,\n            changeSignalListVisibility,\n            signalListVisible,\n            signalToolEnabled,\n            isVisitor,\n            canShareRadar,\n            collaborationToolsAllowed,\n            generatePowerpoint\n        } = this.props\n\n        const renderRadarEditor = !editSectorsPageOpen && !addRadarFormOpen && !editPhenomenaVisible && !signalListVisible && !isVisitor\n\n        return (\n            <PopupContainer onClose={toggleEditMenuVisiblity}>\n                {renderRadarEditor &&\n                <Container id='radar-nav-topright'>\n                    <div className='nav-item'>\n                        <a\n                            onClick={() => this.closeRadar()}\n                            href={this.closeRadar(false)}\n                            className='btn-icon-lg'\n                        >\n                            <span className='af-custom-close'/>\n                        </a>\n                    </div>\n                    {canEditRadar &&\n                    <div>\n                        <Edit\n                            className='nav-item'\n                            onClick={this.toggleOpenEditMenu}\n                        >\n                            <button\n                                className='btn-round btn-lg'\n                                onClick={this.toggleOpenEditMenu}\n                            >\n                                <span className='af-custom-edit'/>\n                                {editMenuOpen &&\n                                <EditMenu className='fp-dropdown-menu'>\n                                    <EditTriangle className='fp-dropdown-menu-arrow'/>\n                                    <div>\n                                        <EditMenuHeader\n                                            className='fp-dropdown-header'\n                                            style={{lineHeight: \"1.2rem\"}}\n                                        >\n                                            {requestTranslation('layoutHeader')}\n                                        </EditMenuHeader>\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={sectorPageHandler}\n                                        >\n                                            {requestTranslation('editSectors')}\n                                        </EditMenuItem>\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={timerangePageHandler}\n                                        >\n                                            {requestTranslation('editTimeranges')}\n                                        </EditMenuItem>\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={changeAddPhenomenaVisibility}\n                                        >\n                                            {requestTranslation('addPhenomena')}\n                                        </EditMenuItem>\n                                    </div>\n                                    <div>\n                                        <EditMenuHeader className='fp-dropdown-header'>\n                                            {requestTranslation('settingsHeader')}\n                                        </EditMenuHeader>\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={() => changeAddRadarFormVisibility(PAGE_BASIC_SETTINGS)}\n                                        >\n                                            {requestTranslation('editBasicSettings')}\n                                        </EditMenuItem>\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={() => changeAddRadarFormVisibility(PAGE_HEADER_AND_LANGUAGE)}\n                                        >\n                                            {requestTranslation('editTitle')}\n                                        </EditMenuItem>\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={() => changeAddRadarFormVisibility(PAGE_CONCLUSIONS)}\n                                        >\n                                            {requestTranslation('editConclusions')}\n                                        </EditMenuItem>\n                                    </div>\n                                    {collaborationToolsAllowed &&\n                                    <div>\n                                        <EditMenuHeader className='fp-dropdown-header'>\n                                            {requestTranslation('activateUsersHeader')}\n                                        </EditMenuHeader>\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={() => changeAddRadarFormVisibility(PAGE_USER_OPTIONS)}\n                                        >\n                                            {requestTranslation('activateUsers')}\n                                        </EditMenuItem>\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={() => window.location.replace(`${PUBLIC_URL}/send-message?map_id=${id}`)}\n                                        >\n                                            {requestTranslation('sendMessages')}\n                                        </EditMenuItem>\n                                    </div>\n                                    }\n                                    <div>\n                                        <EditMenuHeader className='fp-dropdown-header'>\n                                            {requestTranslation('managmentHeader')}\n                                        </EditMenuHeader>\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={() => this.setState({generatingModalOpen: true})}\n                                        >\n                                            {requestTranslation('pptxGenerateReport')}\n                                        </EditMenuItem>\n                                        \n                                        {\n                                            canShareRadar && <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={this.onShareRadarClick}\n                                        >\n                                            {requestTranslation('shareRadar')}\n                                        </EditMenuItem>\n                                        }\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={() => cloneRadar(this.clonedRadarCallback)}\n                                        >\n                                            {requestTranslation('cloneRadar')}\n                                        </EditMenuItem>\n                                        {canDeleteRadar &&\n                                        <EditMenuItem\n                                            className='fp-dropdown-item'\n                                            onClick={() =>\n                                                this.setState({deletingModalOpen: true})\n                                            }\n                                        >\n                                            {requestTranslation('deleteRadar')}\n                                        </EditMenuItem>\n                                        }\n\n                                    </div>\n                                </EditMenu>\n                                }\n                            </button>\n                        </Edit>\n                    </div>\n                    }\n                    <div className='nav-item'>\n                        <a href={`${PUBLIC_URL}/node/${id}/results` + (returnId ? ('?ret_id=' + returnId) : '')}\n                           onClick={() =>\n                               window.location.replace(`${PUBLIC_URL}/node/${id}/results` + (returnId ? ('?ret_id=' + returnId) : ''))\n                           }\n                           className='btn-round btn-lg'>\n                            <span className='af-custom-results'/>\n                        </a>\n                    </div>\n                    {signalToolEnabled &&\n                    <div className='nav-item'>\n                        <div className='btn-round btn-lg' onClick={() => changeSignalListVisibility()}>\n                            <span className='af-custom-signal-tool'/>\n                        </div>\n                    </div>\n                    }\n                </Container>\n                }\n                {editSectorsPageOpen &&\n                <CloseButton\n                    onClick={this.handleCloseClick}\n                    className='btn btn-lg btn-primary'\n                >\n                    {requestTranslation('close')}\n                </CloseButton>\n                }\n                <Modal\n                    isOpen={generatingModalOpen}\n                    contentLabel='generate powerpoint'\n                    style={paddingModalStyles}\n                    className='paddedModal'\n                    ariaHideApp={false}\n                >\n                    <div className={'confirmation-modal-content'}>\n                        <h3>\n                            {requestTranslation('download')}\n                        </h3>\n                        <p>{requestTranslation('downloadPPTXDescription')}</p>\n                        <div className={'d-flex align-items-center justify-content-end'}>\n                            <button className='btn btn-lg btn-plain-gray'\n                                    onClick={() => this.setState({generatingModalOpen: false})}>\n                                {requestTranslation('cancel')}\n                            </button>\n                            <button className='btn btn-lg btn-primary'\n                                    onClick={() => {\n                                        this.setState({generatingModalOpen: false})\n                                        generatePowerpoint(id, groupId)\n                                    }}>\n                                {requestTranslation('download')}\n                            </button>\n                        </div>\n                    </div>\n                </Modal>\n                <Modal\n                    isOpen={deletingModalOpen}\n                    contentLabel='delete sanity check'\n                    style={paddingModalStyles}\n                    className={'paddedModal'}\n                    ariaHideApp={false}\n                >\n                    <div className={'confirmation-modal-content'}>\n                        <h3 className={'confirmation-modal-title'}>\n                            {requestTranslation('deleteDoubleCheck')}\n                        </h3>\n                        <div className={'confirmation-modal-actions'}>\n                            <button className='btn btn-lg btn-plain-gray'\n                                    onClick={() => this.setState({deletingModalOpen: false})}>\n                                {requestTranslation('cancel')}\n                            </button>\n                            <button className='btn btn-lg btn-primary'\n                                    onClick={() => {\n                                        this.setState({deletingModalOpen: false})\n                                        deleteRadar()\n                                    }}>\n                                {requestTranslation('delete')}\n                            </button>\n                        </div>\n                    </div>\n                </Modal>\n                {canShareRadar &&\n                <Modal\n                    isOpen={!!sharingModalOpen}\n                    contentLabel='share radar'\n                    style={modalStyles}\n                    ariaHideApp={false}\n                >\n                    <ShareRadarModal \n                        requestClose={() => this.setState({sharingModalOpen: false})} \n                        requestOpenPublicLink={this.openPublicLinkModal} \n                        checkPublicLinkExsited={this.state.publicSharedLinkExsited} \n                        publicLink={this.state.publicSharedLink} \n                        isPublicShareUrlEnabled ={this.state.isPublicShareUrlEnabled}\n                    />\n                </Modal>\n                }\n                <Modal\n                    isOpen={!!clonedModalOpen}\n                    contentLabel='cloned radar'\n                    style={paddingModalStyles}\n                    className={'paddedModal'}\n                    ariaHideApp={false}\n                >\n                    <div className={'confirmation-modal-content'}>\n                        <h3 className={'confirmation-modal-title'}>\n                            {requestTranslation('clonedRadarSuccess')}\n                        </h3>\n                        <p className='text-center'>\n                            {requestTranslation('clonedRadarSuccessDescription')}\n                        </p>\n                        <div className={'confirmation-modal-actions'}>\n                            <a className='btn btn-lg btn-primary' href={clonedModalOpen}>\n                                {requestTranslation('clonedGoToCreated')}\n                            </a>\n                            <button className='btn btn-lg btn-plain-gray'\n                                    onClick={() => this.setState({clonedModalOpen: false})}>\n                                {requestTranslation('clonedContinueWithCurrent')}\n                            </button>\n                        </div>\n                    </div>\n                </Modal>\n                <PublicLink \n                    isModalOpen={publicLinkModal} \n                    onRequestClose={this.closePublicLink} \n                    publicURL={this.state.publicSharedLink || 'Loading...'} \n                    openConfirmationModal={this.openConfirmationModal} \n                    openDeleteConfirmationModal={this.openDeleteConfirmationModal}\n                />\n                <ConfirmationModal \n                    confirmationModal={confirmationModal}\n                    confirmationModalClose={this.closeConfirmationModal}\n                    regeneratePublicLink={() => {this.onRegeneratePublicLink()}}\n                />\n                <DeleteConfirmationModal \n                    deleteConfirmationModal={deleteConfirmationModal}\n                    deleteConfirmationModalClose={this.closeDeleteConfirmationModal}\n                    deletePublicLink={() => this.onDeletePublicLink()}\n                />\n                <SharedLinkModalAfterDelete \n                    SharedLinkModalAfterDelete={this.state.SharedLinkModalAfterDelete}\n                    SharedLinkModalAfterDeleteClose={this.onCloseSharedLinkModalAfterDelete}\n                    RadarTitle={this.state.radarTitle}\n                />\n            </PopupContainer>\n        )\n    }\n}\n\nconst CloseButton = styled.div`\n    position: absolute;\n    right: 30px;\n    bottom: 30px;\n    color: white;\n`\n\nconst Container = styled.div`\n    position: absolute;\n    top: 25px;\n    right: 25px;\n`\n\nconst EditTriangle = styled.span`\n    background-color: white;\n    position: absolute;\n    transform: rotate(45deg);\n    right: -18px;\n    top: 63px;\n    width: 40px;\n    height: 40px;\n`\n\nconst EditMenu = styled.div`\n    width: 280px;\n    display: flex;\n    position: absolute;\n    background-color: white;\n    flex-direction: column;\n    box-sizing: border-box;\n    left: -320px;\n    top: -60px;\n`\n\nconst EditMenuItem = styled.div`\n    background: transparent;\n    font-size: 16px;\n    padding: 15px 25px;\n    color: black;\n    font-weight: 500;\n    box-sizing: border-box;\n    transition: all 0.4s ease;\n    &:hover {\n        cursor: pointer;\n        background-color: rgba(0, 0, 0, 0.1);\n        transition: all 0.4s ease;\n    }\n`\n\nconst EditMenuHeader = styled.div`\n    width: 100%;\n    background: rgb(231, 231, 232);\n    display: flex;\n    padding: 15px 25px;\n    align-items: center;\n    color: black;\n    font-weight: 700;\n    font-size: 18px;\n    box-sizing: border-box;\n`\n\nconst Edit = styled.div`\n    position: relative;\n    min-width: 20px;\n    min-height: 20px;\n    border-radius: 50%;\n    background-color: #006998;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    transition: all 0.4s ease;\n    &:hover {\n        cursor: pointer;\n        background-color: #1A9AFC;\n        transition: all 0.4s ease;\n    }\n`\n\nexport default SideNav\n","import { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport SideNav from '../components/SideNav'\nimport {\n    changeAddRadarFormVisibility,\n    sectorPageHandler,\n    timerangePageHandler,\n    changeAddPhenomenaVisibility,\n    toggleEditMenuVisiblity\n} from '../actions/radarSettings'\nimport { changeSignalListVisibility } from '../actions/signals'\nimport {\n    deleteRadar,\n    cloneRadar,\n    generatePowerpoint\n} from '../actions/radarData'\nimport { isCollaborationToolsAllowed } from '../selectors'\nimport { PUBLIC_URL } from '../env'\n\nexport default connect(\n    (state, props) => {\n        const {\n            radarSettings: {\n                signalToolEnabled,\n                addRadarFormOpen,\n                editMenuOpen,\n                editPhenomenaVisible,\n                addPhenomenaVisible,\n                editSectorsPageOpen,\n                id,\n                group,\n                groups,\n                canDeleteRadar,\n                canEditRadar,\n                isVisitor,\n                canShareRadar,\n                editTimeRangesPageOpen,\n                radarName\n            },\n            signals: {\n                signalListVisible\n            }\n        } = state\n\n        console.log('state', state)\n        const collaborationToolsAllowed = group && groups ?\n            isCollaborationToolsAllowed(state)(group.id) : false\n\n        return {\n            signalToolEnabled,\n            addRadarFormOpen,\n            editPhenomenaVisible,\n            signalListVisible,\n            addPhenomenaVisible,\n            editSectorsPageOpen,\n            id,\n            groupId: group.id,\n            collaborationToolsAllowed,\n            canDeleteRadar,\n            isVisitor,\n            canShareRadar,\n            canEditRadar,\n            getReturnUrl: () => props.returnUri || PUBLIC_URL || '/',\n            editMenuOpen,\n            editTimeRangesPageOpen,\n            radarName\n        }\n    },\n    dispatch => bindActionCreators({\n        changeSignalListVisibility,\n        deleteRadar,\n        sectorPageHandler,\n        changeAddRadarFormVisibility,\n        timerangePageHandler,\n        changeAddPhenomenaVisibility,\n        cloneRadar,\n        toggleEditMenuVisiblity,\n        generatePowerpoint\n    }, dispatch)\n)(SideNav)\n","import { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { ErrorModal } from '@sangre-fp/ui'\nimport { clearAllErrors } from '../actions/radarSettings'\n\nexport default connect(\n    state => {\n        const {\n            errors\n        } = state\n\n        return {\n            errors\n        }\n    },\n    dispatch => bindActionCreators({\n        onClose: clearAllErrors\n    }, dispatch)\n)(ErrorModal)\n","import React, { PureComponent } from 'react'\nimport styled from 'styled-components'\nimport ReactQuill from 'react-quill'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { formats } from '../quill'\nimport { customQuillModules } from '../config'\n\nexport default class SectorEditorForm extends PureComponent {\n    state = {\n        titleInput: this.props.sector ? this.props.sector.title : '',\n        descriptionInput: this.props.sector ? (this.props.sector.notes || '') : ''\n    }\n\n    handleTitleChange = ({ target }) => this.setState({ titleInput: target.value })\n    handleDescriptionChange = value => this.setState({ descriptionInput: value })\n\n    render() {\n        const { titleInput, descriptionInput } = this.state\n        const { onClose, updateSector, sector } = this.props\n\n        return (\n            <Container>\n                <Title>\n                    {requestTranslation('editSectorTitle')}\n                </Title>\n                <SubTitle>\n                    {requestTranslation('sectorTitle')}\n                </SubTitle>\n                <Input\n                    type='text'\n                    value={titleInput || ''}\n                    onChange={this.handleTitleChange}\n                />\n                <SubTitle>\n                    {requestTranslation('sectorDescription')}\n                </SubTitle>\n                <ReactQuill\n                    className='fp-wysiwyg'\n                    style={{\n                        height: '250px',\n                        paddingBottom: '42px'\n                    }}\n                    value={descriptionInput}\n                    onChange={this.handleDescriptionChange}\n                    modules={customQuillModules}\n                    formats={formats}\n                />\n                <ButtonsContainer>\n                    <button className='btn btn-lg btn-plain-gray' onClick={onClose}>\n                        {requestTranslation('cancel')}\n                    </button>\n                    <button\n                        className='btn btn-lg btn-primary'\n                        onClick={() =>\n                            updateSector(sector, titleInput, descriptionInput, onClose)\n                        }\n                    >\n                        {requestTranslation('save')}\n                    </button>\n                </ButtonsContainer>\n            </Container>\n        )\n    }\n}\n\nconst Container = styled.div`\n    padding: 30px 50px;\n    z-index: 1000;\n`\n\nconst Title = styled.h2`\n    color: black;\n    margin: 0;\n`\n\nconst SubTitle = styled.h3`\n    color: black;\n    margin-top: 30px;\n    margin-bottom: 10px;\n`\n\nconst Input = styled.input`\n    width: 300px;\n    background: transparent;\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    margin-right: 15px;\n    font-size: 16px;\n    padding-left: 20px;\n    height: 45px;\n    border-radius: 1px;\n    box-sizing: border-box;\n`\n\nconst ButtonsContainer = styled.div`\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 30px;\n`\n\n","import React, { PureComponent } from 'react'\nimport { PopupContainer } from '@sangre-fp/ui'\nimport styled from 'styled-components'\nimport { requestTranslation } from '@sangre-fp/i18n'\n\nclass EditSectorMenu extends PureComponent {\n    render() {\n        const {\n            x,\n            y,\n            timeranges,\n            addSector,\n            onClose,\n            sector,\n            deleteSector,\n            handleEditSectorForm\n        } = this.props\n\n        return (\n            <PopupContainer onClose={onClose}>\n                <EditMenu\n                    className='fp-dropdown-menu'\n                    style={{\n                        left: x,\n                        top: y\n                    }}\n                >\n                    {!!timeranges[0].sectors.length &&\n                        <EditMenuItem\n                            className='fp-dropdown-item'\n                            onClick={handleEditSectorForm}\n                        >\n                            {requestTranslation('editName')}\n                        </EditMenuItem>\n                    }\n                    <EditMenuItem\n                        className='fp-dropdown-item'\n                        onClick={() => {\n                            addSector(0, sector)\n                        }}\n                    >\n                        {requestTranslation('addSectorBefore')}\n                    </EditMenuItem>\n                    <EditMenuItem\n                        className='fp-dropdown-item'\n                        onClick={() => addSector(1, sector)}\n                    >\n                        {requestTranslation('addSectorAfter')}\n                    </EditMenuItem>\n                    {timeranges[0].sectors.length > 1 &&\n                        <EditMenuItem\n                            className='fp-dropdown-item'\n                            onClick={() => deleteSector(sector)}\n                        >\n                            {requestTranslation('deleteSector')}\n                        </EditMenuItem>\n                    }\n                </EditMenu>\n            </PopupContainer>\n        )\n    }\n}\n\nconst EditMenu = styled.div`\n    background: white;\n    position: absolute;\n    opacity: 1;\n    width: 230px;\n    display: flex;\n    flex-direction: column;\n    transform: translateX(-50%);\n`\n\nconst EditMenuItem = styled.div`\n    padding: 15px 20px;\n    font-size: 16px;\n    font-weight: 500;\n    color: black;\n    box-sizing: border-box;\n    z-index: 10;\n    &:hover {\n        cursor: pointer;\n        background-color: rgba(0, 0, 0, 0.1);\n        transition: all 0.4s ease;\n    }\n`\n\nexport default EditSectorMenu\n","import React, { PureComponent } from 'react'\nimport styled from 'styled-components'\nimport * as d3 from 'd3'\nimport _ from 'lodash'\nimport classNames from 'classnames'\nimport Text from 'react-svg-text'\nimport { toast } from 'react-toastify'\nimport SockJsClient from 'react-stomp'\nimport {\n    AllPhenomena,\n    CreateRadarForm,\n    AddPhenomenaSandbox,\n    ConfirmDialog,\n    SignalList,\n    SideNav,\n    ErrorModal,\n    TimeRangeEditorForm,\n    Filters\n} from '../containers'\nimport { Modal, SVGIcon, Loading } from '@sangre-fp/ui'\nimport { getCoordsFromAngleAndRadius, detectLeftButton } from '../helpers'\nimport { PUBLIC_URL, RADAR_DATA_WEBSOCKET_URL } from '../env'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { PhenomenonEditForm } from '@sangre-fp/content-editor'\nimport { PhenomenonLoader } from '@sangre-fp/hooks'\nimport SectorEditorForm from './SectorEditorForm'\nimport EditSectorMenu from './EditSectorMenu'\nimport Phenomenon from './Phenomenon'\nimport { modalStyles, paddingModalStyles } from '@sangre-fp/ui'\nimport { centerRadiusPercentage, getWebSocketHeaders, timerangeColors, radarBorderWidth } from '../config'\n\nclass RadarPage extends PureComponent {\n    constructor(props) {\n        super(props)\n        const { containerWidth, containerHeight, svgDimensions } = props\n        const containerSize = Math.min(containerWidth, containerHeight)\n        const zoomExtent = (containerSize / svgDimensions) * 0.80\n        this.zoom = d3.zoom().scaleExtent([(containerSize / svgDimensions) * 0.50, zoomExtent + 4]).on('zoom', this.zoomed)\n        this.state = {\n            isIconImgLoading: true,\n            zoomExtent,\n            sectorDescriptionModal: null,\n            deleteRadarPhenomenonOpen: false,\n            editSector: null,\n            editMenuPosition: null,\n            zoomTransform: {\n                x: 0,\n                y: 0,\n                k: zoomExtent\n            },\n            mouseCoords: {\n                x: 0,\n                y: 0,\n                angle: 0,\n                radius: 0,\n                timeRange: null,\n                sector: null,\n                time: null\n            },\n            phenomenaDragged: false\n        }\n    }\n\n    componentDidMount() {\n        const {\n            fetchRadar,\n            getUserGroups,\n            radarSettings: {\n                existingRadarPage\n            }\n        } = this.props\n\n\n        getUserGroups()\n            .then(() => {\n                    if (existingRadarPage) {\n                        fetchRadar()\n                    }\n                }\n            )\n\n        this.attachEvents()\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.shouldRadarRender() && !this.shouldRadarRender(prevProps)) {\n            this.attachEvents()\n        }\n    }\n\n    zoomed = () => {\n        const { phenomenaDragged } = this.state\n\n        if (!phenomenaDragged && this.isZoomable()) {\n            this.setState({ zoomTransform: d3.event.transform })\n        }\n    }\n\n    attachEvents() {\n        const { zoomTransform: { k } } = this.state\n        const svg = d3.select(this.svg)\n\n        svg\n            .on('touchstart', this.handleMouseAction)\n            .on('touchmove', this.handleMouseAction)\n            .on('mousemove', this.handleMouseAction)\n            .on('touchend', this.onPhenomenaDragEnd)\n            .on('click', () => this.props.toggleEditMenuVisiblity(false))\n            .call(this.zoom)\n\n        this.zoom.scaleBy(svg, k)\n    }\n\n    handleResultsRedirect = () => {\n        const { radarSettings: { id, editSectorsPageOpen, addRadarFormOpen, editPhenomenaVisible, signalListVisible, isVisitor } } = this.props\n        // const renderRadarEditor = !editSectorsPageOpen && !addRadarFormOpen && !editPhenomenaVisible && !signalListVisible && !isVisitor\n        window.location.href = `${PUBLIC_URL}/node/${id}/results`\n    }\n\n    isZoomable = () => !this.isEditorPageOpen()\n\n    hideSectorMenuEdit = () => this.setState({ editMenuPosition: null })\n\n    showSectorEditMenu = ({ pageX, pageY }, sector) => this.setState({\n        editMenuPosition: {\n            x: pageX,\n            y: pageY,\n            sector\n        }\n    })\n    handleEditPhenomenonFormClose = () => this.props.changeEditPhenomenaVisibility()\n\n    renderTimelines() {\n        const { timeRanges, radius } = this.props\n\n        return (\n            <g className={'time-ranges'}>\n                <circle r={timeRanges[timeRanges.length - 1].outerRadius + radarBorderWidth} fill={'#F5F5F5'} />\n                {timeRanges.slice().reverse().map(({ outerRadius }, index) => {\n                    const isLast = index === 0\n\n                    return (\n                        <g key={index}>\n                            <circle\n                                r={outerRadius}\n                                fill={timerangeColors(index)}\n                                strokeWidth={isLast ? 2 : 0}\n                                stroke={'#979797'}\n                                strokeDasharray={4}\n                            />\n                        </g>\n                    )}\n                )}\n                {!timeRanges.length &&\n                    <circle r={radius} fill={timerangeColors(4)}/>\n                }\n            </g>\n        )\n    }\n\n    renderPhenomena() {\n        const {\n            radius,\n            timeRanges,\n            draggedPhenomenon\n        } = this.props\n\n        return (\n            <AllPhenomena\n                radius={radius}\n                timeRanges={timeRanges}\n                scaled={this.scaled}\n                zoomTransform={this.state.zoomTransform}\n                onPhenomenaDrag={this.onPhenomenaDrag}\n                draggedPhenomenon={draggedPhenomenon}\n                getPhenomenaDisplayProps={this.getPhenomenaDisplayProps}\n            />\n        )\n    }\n\n    renderSectors() {\n        const { timeRanges, radius } = this.props\n        const { mouseCoords: { sector } } = this.state\n        const selectedKey = sector ? sector.key : 0\n        const fontSize = this.scaled(8.5)\n        const { sectors: lastSectors } = _.last(timeRanges)\n\n        return (\n            <g className={'sectors'}>\n                {timeRanges.map(({ sectors }) => sectors.map(({ key, arc }) => (\n                    <path\n                        stroke={'transparent'}\n                        fill={selectedKey === key ? '#dededf' : 'transparent'}\n                        key={key}\n                        className={'sector'}\n                        d={arc}\n                    />\n                )))}\n\n                {lastSectors.map(({ id, key, title, startAngle, endAngle, notes }) => {\n                    const middleOfSectorAngle = ((startAngle + endAngle) / 2) || 0\n                    const offset = fontSize * 5\n                    const width = radius * 0.25\n\n                    const [x, y] = getCoordsFromAngleAndRadius(middleOfSectorAngle, radius + offset + radarBorderWidth)\n\n                    return (\n                        <g key={`sector-meta-${id}`}>\n                            <path\n                                key={key}\n                                stroke={'#909090'}\n                                fill={'#909090'}\n                                className={'sector'}\n                                strokeWidth='1'\n                                strokeDasharray={4}\n                                d={d3.radialLine()([[startAngle, 0], [startAngle, radius]])}\n                            />\n                            <Text\n                                x={x}\n                                y={y}\n                                verticalAnchor={'middle'}\n                                className={'sector-label noselect'}\n                                width={width}\n                                textAnchor='middle'\n                                style={{\n                                    fontSize: `${fontSize}px`\n                                }}\n                                onClick={() =>\n                                    this.setState({\n                                        sectorDescriptionModal: { notes, title }\n                                    })\n                                }\n                            >\n                                {title}\n                            </Text>\n                        </g>\n                    )\n                })}\n            </g>\n        )\n    }\n\n    renderLogo() {\n        const { timeRanges, radius, radarSettings: { radarImage }, radarLogoLinkDisabled } = this.props\n        const logoRadius = _.first(timeRanges)\n            ? _.first(timeRanges).radius\n            : radius * centerRadiusPercentage\n        const transform = `translate(${-logoRadius}, ${-logoRadius})`\n        \n        return (\n            <g>\n                {!radarImage ? (\n                    <circle\n                        className='radar-logo'\n                        onClick={!radarLogoLinkDisabled && this.handleResultsRedirect}\n                        r={logoRadius}\n                        fill={'#126995'}\n                        style={radarLogoLinkDisabled ? { cursor: 'default' } : null}\n                    />\n                ) : (\n                    <foreignObject\n                        className='radar-logo'\n                        onClick={!radarLogoLinkDisabled && this.handleResultsRedirect}\n                        width={logoRadius * 2}\n                        height={logoRadius * 2}\n                        transform={transform}\n                        style={radarLogoLinkDisabled ? { cursor: 'default' } : null}\n                    >\n                        <img\n                        \n                            alt='logo'\n                            src={radarImage}\n                            style={{\n                                width: logoRadius * 2,\n                                height: logoRadius * 2,\n                                borderRadius: '50%',\n                                objectFit: 'cover'\n                            }}\n                        />\n                    </foreignObject>\n                )}\n            </g>\n        )\n    }\n\n    getTimerangeLabelPath(radius) {\n        return `\n            M 0, 0\n            m -${radius}, 0\n            a ${radius},${radius} 0 1,0 ${(radius) * 2},0\n        `\n    }\n\n    renderTimelineTooltip() {\n        const { timelines, timeRanges, radarSettings: { timelineLabelFormat } } = this.props\n        const { scaled } = this\n        const fontSize = scaled(9)\n        const strokeWidth = scaled(4)\n        const tooltipHeight = scaled(16.5)\n\n        return (\n            <g className={'timeline'}>\n                {timeRanges.map((timeRange, index) => {\n                    const isLast = index === timeRanges.length - 1\n                    const tooltipY = timeRange.radius\n                    const {\n                        description,\n                        startYear,\n                        endYear,\n                        outerRadius,\n                        label,\n                        radius\n                    } = timeRange\n                    const line = d3.radialLine()([[Math.PI, radius + tooltipHeight], [Math.PI, outerRadius]])\n\n                    return (\n                        <g key={`tooltips-${index}`}>\n                            <path d={line} stroke={'#8d8e92'} strokeWidth={strokeWidth} />\n                            {(!timeRange.isPlaceholder) && (\n                                <g>\n                                    <g>\n                                        <path\n                                            d={this.getTimerangeLabelPath(tooltipY + tooltipHeight)}\n                                            id={`timerange-label-${index}`}\n                                            fill=\"transparent\"\n                                            style={{ pointerEvents: 'none' }}\n                                        />\n                                        <text\n                                            dy={-tooltipHeight / 4}\n                                            className={'hoverable timeline-label-text noselect'}\n                                            style={{ fontSize: `${fontSize}px` }}\n                                            onClick={() =>\n                                                this.setState({\n                                                    sectorDescriptionModal: {\n                                                    notes: description,\n                                                    title: timelineLabelFormat ? label : startYear\n                                                }}\n                                            )}\n                                        >\n                                            <textPath xlinkHref={`#timerange-label-${index}`} textAnchor=\"middle\" startOffset=\"50%\">\n                                                {timelineLabelFormat ? label : startYear}\n                                            </textPath>\n                                        </text>\n                                    </g>\n                                    {isLast && (\n                                        <g>\n                                            <path\n                                                id='timerange-label-last'\n                                                d={this.getTimerangeLabelPath(outerRadius + tooltipHeight)}\n                                                fill={'transparent'}\n                                                style={{ pointerEvents: 'none' }}\n                                            />\n                                            <text\n                                                dy={-tooltipHeight / 4}\n                                                className={'hoverable timeline-label-text noselect'}\n                                                style={{ fontSize: `${fontSize}px` }}\n                                                onClick={() => {\n                                                    this.setState({\n                                                        sectorDescriptionModal: {\n                                                            notes: timelines[timelines.length - 1].description,\n                                                            title: timelineLabelFormat ? timelines[timelines.length - 1].label : endYear\n                                                        }\n                                                    })\n                                                }}\n                                            >\n                                                <textPath xlinkHref={`#timerange-label-last`} textAnchor=\"middle\" startOffset=\"50%\">\n                                                    {timelineLabelFormat ? timelines[timelines.length - 1].label : endYear}\n                                                </textPath>\n                                            </text>\n                                        </g>\n                                    )}\n                                </g>\n                            )}\n                        </g>\n                    )\n                })}\n            </g>\n        )\n    }\n\n    shouldRadarRender(props = this.props) {\n        const { timeRanges } = props\n\n        return timeRanges.length !== 0 && !this.isEditorPageOpen(props)\n    }\n\n    renderRadar = () => {\n        const { containerWidth, containerHeight } = this.props\n        const { zoomTransform: { x, y, k }, phenomenaDragged } = this.state\n        const classes = classNames({\n            'zoomed-out': k < 0.25,\n            'zoomed-out-far': k < 0.15\n        })\n\n        return this.shouldRadarRender() && (\n            <svg \n                xmlns=\"http://www.w3.org/2000/svg\"\n                ref={this.svgRef}\n                height={containerHeight}\n                width={containerWidth}\n                className={classes}\n                style={{zIndex: phenomenaDragged ? 1 : 0}}>\n                <g className='zoom-control' transform={`translate(${x}, ${y}) scale(${k})`}>\n                    <g ref={this.radarRef}\n                       transform={`translate(${containerWidth / 2}, ${containerHeight / 2})`}>\n                        {this.renderTimelines()}\n                        {this.renderSectors()}\n                        {this.renderTimelineTooltip()}\n                        {this.renderLogo()}\n                        {this.renderPhenomena()}\n                        {this.renderDragMarker()}\n                    </g>\n                </g>\n            </svg>\n        )\n    }\n\n    renderMenuLink = (x, y, onClick, radius = this.scaled(25), fontSize = this.scaled(14)) => (\n        <g key={x + y} onClick={onClick} className={'tooltip-edit'}>\n            <circle r={radius / 2} cx={x} cy={y} fill={'#126995'} stroke={'none'}/>\n            <SVGIcon x={x} y={y} fontSize={fontSize} icon={'edit'}/>\n        </g>\n    )\n\n    renderEditabilityTooltip = (sector, index, offset) => {\n        const middleOfSectorAngle = ((sector.startAngle + sector.endAngle) / 2) || 0\n        const toolTipOffset = Math.min(offset * 0.15, 100)\n        const [x, y] = getCoordsFromAngleAndRadius(middleOfSectorAngle, offset - toolTipOffset)\n\n        return this.renderMenuLink(x, y, e => this.showSectorEditMenu(e, sector))\n    }\n\n    renderSectorEditor = () => {\n        const { containerWidth, containerHeight, timeRanges, radius, updateSector, radarSettings: { editSectorsPageOpen }, canEditRadar } = this.props\n\n        if (!canEditRadar) {\n            return null\n        }\n\n        const { sectors: lastSectors, outerRadius: lastRadius } = _.last(timeRanges)\n        const { editSector, zoomExtent } = this.state\n        const transform = `translate(${containerWidth / 2}, ${containerHeight / 2}) scale(${zoomExtent})`\n\n        return editSectorsPageOpen && (\n            <div>\n                <Modal\n                    isOpen={!!editSector}\n                    onRequestClose={() => {\n                        this.setState({ editSector: null })\n                    }}\n                    contentLabel='Sector settings'\n                    style={modalStyles}\n                    ariaHideApp={false}\n                >\n                    <SectorEditorForm\n                        sector={editSector}\n                        onClose={() => {\n                            this.setState({ editSector: null })\n                        }}\n                        updateSector={updateSector}\n                    />\n                </Modal>\n                <svg height={containerHeight} width={containerWidth} fill='black'>\n                    <g transform={transform}>\n                        <circle stroke={'#D9D9D9'}\n                                fill={'rgb(15, 19, 24)'}\n                                r={lastRadius}/>\n                        {this.renderSectors()}\n                        {lastSectors.map((sector, index) =>\n                            this.renderEditabilityTooltip(\n                                sector,\n                                index,\n                                lastRadius\n                            )\n                        )}\n                        {!lastSectors.length &&\n                        this.renderEditabilityTooltip({}, 1, radius)\n                        }\n                    </g>\n                </svg>\n            </div>\n        )\n    }\n\n    isEditorPageOpen(props = this.props) {\n        const {\n            radarSettings: {\n                editSectorsPageOpen\n            }\n        } = props\n\n        return editSectorsPageOpen\n    }\n\n    scaled = value => {\n        const { zoomExtent, zoomTransform: { k } } = this.state\n\n        if (!this.isZoomable()) {\n            return value / (zoomExtent / 1.4)\n        }\n\n        const divisor = Math.max(k, 0.25)\n\n        return value / (divisor / 1.4)\n    }\n\n    onPhenomenaDrag = (e, phenomenon, newlyCreated = false) => {\n        const { setDraggedPhenomenon, canEditRadar } = this.props\n\n        if (e) {\n            e.stopPropagation()\n        }\n\n        if (newlyCreated || (detectLeftButton(e) && e) || ('ontouchstart' in document.documentElement) || ('ontouchstart' in window)\n        ) {\n            this.setState({ updatingPhenomena: phenomenon })\n\n            this.longpressTimeout = setTimeout(() => {\n                if (canEditRadar) {\n                    this.setState({ phenomenaDragged: true })\n                    setDraggedPhenomenon(phenomenon)\n                }\n            }, 650)\n\n            document.addEventListener('mouseup', this.onPhenomenaDragEnd)\n            document.addEventListener('touchend', this.onPhenomenaDragEnd)\n            document.addEventListener('touchcancel', this.onPhenomenaDragEnd)\n            document.addEventListener('pointerup', this.onPhenomenaDragEnd)\n            // safari fix for when adding phenom\n            document.addEventListener('click', this.onPhenomenaDragEnd)\n        }\n    }\n\n    handleMouseAction = () => {\n        const { timeRanges, radius: radarRadius } = this.props\n\n        // d3.event.preventDefault()\n\n        if (!this.isEditorPageOpen()) {\n            const [x, y] = d3.mouse(this.radar)\n            const radians = Math.atan2(y, x)\n            const angle = radians < (Math.PI / 2) ? radians + (Math.PI * 2.5) : radians + (Math.PI * 0.5)\n            const radius = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))\n            const isOutside = radius > radarRadius\n            const timeRange = _.find(timeRanges, ({ radius: innerRadius, outerRadius }) => radius >= innerRadius && radius < outerRadius)\n            const sector = timeRange && _.find(timeRange.sectors, ({ startAngle, endAngle }) => angle >= startAngle && angle < endAngle)\n            const outerTimeRange = isOutside ? _.last(timeRanges) : _.first(timeRanges)\n            const boundaryRadius = isOutside ? outerTimeRange.outerRadius : outerTimeRange.radius\n            const boundaryTime = isOutside ? outerTimeRange.endYear + 0.00001 : outerTimeRange.startYear + 0.00001\n            const outerSector = _.find(outerTimeRange.sectors, ({ startAngle, endAngle }) => angle >= startAngle && angle < endAngle)\n            const time = timeRange && timeRange.scale.invert(radius)\n            const xOffset = sector ? d3.scaleLinear()\n                .range([0, 1])\n                .domain([sector.startAngle, sector.endAngle])\n                .interpolate(d3.interpolate)(angle) : 0.5\n\n            this.setState({\n                mouseCoords: {\n                    x,\n                    y,\n                    isOutside,\n                    xOffset,\n                    angle,\n                    radius,\n                    timeRange,\n                    sector,\n                    time,\n                    outerSector,\n                    boundaryTime,\n                    boundaryRadius\n                }\n            })\n        }\n    }\n\n    onPhenomenaDragEnd = e => {\n        const { updatePhenomenon, setDraggedPhenomenon, draggedPhenomenon: phenomenon } = this.props\n        if (this.longpressTimeout) {\n            clearTimeout(this.longpressTimeout)\n        }\n\n        if (phenomenon) {\n            const { mouseCoords: { time, angle, sector, xOffset } } = this.state\n            const deleting = !sector\n\n            if (deleting) {\n                this.setState({ deleteRadarPhenomenonOpen: phenomenon })\n            } else {\n                updatePhenomenon(phenomenon, {\n                    sectorId: sector.id,\n                    xOffset,\n                    time,\n                    angle\n                })\n            }\n\n            this.setState({ phenomenaDragged: false })\n            setDraggedPhenomenon(false)\n\n            if (e) {\n                e.preventDefault()\n                e.stopPropagation()\n            }\n        }\n\n        if (e && ('ontouchstart' in document.documentElement || 'ontouchstart' in window)) {\n            e.preventDefault()\n            e.stopPropagation()\n        }\n\n        document.removeEventListener('mouseup', this.onPhenomenaDragEnd)\n        document.removeEventListener('pointerup', this.onPhenomenaDragEnd)\n        document.removeEventListener('touchcancel', this.onPhenomenaDragEnd)\n        document.removeEventListener('touchend', this.onPhenomenaDragEnd)\n        document.removeEventListener('click', this.onPhenomenaDragEnd)\n    }\n\n    svgRef = ref => this.svg = ref\n    radarRef = ref => this.radar = ref\n\n    getPhenomenaDisplayProps = () => {\n        const { radius, phenomenaTypesById } = this.props\n        // this can't be scaled due to react-svg-text calculation mechanisms\n        const labelWidth = radius * 0.25\n        const labelHeight = this.scaled(30)\n        const phenomenaSize = this.scaled(21)\n        const iconSize = this.scaled(21)\n        const fontSize = this.scaled(8)\n\n        return { labelWidth, labelHeight, phenomenaSize, iconSize, fontSize, phenomenaTypesById }\n    }\n\n    renderDragMarker() {\n        const { draggedPhenomenon } = this.props\n\n        if (draggedPhenomenon) {\n            if (!this.phenomenaDisplayProps) {\n                this.phenomenaDisplayProps = this.getPhenomenaDisplayProps()\n            }\n\n            const { mouseCoords: { sector, x, y } } = this.state\n\n            return (\n                <Phenomenon\n                    cx={x}\n                    cy={y}\n                    phenomenon={draggedPhenomenon}\n                    deleting={!sector}\n                    dragged={true}\n                    {...this.phenomenaDisplayProps}\n                    scaled={this.scaled}\n                />\n            )\n        } else if (this.phenomenaDisplayProps) {\n            this.phenomenaDisplayProps = null\n        }\n        return null\n    }\n\n    renderEditPhenomenonForm() {\n        const {\n            radarSettings: { editPhenomenaVisible, id, group, radarLanguage },\n            storePhenomenon,\n        } = this.props\n\n        return (\n            <Modal isOpen={!!editPhenomenaVisible}\n                   contentLabel={'Edit phenomena'}\n                   style={modalStyles}\n                   onRequestClose={this.handleEditPhenomenonFormClose}\n                   ariaHideApp={false}>\n                {editPhenomenaVisible && (\n                    <PhenomenonLoader id={editPhenomenaVisible.id} group={editPhenomenaVisible.group || editPhenomenaVisible.groups[0]}>\n                        {({ loading, error, phenomenon }) => {\n                            if (loading) {\n                                return <div className=\"py-5 text-center\">Loading...</div>\n                            }\n\n                            if (error) {\n                                return <div className=\"py-5 text-center text-danger\">{error.message}</div>\n                            }\n\n                            return (\n                                <PhenomenonEditForm\n                                    phenomenon={phenomenon}\n                                    onSubmit={(values, newsFeedChanges) => {\n                                        storePhenomenon(values, newsFeedChanges, this.handleEditPhenomenonFormClose)\n                                    }}\n                                    onCancel={this.handleEditPhenomenonFormClose}\n                                    onDelete={() => {}}\n                                    radar={{\n                                        id,\n                                        groupId: group.id,\n                                        language: radarLanguage\n                                    }}\n                                />\n                            )\n                        }}\n                    </PhenomenonLoader>\n                )}\n            </Modal>\n        )\n    }\n\n    handleWebsocketUpdate = update => {\n        const { radarSettings: { radar_version }, refetchRadarData } = this.props\n\n        if (update.radar_version !== radar_version) {\n            refetchRadarData()\n                .then(() => toast(requestTranslation('radarUpdated')))\n        }\n    }\n\n    renderSockJsClient() {\n        const { account, id } = this.props.radarSettings\n\n        return account && id && (\n            <SockJsClient\n                url={RADAR_DATA_WEBSOCKET_URL}\n                topics={[`/topic/radar/${id}`]}\n                onMessage={update => setTimeout(function() {\n                    this.handleWebsocketUpdate(update)\n                }.bind(this), 500)}\n                headers={getWebSocketHeaders()}\n            />\n        )\n    }\n\n    renderBottomLeftNav() {\n        const { radarSettings: { editSectorsPageOpen }, radarLogoLinkDisabled } = this.props\n\n        return !editSectorsPageOpen && <Filters hideInfoButton={radarLogoLinkDisabled} />\n    }\n\n    renderTitle() {\n        const { radarName, groups, group, titleLogo } = this.props.radarSettings\n        const renderTitleLogoInput = _.find(groups, ({ value }) => Number(value) === Number(group.id))\n\n        return renderTitleLogoInput && renderTitleLogoInput.radarLogoEnabled && titleLogo\n            ?\n            (<RadarTitleLogo src={titleLogo} />)\n            :\n            (<RadarTitle id='radar-title-left'>{radarName}</RadarTitle>)\n    }\n\n\n    // this really needs to be rewritten\n    renderEditSectorMenu() {\n        const { editMenuPosition } = this.state\n        const { timeRanges, addSector, deleteSector } = this.props\n\n        return editMenuPosition && (\n            <EditSectorMenu\n                timeranges={timeRanges}\n                handleEditSectorForm={() => {\n                    this.setState({ editSector: editMenuPosition.sector })\n                    this.hideSectorMenuEdit()\n                }}\n                y={editMenuPosition.y}\n                x={editMenuPosition.x}\n                sector={editMenuPosition.sector}\n                onClose={this.hideSectorMenuEdit}\n                deleteSector={sectorId => {\n                    deleteSector(sectorId)\n                    this.hideSectorMenuEdit()\n                }}\n                addSector={(direction, sectorId) => {\n                    addSector(direction, sectorId)\n                    this.hideSectorMenuEdit()\n                }}\n            />\n        )\n    }\n\n    renderCreateRadarModal() {\n        const {\n            changeAddRadarFormVisibility,\n            radarSettings: {\n                addRadarFormOpen,\n                id,\n            }\n        } = this.props\n\n        return (\n            <Modal\n                isOpen={addRadarFormOpen}\n                contentLabel='Radar settings'\n                style={modalStyles}\n                ariaHideApp={false}\n                onRequestClose={id ? () => changeAddRadarFormVisibility() : null}\n            >\n                <CreateRadarForm />\n            </Modal>\n        )\n    }\n\n    renderSectorDescriptionModal() {\n        const { sectorDescriptionModal } = this.state\n\n        return (\n            <Modal\n                isOpen={!!sectorDescriptionModal}\n                contentLabel='Sector description'\n                onRequestClose={() => this.setState({ sectorDescriptionModal: null })}\n                style={modalStyles}\n                ariaHideApp={false}\n            >\n                {!!sectorDescriptionModal &&\n                    <div>\n                        <div className='modal-form-sections'>\n                            <div className='modal-form-section modal-form-header'>\n                                <h2>{sectorDescriptionModal.title}</h2>\n                            </div>\n                            <div className='modal-form-section'>\n                                <div\n                                    dangerouslySetInnerHTML={{ __html: sectorDescriptionModal.notes }}\n                                />\n                            </div>\n                        </div>\n\n                        <div className='modal-form-section modal-form-actions pt-0'>\n                            <div\n                                onClick={() => this.setState({ sectorDescriptionModal: null })}\n                                className='btn btn-lg btn-primary'\n                            >\n                                {requestTranslation('close')}\n                            </div>\n                        </div>\n                    </div>\n                }\n            </Modal>\n        )\n    }\n\n    renderDeleteRadarPhenomenonModal() {\n        const { deleteRadarPhenomenonOpen } = this.state\n        const { deleteRadarPhenomenon } = this.props\n\n        return (\n            <Modal\n                isOpen={!!deleteRadarPhenomenonOpen}\n                contentLabel='Delete phenomena from radar'\n                style={paddingModalStyles}\n                className={'paddedModal'}\n                ariaHideApp={false}\n            >\n                <div className={'confirmation-modal-content'}>\n                    <h3 className={'confirmation-modal-title'}>\n                        {requestTranslation('deletePhenomenaDoubleCheck')}\n                    </h3>\n                    <div className={'confirmation-modal-actions'}>\n                        <button className='btn btn-lg btn-plain-gray'\n                                onClick={() => {\n                                    // is already on radar\n                                    if (deleteRadarPhenomenonOpen.time) {\n                                        this.setState({ deleteRadarPhenomenonOpen: false })\n                                    // need to add it to radar again and set it as dragged\n                                    } else {\n                                        this.onPhenomenaDrag(false, deleteRadarPhenomenonOpen, true)\n                                        this.setState({ deleteRadarPhenomenonOpen: false })\n                                    }\n                                }}>\n                            {requestTranslation('cancel')}\n                        </button>\n                        <button\n                            className='btn btn-lg btn-primary'\n                            onClick={() =>\n                                deleteRadarPhenomenon(deleteRadarPhenomenonOpen, () => this.setState({ deleteRadarPhenomenonOpen: false }))\n                            }\n                        >\n                            {requestTranslation('delete')}\n                        </button>\n                    </div>\n                </div>\n            </Modal>\n        )\n    }\n\n    renderSandbox() {\n        const { setDraggedPhenomenon, radarSettings: { addPhenomenaVisible } } = this.props\n        const { phenomenaDragged } = this.state\n\n        if (addPhenomenaVisible) {\n            return (\n                <AddPhenomenaSandbox\n                    onPhenomenaDrag={(...args) => {\n                        this.setState({ phenomenaDragged: true })\n                        this.onPhenomenaDrag(...args)\n                        setDraggedPhenomenon(args[1])\n                    }}\n                    updateMouseCoords={this.handleMouseAction}\n                    placing={!!phenomenaDragged}\n                />\n            )\n        }\n\n        return null\n    }\n\n    render() {\n        const { loading, returnUri } = this.props\n\n        return (\n            <Container style={{ pointerEvents: loading.length ? 'none' : 'all' }}>\n                <Loading shown={loading.length} color={'white'}/>\n                {this.renderTitle()}\n                {this.renderBottomLeftNav()}\n                <SideNav returnUri={returnUri} radarSettings={this.props.radarSettings}/>\n                {this.renderEditSectorMenu()}\n                {this.renderRadar()}\n                {this.renderSectorEditor()}\n                <SignalList />\n                {this.renderSandbox()}\n                <TimeRangeEditorForm radarWidth={this.svg && this.svg.width.baseVal.value} />\n                {this.renderEditPhenomenonForm()}\n                {this.renderSockJsClient()}\n                {this.renderCreateRadarModal()}\n                {this.renderSectorDescriptionModal()}\n                {this.renderDeleteRadarPhenomenonModal()}\n                <ConfirmDialog />\n                <ErrorModal />\n            </Container>\n        )\n    }\n}\n\nconst RadarTitle = styled.h1`\n    color: white;\n    position: absolute;\n    top: 25px;\n    left: 25px;\n    margin: 0;\n    text-shadow: 1.5px 1.5px 0 rgba(0, 0, 0, .2);\n    max-width: 250px;\n`\n\nconst Container = styled.div`\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background-color: black;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n`\n\nconst RadarTitleLogo = styled.img`\n    height: 85px;\n    width: auto;\n    object-fit: contain;\n    position: absolute;\n    top: 25px;\n    left: 25px;\n`\n\nexport default RadarPage\n","import _ from 'lodash'\nimport { getNetworkMethods } from './network'\nimport * as actionTypes from '@sangre-fp/reducers/actionTypes'\nimport radarDataApi from '../radarDataApiProxy'\nimport { requestTranslation } from '@sangre-fp/i18n'\n\nexport const addSector = (placement, selectedSector) => (dispatch, getState) => {\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.ADD_SECTOR,\n        actionTypes.ADD_SECTOR_SUCCESS,\n        requestTranslation('addingSectorError')\n    )\n\n    const radarId = getState().radarSettings.id\n\n    const data = {\n        title: '',\n        notes: ''\n    }\n\n    if (selectedSector && !_.isEmpty(selectedSector) && placement === 0) {\n        data.next = {}\n        data.next.id = selectedSector.id\n        data.next.version = selectedSector.version\n    } else if (selectedSector && !_.isEmpty(selectedSector) && placement === 1) {\n        data.previous = {}\n        data.previous.id = selectedSector.id\n        data.previous.version = selectedSector.version\n    }\n\n    dispatch(loading())\n\n    return radarDataApi.createSector(radarId, data)\n        .then(({ sector, next, previous }) => dispatch(success({\n            affectedSectors: [next, previous].filter(s => !_.isEmpty(s)),\n            sectorId: selectedSector.id,\n            placement,\n            sector\n        })))\n        .catch(err => dispatch(error(err)))\n}\n\nexport const updateSector = (sector, title, notes, callback) => (dispatch, getState) => {\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.EDIT_SECTOR,\n        actionTypes.EDIT_SECTOR_SUCCESS,\n        requestTranslation('editingSectorError')\n    )\n\n    dispatch(loading())\n\n    const radarId = getState().radarSettings.id\n    const data = {\n        id: sector.id,\n        version: sector.version,\n        title,\n        notes\n    }\n\n    return radarDataApi.updateSector(radarId, data)\n        .then(resultData => {\n            if (callback) {\n                callback()\n            }\n            return dispatch(success(resultData.sector))\n        })\n        .catch(err => dispatch(error(err)))\n}\n\nexport const deleteSector = ({ id: sectorId, version }) => (dispatch, getState) => {\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.DELETE_SECTOR,\n        actionTypes.DELETE_SECTOR_SUCCESS,\n        requestTranslation('deletingSectorError')\n    )\n\n    dispatch(loading())\n\n    const radarId = getState().radarSettings.id\n    const data = { id: sectorId, version }\n\n    return radarDataApi.deleteSector(radarId, sectorId, data)\n        .then(({ next, previous, radar_version }) => {\n            const affectedSectors = [next, previous].filter(s => !_.isEmpty(s))\n            dispatch(success({\n                    deletedSectorId: sectorId,\n                    affectedSectors,\n                    radarVersion: radar_version\n                }\n            ))\n        })\n        .catch(err => dispatch(error(err)))\n}\n","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport RadarPage from '../components/RadarPage'\nimport { compose, bindActionCreators } from 'redux'\nimport Dimensions from 'react-dimensions'\nimport { createSelector } from 'reselect'\nimport { centerRadiusPercentage } from '../config'\nimport { getCoordsFromAngleAndRadius } from '../helpers'\nimport * as d3 from 'd3'\nimport _ from 'lodash'\n\nimport {\n    changeAddRadarFormVisibility,\n    changeEditPhenomenaVisibility,\n    getUserGroups,\n    toggleEditMenuVisiblity\n} from '../actions/radarSettings'\nimport { addSector, deleteSector, updateSector } from '../actions/sectors'\nimport {\n    fetchRadar,\n    setDraggedPhenomenon,\n    updatePhenomenon,\n    createPhenomenonWithPosition,\n    deleteRadarPhenomenon,\n    refetchRadarData,\n    storePhenomenon,\n    addPublicPhenomenaToRadar\n} from '../actions/radarData'\n\nconst getCreateTimeRanges = (thisRadius, centerRadius = thisRadius * centerRadiusPercentage) => timeRanges => {\n    let previousRadius = centerRadius\n\n    return timeRanges.map((timeRange, index) => {\n        const { startYear, endYear, sectors, position } = timeRange\n        const width = position - (index ? timeRanges[index - 1].position : 0)\n        const timelineWidth = (thisRadius - centerRadius) * width\n\n        // get inner radius\n        const radius = previousRadius\n\n        // get outer radius\n        const outerRadius = previousRadius + timelineWidth\n\n        previousRadius = outerRadius\n\n        // get scale\n        const scale = d3.scaleLinear()\n            .range([radius, outerRadius])\n            .domain([startYear, endYear])\n\n        // get constraints\n        const band = d3.scaleBand().range([0, 2 * Math.PI]).domain(_.keys(sectors))\n\n        // set phenomena x and y\n        return {\n            ...timeRange,\n            radius,\n            outerRadius,\n            scale,\n            sectors: sectors.map((sector, sectorIndex) => {\n                const startAngle = (Math.PI + band(sectorIndex))\n                const endAngle = Math.PI + band(sectorIndex) + band.step()\n                const key = `sector-${startYear}-${sector.id}`\n                return {\n                    ...sector,\n\n                    key,\n\n                    startAngle,\n\n                    endAngle,\n\n                    scale,\n\n                    arc: d3.arc()\n                        .innerRadius(radius)\n                        .outerRadius(outerRadius)\n                        .startAngle(startAngle)\n                        .endAngle(endAngle)(),\n\n                    constraints: {\n                        angle: [startAngle, endAngle],\n                        radius: [radius, outerRadius]\n                    },\n\n                    phenomena: sector.phenomena.map(phenomenon => {\n                        const { xOffset, time } = phenomenon\n\n                        const angle = startAngle + ((endAngle - startAngle) * xOffset)\n                        const phenomenonRadius = scale(time)\n\n                        const [x, y] = getCoordsFromAngleAndRadius(angle, phenomenonRadius)\n\n                        return {\n                            ...phenomenon,\n                            angle,\n                            radius: phenomenonRadius,\n                            x,\n                            y\n                        }\n                    })\n                }\n            })\n        }\n    })\n}\n\nconst Timelines = WrappedComponent => {\n    class WithTimelines extends PureComponent {\n        render() {\n            // const { containerHeight, containerWidth } = this.props\n            const containerHeight = 2300\n            const containerWidth = 2300\n            const svgDimensions = Math.min(containerHeight, containerWidth)\n            const radius = (svgDimensions / 2) - 30\n            const createTimeRanges = getCreateTimeRanges(radius)\n\n            return (\n                <WrappedComponent\n                    {...this.props}\n                    svgDimensions={svgDimensions}\n                    radius={radius}\n                    createTimeRanges={createTimeRanges}\n                />\n            )\n        }\n    }\n\n    return WithTimelines\n}\n\nconst getTimelines = ({ timelines }) => timelines\nconst getSectors = ({ sectors }) => sectors\nconst getPhenomena = ({ phenomena }) => phenomena\nconst getDraggedPhenomenonId = ({ radarSettings: { draggedPhenomenonId } }) => draggedPhenomenonId\n\nconst getPropsCreateTimeRanges = (state, props) => props.createTimeRanges\n\nconst getSectorPhenomena = (sector, phenomenas, startYear, endYear) => {\n    return phenomenas.filter(\n        ({ sectorId, time }) =>\n            sectorId === sector.id && time >= startYear && time < endYear\n    )\n}\n\nconst getTimelineSectors = (sectors, phenomena, startYear, endYear) => sectors.map(sector => ({\n    ...sector,\n    phenomena: getSectorPhenomena(sector, phenomena, startYear, endYear)\n}))\n\nconst getTimeRanges = createSelector(\n    [getTimelines, getSectors, getPhenomena],\n    (timeLineBoundaries, sectors, phenomena) => {\n        // TODO fix\n        const isPlaceholder = timeLineBoundaries.length === 1 && timeLineBoundaries[0][1] === 1\n\n        return timeLineBoundaries.map(({ year: startYear }, index) => {\n            if (timeLineBoundaries[index + 1]) {\n                const endYear = timeLineBoundaries[index + 1].year\n                const title = timeLineBoundaries[index + 1].title || ''\n                const id = timeLineBoundaries[index + 1].id\n                const version = timeLineBoundaries[index + 1].version || 1\n                const position = timeLineBoundaries[index + 1].position\n                const description = timeLineBoundaries[index].description\n                const label = timeLineBoundaries[index].label\n\n                return {\n                    id,\n                    title,\n                    startYear,\n                    endYear,\n                    isPlaceholder,\n                    sectors: getTimelineSectors(sectors, phenomena, startYear, endYear),\n                    version,\n                    position,\n                    description,\n                    label\n                }\n            }\n\n            return null\n        }).filter(timeRange => !!timeRange)\n    }\n)\n\nconst getRadarData = createSelector(\n    [getTimeRanges, getPropsCreateTimeRanges],\n    (timeRanges, createTimeRanges) => createTimeRanges(timeRanges)\n)\nconst getDraggedPhenomenon = createSelector(\n    [getPhenomena, getDraggedPhenomenonId],\n    (phenomena, draggedPhenomenonId) => _.find(\n        phenomena, ({ id }) => id === draggedPhenomenonId\n    )\n)\n\nconst mapStateToProps = (state, props) => {\n    const {\n        radarSettings,\n        loading,\n        phenomenaTypesById,\n        timelines\n    } = state\n\n    return {\n        loading,\n        radarSettings,\n        phenomenaTypesById,\n        timeRanges: getRadarData(state, props),\n        canEditRadar: radarSettings.canEditRadar,\n        isVisitor: radarSettings.isVisitor,\n        draggedPhenomenon: getDraggedPhenomenon(state),\n        timelines\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    ...bindActionCreators({\n        changeAddRadarFormVisibility,\n        addSector,\n        deleteSector,\n        updateSector,\n        fetchRadar,\n        changeEditPhenomenaVisibility,\n        deleteRadarPhenomenon,\n        storePhenomenon,\n        getUserGroups,\n        refetchRadarData,\n        toggleEditMenuVisiblity,\n        addPublicPhenomenaToRadar\n    }, dispatch),\n    setDraggedPhenomenon: phenomenon => dispatch(setDraggedPhenomenon(phenomenon.id || phenomenon.phenomenon_uuid)),\n    updatePhenomenon:\n        // phenomena do not have ids until placed\n        (phenomenon, positionData) => !phenomenon.time\n            ? dispatch(createPhenomenonWithPosition(phenomenon, positionData))\n            : dispatch(updatePhenomenon(phenomenon, positionData))\n})\n\nexport default compose(\n    Dimensions(),\n    Timelines,\n    connect(mapStateToProps, mapDispatchToProps)\n)(RadarPage)\n","import _ from 'lodash'\n\nimport { getNetworkMethods } from './network'\nimport * as actionTypes from '@sangre-fp/reducers/actionTypes'\nimport radarDataApi from '../radarDataApiProxy'\nimport { requestTranslation } from '@sangre-fp/i18n'\n\nexport function roundToX(num, X) {\n    return +(Math.round(num + \"e+\"+X)  + \"e-\"+X)\n}\n\nexport const updateTimerange = (timerange, callback) => (dispatch, getState) => {\n    const radarId = getState().radarSettings.id\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.UPDATE_TIMERANGE,\n        actionTypes.UPDATE_TIMERANGE_SUCCESS,\n        requestTranslation('updatingTimelinesError')\n    )\n\n    // can be data = {...payload} when title is removed from dto by konrad\n    const { id, version, position, label, description, year } = timerange\n    const data = { id, version, position, label, description, year }\n\n    dispatch(loading())\n\n    return radarDataApi.updateRadarTimeRange(radarId, data)\n        .then(timeRangeData => {\n            callback()\n            return dispatch(success({\n                ...timeRangeData.time_range\n            }))\n        })\n        .catch(err => dispatch(error(err)))\n}\n\nexport const updateTimerangePosition = (newTimelinePositions, oldTimelinePositions) => (dispatch, getState) => {\n    const radarId = getState().radarSettings.id\n    const timelines = getState().timelines\n    const newPosition = _.difference(newTimelinePositions, oldTimelinePositions)[0]\n\n    // because this is fired upon a onAfterChange event, the position has already been set by the uploadPositions function\n    const timelineToUpdate = _.find(timelines, { position: roundToX(Number(newPosition), 2) })\n    const data = { ...timelineToUpdate }\n\n    // first and last timerange position are unchangable\n    // so the only time timelineToUpload is false, is when one\n    // of those has been touched (they fire an event despite being disabled\n    // ( bug in rc-slider )\n    if (!timelineToUpdate) {\n        return\n    }\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.UPDATE_TIMERANGE,\n        actionTypes.UPDATE_TIMERANGE_SUCCESS,\n        requestTranslation('updatingTimelinesPositionError')\n    )\n\n    dispatch(loading())\n\n    return radarDataApi.updateRadarTimeRange(radarId, data)\n        .then(timeRangeData => dispatch(success({\n            ...timeRangeData.time_range\n        })))\n        .catch(err => {\n            // set the timeranges position to it's old position\n            dispatch({\n                type: actionTypes.UPDATE_TIMELINES,\n                payload: updatePositions(timelines, oldTimelinePositions)\n            })\n\n            dispatch(error(err))\n        })\n}\n\nexport const removeTimeline = timerange => (dispatch, getState) => {\n    const radarId = getState().radarSettings.id\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.REMOVE_TIMELINE,\n        actionTypes.REMOVE_TIMELINE_SUCCESS,\n        requestTranslation('removingTimelineError')\n    )\n\n    dispatch(loading())\n\n    const data = { ...timerange }\n\n    return radarDataApi.deleteRadarTimeRange(radarId, data)\n        .then(timeRangeData => dispatch(success(timeRangeData.time_range.id)))\n        .catch(err => dispatch(error(err)))\n}\n\n\nconst updatePositions = (timelines, positions) => {\n    return timelines\n        .map((timeline, index) => ({\n            ...timeline,\n            position: roundToX(Number(positions[index]), 2)\n        }))\n}\n\nexport const updateTimelinePositions = timelineYearRangeValues => (dispatch, getState) => {\n    const timelines = getState().timelines\n\n    // first and last positions are unchangable\n    const positions = timelineYearRangeValues.map((value, index) => {\n        if (index === 0) {\n            return 0\n        }\n\n        if (index === timelineYearRangeValues.length - 1) {\n            return 1\n        }\n\n        return value\n    })\n\n    dispatch({\n        type: actionTypes.UPDATE_TIMELINES,\n        payload: updatePositions(timelines, positions)\n    })\n}\n\nexport const addTimeline = (timeline, callback) => (dispatch, getState) => {\n    const timelines = getState().timelines\n    const { id: radarId, timelineLabelFormat } = getState().radarSettings\n\n    // insert new timeline into proper place\n    let newTimelines = [...timelines]\n    const newTimelineIndex = timelineLabelFormat ? _.sortedIndexBy(timelines, timeline, 'position') : _.sortedIndexBy(timelines, timeline, 'year')\n    newTimelines.splice(newTimelineIndex, 0, timeline)\n\n    // set the new timeline's position to be between it's neightbours\n    const nextTimelinePosition = Number(newTimelines[newTimelineIndex + 1].position)\n    const previousTimelinePosition = Number(newTimelines[newTimelineIndex - 1].position)\n    const timelinePosition = (nextTimelinePosition + previousTimelinePosition) / 2\n\n    const { loading, success, error } = getNetworkMethods(\n        actionTypes.ADD_TIMERANGE,\n        actionTypes.ADD_TIMERANGE_SUCCESS,\n        requestTranslation('addingTimelineError')\n    )\n\n    const data = {\n        ...newTimelines[newTimelineIndex],\n        position: roundToX(Number(timelinePosition), 2)\n    }\n\n    dispatch(loading())\n\n    return radarDataApi.addRadarTimeRange(radarId, data)\n        .then(timeRangeData => {\n            const newTimelineState = [...timelines]\n            // posiiton will come from backend once it's implemented\n            // then delete this position below\n            newTimelineState.splice(newTimelineIndex, 0, {...timeRangeData.time_range })\n\n            dispatch(success(newTimelineState))\n            callback()\n        })\n        .catch(err => dispatch(error(err)))\n}\n\nexport const toggleLabelMode = () => dispatch => dispatch({ type: actionTypes.TOGGLE_LABEL_MODE })","import _ from 'lodash'\nimport React, { PureComponent } from 'react'\nimport styled from 'styled-components'\nimport { Range, Handle } from 'rc-slider'\nimport Select from 'react-select'\nimport Draggable from 'react-draggable'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport {\n    Z_INDEX_MODAL,\n    Checkbox,\n    MaterialIcon,\n    Modal,\n    paddingModalStyles,\n    ModalContainer,\n    BorderTitleContainer as Container\n} from '@sangre-fp/ui'\nimport { createGlobalStyle } from 'styled-components'\nimport ReactQuill from 'react-quill'\nimport {\n    customQuillModules,\n    RANGE_MIN,\n    RANGE_MAX,\n    RANGE_BOUNDARY,\n    TIMELINE_TEMPLATE,\n    MAX_TIMELINES\n} from '../config'\nimport { formats } from '../quill'\nimport { roundToX } from '../actions/timelines'\n\nconst MODAL_WIDTH = 300\nconst MODAL_TO_RADAR_MARGIN = 37\n\nexport default class SectorEditorForm extends PureComponent {\n    state = {\n        // timerangeEditModal is either timeline to edit, false or new timeline template\n        timerangeEditModal: false,\n        updateTimerangeBlock: false,\n        oldPositions: this.props.timelines.map(({ year }) => year)\n    }\n\n    calculateModalDisplacement = () => {\n        const { radarWidth } = this.props\n\n        if (!radarWidth) {\n            return MODAL_TO_RADAR_MARGIN + 'px'\n        }\n\n        const windowWidth = window.innerWidth\n        const availableWidth = (windowWidth - radarWidth) / 2\n\n        if (availableWidth > MODAL_WIDTH + MODAL_TO_RADAR_MARGIN * 2) {\n            return availableWidth - (MODAL_WIDTH + MODAL_TO_RADAR_MARGIN) + 'px'\n        }\n\n        return MODAL_TO_RADAR_MARGIN + 'px'\n    }\n\n    cancelEvents = e => {\n        e.preventDefault()\n        e.stopPropagation()\n        this.blurHandles()\n    }\n\n    handleDescriptionChange = value => {\n        const { timerangeEditModal } = this.state\n\n        this.setState({\n            timerangeEditModal: {\n                ...timerangeEditModal,\n                description: value\n            }\n        })\n    }\n\n    handleYearChange = ({ target }) => {\n        const { timerangeEditModal } = this.state\n\n        this.setState({\n            timerangeEditModal: {\n                ...timerangeEditModal,\n                year: Number(target.value) ? Number(target.value) : ''\n            }\n        })\n    }\n\n    handleLabelChange = ({ target }) => {\n        const { timerangeEditModal } = this.state\n\n        this.setState({\n            timerangeEditModal: {\n                ...timerangeEditModal,\n                label: target.value\n            }\n        })\n    }\n\n\n    handleLabelPositionChange = ({ value, year }) => {\n        const { timerangeEditModal } = this.state\n\n        this.setState({\n            timerangeEditModal: {\n                ...timerangeEditModal,\n                position: value,\n                year\n            }\n        })\n    }\n\n    generateLabelPositionOptions = () => {\n        const { timelines } = this.props\n\n        return timelines.map(({ label }, index) => {\n            if (index < timelines.length - 1) {\n                const nextPosition = Number(timelines[index + 1].position)\n                const position = roundToX((Number(timelines[index].position) + nextPosition) / 2, 2)\n                const year = Math.round((Number(timelines[index].year) + Number(timelines[index + 1].year)) / 2)\n\n                return { label: requestTranslation('afterLabel', label), value: position, year }\n            }\n\n            return null\n        }).filter(option => option)\n    }\n\n    validateTimerangeInput = () => {\n        const { timerangeEditModal: { year, id } } = this.state\n        const { timelines, timelineLabelFormat } = this.props\n\n        const firstYear = Number(timelines[0].year)\n        const lastYear = Number(timelines[timelines.length - 1].year)\n\n        if (!id) {\n\n            if (timelines.length >= MAX_TIMELINES) {\n                return requestTranslation('timerangeAmountError')\n            }\n\n            if (!timelineLabelFormat && (!year || isNaN(year) || (year <= firstYear || year >= lastYear))) {\n\n                return requestTranslation('timerangeBoundaryError', ({ firstYear, lastYear }) )\n            }\n\n            if (_.find(timelines, [ 'year', Number(year) ])) {\n\n\n                return timelineLabelFormat ? requestTranslation('consecutiveYearError') : requestTranslation('timerangeExistsError')\n            }\n\n            let newTimelines = [...timelines]\n            const timeline = this.state.timerangeEditModal\n\n            if (!timeline || (timelineLabelFormat && !timeline.position)) {\n                return true\n            }\n\n            const newTimelineIndex = timelineLabelFormat ? _.sortedIndexBy(timelines, timeline, 'position') : _.sortedIndexBy(timelines, timeline, 'year')\n            newTimelines.splice(newTimelineIndex, 0, timeline)\n\n            const nextTimeline = newTimelines[newTimelineIndex + 1]\n            const previousTimeline = newTimelines[newTimelineIndex - 1]\n\n            if (Number(nextTimeline.position) - Number(previousTimeline.position) < RANGE_BOUNDARY * 2) {\n                return requestTranslation('timerangeSpaceError', ({ previousYear: timelineLabelFormat ? `'${previousTimeline.label}'` : previousTimeline.year, nextYear: timelineLabelFormat ? `'${nextTimeline.label}'` : nextTimeline.year }))\n            }\n        }\n\n        if (id) {\n            if (!year || isNaN(year)) {\n                return requestTranslation('timerangeError', ({ firstYear, lastYear }) )\n            }\n\n            const index = _.findIndex(timelines, { id })\n            const previousTimeline = timelines[index - 1]\n            const nextTimeline = timelines[index + 1]\n\n            if (nextTimeline && year >= nextTimeline.year) {\n                return requestTranslation('timerangeSmallerYearError', nextTimeline.year)\n            }\n\n            if (previousTimeline && year <= previousTimeline.year) {\n                return requestTranslation('timerangeLargerYearError', previousTimeline.year)\n            }\n\n            // if (year < 2018) {\n            //     return requestTranslation('timerangeCurrentYearError', 2018)\n            // }\n\n        }\n\n        return false\n    }\n\n    resetTimerangeEditModal = () => this.setState({ timerangeEditModal: false })\n\n    renderTimeRangeModal = () => {\n        const { timerangeEditModal } = this.state\n        const { addTimeline, updateTimerange, timelineLabelFormat } = this.props\n        const edit = timerangeEditModal.id\n        const disabledText = this.validateTimerangeInput()\n        const options = this.generateLabelPositionOptions()\n\n        return timerangeEditModal && (\n            <Modal\n                isOpen={true}\n                onRequestClose={() => this.setState({ timerangeEditModal: false})}\n                contentLabel='Timerange editor'\n                ariaHideApp={false}\n                style={paddingModalStyles}\n            >\n                <ModalContainer>\n                    <h2>\n                        {edit ?\n                            requestTranslation('editTimerange')\n                            :\n                            requestTranslation('addTimerange')\n                        }\n                    </h2>\n                    {timelineLabelFormat ?\n                        (\n                            <div className='mb-4 d-flex w-100 align-items-center justify-content-between'>\n                                <div style={{ width: '35%' }}>\n                                    <h3>{requestTranslation('label')}</h3>\n                                    <LabelInput\n                                        maxLength={35}\n                                        value={timerangeEditModal.label}\n                                        onChange={this.handleLabelChange}\n                                        placeholder={requestTranslation('typeLabel')}\n                                    />\n                                </div>\n                                {!edit && (\n                                    <div style={{ width: '35%' }}>\n                                        <h3>{requestTranslation('labelPosition')}</h3>\n                                        <Select\n                                            searchable={false}\n                                            clearable={false}\n                                            name='position'\n                                            className='fp-radar-select w-100 h-100'\n                                            value={timerangeEditModal.position}\n                                            onChange={this.handleLabelPositionChange}\n                                            options={options.length ? options : []}\n                                        />\n                                    </div>\n                                )}\n                            </div>\n                        )\n                    :\n                        (\n                            <div>\n                                <h3>{requestTranslation('year')}</h3>\n                                <InputContainer className='mb-4'>\n                                    <YearInput\n                                        onChange={this.handleYearChange}\n                                        value={timerangeEditModal.year}\n                                        maxLength={4}\n                                    />\n                                </InputContainer>\n                            </div>\n                        )\n                    }\n                    <p>{disabledText}</p>\n                    <h3>{requestTranslation('description')}</h3>\n                    <ReactQuill\n                        className='fp-wysiwyg'\n                        style={{ height: '250px', paddingBottom: '42px' }}\n                        modules={customQuillModules}\n                        onChange={this.handleDescriptionChange}\n                        formats={formats}\n                        value={timerangeEditModal.description || ''}\n                    />\n                    <div className={'confirmation-modal-actions d-flex justify-content-end mt-4'}>\n                        <button className='btn btn-lg btn-plain-gray'\n                                onClick={this.resetTimerangeEditModal}>\n                            {requestTranslation('cancel')}\n                        </button>\n                        <button\n                            className='btn btn-lg btn-primary'\n                            disabled={!!disabledText}\n                            onClick={() =>\n                                edit ?\n                                    updateTimerange(timerangeEditModal, this.resetTimerangeEditModal)\n                                    :\n                                    addTimeline(timerangeEditModal, this.resetTimerangeEditModal)\n                                }\n                        >\n                            {edit ? requestTranslation('edit') : requestTranslation('add')}\n                        </button>\n                    </div>\n                </ModalContainer>\n            </Modal>\n        )\n    }\n\n\n    renderHandles = handleProps => {\n        const {\n            timelines,\n            toggleConfirmationDialog,\n            removeTimeline,\n            timelineLabelFormat\n        } = this.props\n        const { index, dragging } = handleProps\n        const isDisabled = index === 0 || index === timelines.length - 1\n        const { year, label } = timelines[index]\n\n        return (\n            <Handle\n                key={year}\n                {...handleProps}\n                dragging={dragging.toString()}\n                disabled={isDisabled}\n                style={{ zIndex: timelines.length - index }}\n            >\n                {isDisabled ?\n                    <DragIconContainer />\n                :\n                    <DragIconContainer border>\n                        <MaterialIcon color={'#0A6996'}>\n                                unfold_more\n                        </MaterialIcon>\n                    </DragIconContainer>\n                }\n                <div className='pl-2 trunctuate'>{timelineLabelFormat ? label : year}</div>\n                <div\n                    className='ml-auto dropdown show dropdown-toggle h-100'\n                    href='#'\n                    role=\"button\"\n                    data-toggle=\"dropdown\"\n                    id=\"dropdownMenuLink\"\n                    onMouseDown={this.cancelEvents}\n                    onClick={this.cancelEvents}\n                    onMouseUp={this.cancelEvents}\n                >\n                    <button\n                        className='btn btn-link h-100 w-100 d-flex align-items-center justify-content-center pl-2 pr-2'\n                        onMouseDown={this.cancelEvents}\n                        onClick={this.cancelEvents}\n                        onMouseUp={this.cancelEvents}\n                    >\n                        <MaterialIcon\n                            color={'#0A6996'}\n                            onMouseDown={this.cancelEvents}\n                            onClick={this.cancelEvents}\n                            onMouseUp={this.cancelEvents}\n                        >\n                            more_horiz\n                        </MaterialIcon>\n                    </button>\n                    <div\n                        className='dropdown-menu'\n                        aria-labelledby=\"dropdownMenuLink\"\n                    >\n                        <div\n                            className='dropdown-item'\n                            onMouseDown={e => {\n                                this.cancelEvents(e)\n\n                                this.setState({ timerangeEditModal: timelines[index] })\n                            }}\n                        >\n                            {requestTranslation('edit')}\n                        </div>\n                        {!isDisabled &&\n                            <div\n                                className='dropdown-item'\n                                onMouseDown={e => {\n                                    this.cancelEvents(e)\n                                    toggleConfirmationDialog({\n                                        title: requestTranslation('timelineDeleteTitle', timelineLabelFormat ? label : year),\n                                        text: requestTranslation('timelineDeleteSubtitle'),\n                                        callback: () => removeTimeline(timelines[index])\n                                    })\n                                }}\n                            >\n                                {_.upperFirst(_.toLower(requestTranslation('delete')))}\n                            </div>\n                        }\n                    </div>\n                </div>\n            </Handle>\n        )\n    }\n\n    savePreviousPosition = positions => this.setState({ oldPositions: positions })\n\n    // this is needed because we're preventing bubbling when clicking on the dropdown\n    // in the custom handle. Without this the handle would still be focused after selecting an action\n    // and clicking anywhere else after would move said handle.\n    blurHandles = () => {\n        const handles = document.getElementsByClassName('rc-slider-handle')\n\n        for (let i = 0; i < handles.length - 1; i++) {\n            handles[i].blur()\n        }\n    }\n\n    isMobileDevice() {\n        return (typeof window.orientation !== \"undefined\") || (navigator.userAgent.indexOf('IEMobile') !== -1);\n    }\n\n    render() {\n        const {\n            editTimeRangesPageOpen,\n            toggleConfirmationDialog,\n            timerangePageHandler,\n            timelines,\n            updateTimelinePositions,\n            updateTimerangePosition,\n            timelineLabelFormat,\n            updateRadar,\n            toggleLabelMode\n        } = this.props\n        const { oldPositions, updateTimerangeBlock } = this.state\n\n        if (!editTimeRangesPageOpen || !timelines.length) {\n            return null\n        }\n\n        return (\n            <Draggable handle=\".handle\">\n                <TimeRangeEditorContainer\n                    left={this.calculateModalDisplacement}\n                    className='d-flex flex-column'\n                    style={{ height: this.isMobileDevice() ? '40vh' : '75vh'}}\n                >\n                    <RangeStyles />\n                    <button className={'btn-close-modal'} onClick={timerangePageHandler}>\n                        <i className='material-icons'>close</i>\n                    </button>\n                    <Container className='flex-shrink-0 handle' style={{ cursor: 'move' }}>\n                        <h3 className='radar-widget-title mb-0'>{requestTranslation('timelineEditor')}</h3>\n                    </Container>\n                    <Container className='pt-5 h-100 d-flex flex-column' style={{ paddingBottom: '50px' }}>\n                        <Range\n                            key={timelines.length}\n                            min={RANGE_MIN}\n                            max={RANGE_MAX}\n                            value={timelines.map(({ position }) => position )}\n                            handle={this.renderHandles}\n                            onBeforeChange={this.savePreviousPosition}\n                            onChange={updateTimelinePositions}\n                            // https://github.com/ant-design/ant-design/issues/13628\n                            onAfterChange={newPositions => {\n                                this.setState({ updateTimerangeBlock: !updateTimerangeBlock }, () => {\n                                    updateTimerangePosition(newPositions, oldPositions)\n                                    this.blurHandles()\n                                })\n                            }}\n                            vertical={true}\n                            allowCross={false}\n                            pushable={RANGE_BOUNDARY}\n                            step={RANGE_MAX / 100}\n                            reverse\n                        />\n                        <button\n                            className='btn btn-outline-secondary w-100 flex-shrink-0 position-relative'\n                            style={{ top: '25px' }}\n                            onClick={() => this.setState({ timerangeEditModal: TIMELINE_TEMPLATE })}\n                        >\n                            {requestTranslation('addTimelineButton')}\n                        </button>\n                    </Container>\n                    <Container className='flex-shrink-0'>\n                        <Checkbox\n                            label={requestTranslation('toggleTimelineMode')}\n                            className='mb-0'\n                            checked={!!timelineLabelFormat}\n                            onChange={() =>\n                                toggleConfirmationDialog({\n                                    text: requestTranslation('timelineModeSubtitle'),\n                                    title: requestTranslation('timelineModeTitle'),\n                                    callback: () => {\n                                        toggleLabelMode()\n                                        updateRadar(false)\n                                    }\n                                })\n                            }\n                        />\n                    </Container>\n                    <Container className='d-flex flex-shrink-0'>\n                        <button\n                            className='btn btn-primary ml-auto'\n                            onClick={timerangePageHandler}\n                        >\n                            {requestTranslation('done')}\n                        </button>\n                    </Container>\n                    {this.renderTimeRangeModal()}\n                </TimeRangeEditorContainer>\n            </Draggable>\n        )\n    }\n}\n\nconst TimeRangeEditorContainer = styled.div`\n    z-index: ${Z_INDEX_MODAL};\n    background-color: #F2F4F4;\n    position: absolute;\n    top: 100px;\n    left: ${({ left }) => left};\n    width: 300px;\n    max-height: 900px;\n    box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n`\n\nconst DragIconContainer = styled.div`\n    width: 35px;\n    height: 100%;\n    border-right: ${ ({ border }) => border ? '1px solid #E9ECEC' : null };\n    display: flex;\n    align-items: center;\n    justify-content: center;\n`\n\nconst InputContainer = styled.div`\n    width: 125px;\n    height: 38px;\n    position: relative;\n    border: 1px solid #ccc;\n`\n\nconst YearInput = styled.input`\n    width: 100%;\n    height: 100%;\n    border: none;\n    display: flex;\n    align-items: center;\n    font-size: 18px;\n    letter-spacing: 15px;\n    font-weight: bold;\n    padding-left: 15px;\n    margin-right: -21px;\n`\n\nconst LabelInput = styled.input`\n    border: 1px solid #ccc;\n    height: 38px;\n    padding: 0 15px;\n    font-weight: medium;\n    font-size: 14px;\n    width: 100%;\n`\n\nconst RangeStyles = createGlobalStyle`\n    .trunctuate {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n    .rc-slider.rc-slider-vertical {\n        pointer-events: none;\n        width: 100%;\n        .rc-slider-handle {\n            pointer-events: auto;\n            width: 100%;\n            height: 35px;\n            border-radius: 5px;\n            border: 1px solid #E9ECEC;\n            display: flex;\n            align-items: center;\n            /*\n                https://github.com/react-component/slider/blob/master/src/Handle.jsx\n                line 90 needs to be fixed, they forgot to check if slider is vertical\n                when doing translateY. Submit a merge request\n            */\n            transform: translateY(-50%) !important;\n        }\n        .rc-slider-handle:focus {\n            outline: none;\n            box-shadow: none;\n        }\n        .rc-slider-track {\n            background-color: #C8C8C9;\n            left: 15px;\n        }\n        .rc-slider-rail, .rc-slider-step {\n            left: 15px;\n        }\n    }\n    .dropdown-toggle::after {\n        display: none;\n    }\n`\n","import { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport TimerangeEditorForm from '../components/TimerangeEditorForm'\nimport { timerangePageHandler, updateRadar } from '../actions/radarSettings'\nimport { toggleConfirmationDialog } from '../actions/confirmDialog'\nimport {\n    updateTimelinePositions,\n    removeTimeline,\n    addTimeline,\n    updateTimerange,\n    updateTimerangePosition,\n    toggleLabelMode\n} from '../actions/timelines'\n\nexport default connect(\n    state => {\n        const {\n            radarSettings: {\n                editTimeRangesPageOpen,\n                timelineLabelFormat\n            },\n            timelines\n        } = state\n\n        return {\n            editTimeRangesPageOpen,\n            timelines,\n            timelineLabelFormat\n        }\n    },\n    dispatch => bindActionCreators({\n        timerangePageHandler,\n        toggleConfirmationDialog,\n        updateTimelinePositions,\n        removeTimeline,\n        addTimeline,\n        updateTimerange,\n        updateTimerangePosition,\n        updateRadar,\n        toggleLabelMode\n    }, dispatch)\n)(TimerangeEditorForm)\n","import _ from 'lodash'\nimport React from 'react'\nimport styled from 'styled-components'\nimport { requestTranslation } from '@sangre-fp/i18n'\nimport { Checkbox, PhenomenonType, Tag } from '@sangre-fp/ui'\nimport { useTags } from '@sangre-fp/hooks'\n\nexport const Filters = props => {\n    const renderPhenomenaType = phenomenaType => {\n        const {groupType, id, alias, title, style} = phenomenaType\n        const {activeFilter, setActiveFilter} = props\n\n        return (\n            <StateContainer key={id}>\n                <PhenomenaState>\n                    <PhenomenonType type={alias} size={15} fill = {style ? style.color : null} />\n                </PhenomenaState>\n                <Checkbox\n                    label={groupType ? title : requestTranslation(alias)}\n                    value={id}\n                    checked={_.find(activeFilter, filter => filter.id === id)}\n                    onChange={() => setActiveFilter(phenomenaType)}\n                    className='phenomena-checkbox'\n                />\n            </StateContainer>\n        )\n    }\n\n    const renderTags = tags => {\n        const {language, activeTagFilter, setActiveTagFilter} = props\n\n        return (\n            <div>\n                {!!(_.isArray(tags) && tags.length) && (\n                    <div>\n                        <div className='d-flex flex-row flex-wrap'>\n                            {tags.map((tag, index) => {\n                                return (\n                                    <OptionsListItem key={index} style={{padding: '0 5px'}}>\n                                        <Tag\n                                            label={tag.label[language] || tag.label}\n                                            active={_.find(activeTagFilter, filter => filter === tag.uri)}\n                                            onClick={() => setActiveTagFilter(tag.uri)}\n                                        />\n                                    </OptionsListItem>\n                                )\n                            })}\n                        </div>\n                    </div>\n                )}\n            </div>\n        )\n    }\n\n    const renderLoading = () => <div>{requestTranslation('loading')}</div>\n\n    const {\n        filtersVisible,\n        phenomenaTypes,\n        toggleFilter,\n        resetFilters,\n        activeFilter,\n        activeTagFilter,\n        group,\n        hideInfoButton = false\n    } = props\n\n    const {tags} = useTags(group && group.id)\n    let [fpTags, groupTags] = tags\n    const activeFilters = [...activeFilter, ...activeTagFilter].length\n\n    return (\n        <div style={{ zIndex: 2 }}>\n            {!hideInfoButton && <div className='radar-nav' id='radar-nav-bottomleft' style={{zIndex: 1}}>\n                    <HubLink className='btn-round btn-lg d-flex align-items-center justify-content-center' target='_blank'\n                             rel='noopener noreferrer' href={requestTranslation('infoUrl')}>\n                        <span className='af-custom-info'/>\n                        <span className='sr-only'>Info</span>\n                    </HubLink>\n                </div> }\n            <FiltersButton\n              className={`btn-round btn-lg d-flex align-items-center justify-content-center ${activeFilters ? '' : 'inactive'}`}\n              onClick={toggleFilter}\n            >\n                <i className='material-icons' style={{transform: 'rotate(-90deg)', fontWeight: 'bold'}}>tune</i>\n                {!!activeFilters && (\n                  <ActiveFiltersIndicator\n                      className='d-flex justify-content-center align-items-center'>{activeFilters}</ActiveFiltersIndicator>\n                )}\n            </FiltersButton>\n            {filtersVisible && (\n                <LegendContainer className='pb-4'>\n                    <button className={'btn-close-modal'} onClick={toggleFilter}>\n                        <i className='material-icons'>close</i>\n                    </button>\n                    <Container>\n                        <h3 className='radar-widget-title mb-0'>{requestTranslation('filterPhenomena')}</h3>\n                    </Container>\n                    <Container style={{padding: '15px 10px'}}>\n                        <h5 className='mb-2 mt-1 ml-2'>{requestTranslation('filterByTag')}</h5>\n                        {renderTags([...groupTags, ...fpTags])}\n                    </Container>\n                    <Container>\n                        <h5 className='mb-3 mt-1'>{requestTranslation('filterByType')}</h5>\n                        {phenomenaTypes && phenomenaTypes.length ? _.map(phenomenaTypes, renderPhenomenaType) : renderLoading}\n                    </Container>\n                    <Container style={{borderBottom: 'none'}}>\n                        <button className='btn btn-outline-secondary w-100' onClick={resetFilters}>\n                            {requestTranslation('resetFilters')}\n                        </button>\n                    </Container>\n                </LegendContainer>\n            )}\n        </div>\n    )\n}\n\nconst OptionsListItem = styled.div`\n    padding: 0 12px;\n    display: flex;\n    align-items: center;\n    margin-top: 8px;\n`\n\nconst LegendContainer = styled.div`\n  width: 270px;\n  position: absolute;\n  background-color: #F2F4F4;\n  left: 37px;\n  bottom: 85px;\n  box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n`\n\nconst FiltersButton = styled.button`\n  position: absolute;\n  bottom: 65px;\n  left: 15px;\n  /*background-color: rgb(242,244,244) !important;*/\n\n  &.inactive {\n    background-color: transparent !important;\n    border: 2px solid white;\n\n    i {\n      color: white;\n    }\n  }\n`\n\nconst Container = styled.div`\n  padding: 15px 17px;\n  border-bottom: 1px solid #e9e9ea;\n  max-height: 260px;\n  overflow: auto;\n  ::-webkit-scrollbar {\n    width: 8px;\n    margin-right: 2px;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background: rgb(194, 208, 215);\n    border-radius: 20px;\n  }\n\n  ::-webkit-scrollbar-track {\n    background: white;\n    border-radius: 20px;\n  }\n`\n\nconst StateContainer = styled.div`\n  display: flex;\n  box-sizing: border-box;\n  min-height: 25px;\n  align-items: center;\n  position: relative;\n`\n\nconst PhenomenaState = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  position: absolute;\n  z-index: 10;\n  left: 27px;\n`\n\nconst HubLink = styled.a`\n  background-color: transparent;\n  border: 2px solid white;\n  &:hover {\n    background-color: transparent;\n  }\n`\n\nconst ActiveFiltersIndicator = styled.div`\n  width: 13px;\n  height: 13px;\n  background-color: white;\n  font-size: 9px;\n  position: absolute;\n  color: black;\n  top: 0px;\n  left: 0px;\n  border-radius: 50%;\n`\n","import { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { Filters } from '../components/Filters'\nimport { toggleFilter, setActiveFilter, resetFilters, setActiveTagFilter } from '../actions/radarSettings'\n\nexport default connect(\n    state => {\n        const {\n            phenomenaTypes,\n            filters: {\n                filtersVisible,\n                activeFilter,\n                activeTagFilter\n            },\n            radarSettings: {\n                group,\n                radarLanguage\n            }\n        } = state\n\n        return {\n            phenomenaTypes,\n            filtersVisible,\n            activeFilter,\n            activeTagFilter,\n            group,\n            language: radarLanguage\n        }\n    },\n    dispatch => bindActionCreators({\n        toggleFilter,\n        setActiveFilter,\n        resetFilters,\n        setActiveTagFilter\n    }, dispatch)\n)(Filters)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createGlobalStyle } from 'styled-components'\n\nexport const RadarStyles = createGlobalStyle` \n   html, body {\n      overflow: hidden !important;\n      font-family: 'L10' !important;\n  }\n  \n  .radar-widget-title {\n    font-size: 18px;\n  }\n  \n  .fp-wysiwyg .ql-editor p, \n  .fp-wysiwyg .ql-editor h1,\n  .fp-wysiwyg .ql-editor h2,\n  .fp-wysiwyg .ql-editor h3,\n  .fp-wysiwyg .ql-editor h4,\n  .fp-wysiwyg .ql-editor h5,\n  .fp-wysiwyg .ql-editor h6,\n  .fp-wysiwyg .ql-editor iframe,\n  .fp-wysiwyg .ql-editor img {\n    margin-bottom: 20px;\n  }\n`","import { initTranslations } from '@sangre-fp/i18n'\n\nconst localTranslations = {\n    pptxTimestamp: {\n      en: 'Timestamp',\n      fi: 'Ajankohta'\n    },\n    pptxCommentsTitle: {\n      en: 'Comments',\n      fi: 'Kommentit'\n    },\n    pptxCommentsText: {\n      en: count => `There are ${count === 0 ? 'no' : count } comment${count !== 1 ? 's' : ''} on this radar. To review them${count === 0 ? ' later': ''}, please log in to the platform and click this link: `,\n        fi: count => count === 0 ? 'Kartalle ei ole vielä käyttäjien kommentteja. Pääset katsomaan niitä myöhemmin kirjautumalla palveluun ja klikkaamalla tätä linkkiä: ' : `Kartalla on yhteensä ${count} käyttäjien kommentti${count > 1 ? 'a' : ''}. Pääset katsomaan niitä kirjautumalla palveluun ja klikkaamalla tätä linkkiä: `\n    },\n    download: {\n        en: 'Download',\n        fi: 'Lataa'\n    },\n    downloadPPTXDescription: {\n        en: 'Download radar summary in PowerPoint format.',\n        fi: 'Lataa yhteenveto PowerPoint-muodossa.'\n    },\n    pptxGenerateReport: {\n        en: 'Download summary (ppt)',\n        fi: 'Lataa yhteenveto (ppt)'\n    },\n    generatingPPTXError: {\n        en: `generating PowerPoint`,\n        fi: `raporttia luodaan`\n    },\n    pptxNotVoted: {\n      en: 'Not voted',\n      fi: 'Ei ääniä'\n    },\n    pptxReportBy: {\n      en: 'by',\n      fi: '-'\n    },\n    pptxSectorListTitle: {\n      en: 'List of Sectors',\n      fi: 'Sektorit'\n    },\n    pptxRatedContent: {\n        en: 'Rated Content',\n        fi: 'Arvioitu sisältö'\n    },\n    pptxReportTitle: {\n        en: 'Content Summary',\n        fi: 'Yhteenveto'\n    },\n    pptxSector: {\n        en: 'Sector',\n        fi: 'Sektori'\n    },\n    pptxSectorContent: {\n        en: 'Content in the Sector',\n        fi: 'Sektorin sisältö'\n    },\n    pptxTopVotedContent: {\n        en: 'Top-Voted Content',\n        fi: 'Äänestetyt ilmiöt'\n    },\n    timelineModeTitle: {\n        en: `Please confirm you want to switch the label format`,\n        fi: `Haluatko, että haluat muuttaa aikajanan formaattia`\n    },\n    timelineModeSubtitle: {\n        en: ``,\n        fi: ``\n    },\n    timelineDeleteTitle: {\n        en: year => `Delete ${year}?`,\n        fi: year => `Poista ${year}?`\n    },\n    timelineDeleteSubtitle: {\n        en: `You're about to remove this time range. The content on the radar will not be removed, it will be re-organised according to the remaining ranges. Do you want to continue??`,\n        fi: `Olet poistamassa aikakehää. Sen sisältöä ei poisteta, vaan se järjestetään uudelleen jäljelle jäävien kehien mukaisesti. Haluatko jatkaa?`\n    },\n    addTimelineButton: {\n        en: `+ ADD NEW RANGE`,\n        fi: `+ LISÄÄ UUSI KEHÄ`\n    },\n    deleteSignalConfirmation: {\n        en: 'Are you sure?',\n        fi: 'Oletko varma?'\n    },\n    description: {\n        en: `Description`,\n        fi: `Kuvaus`\n    },\n    year: {\n        en: `Year`,\n        fi: `Vuosi`\n    },\n    add: {\n        en: `Add`,\n        fi: `Lisää`\n    },\n    timerangeBoundaryError: {\n        en: ({ firstYear, lastYear }) => `Please enter a valid input between ${firstYear} and ${lastYear}`,\n        fi: ({ firstYear, lastYear }) => `Syötä vuosi väliltä  ${firstYear} ja ${lastYear}`,\n    },\n    timerangeSpaceError: {\n        en: ({ previousYear, nextYear }) => `There's not enough space between ${previousYear} and ${nextYear} on your timerange. Please adjust your time ranges`,\n        fi: ({ previousYear, nextYear }) => `Vuosien ${previousYear} ja ${nextYear} välillä ei ole tilaa uudelle kehälle. Tee väliin tilaa (vuosilukuina) ja yritä uudestaan`,\n    },\n    timerangeAmountError: {\n        en: `You have reached the maxiumum amount of timeranges, please remove a timerange before trying to add a new one.`,\n        fi: `Kartalle ei mahdu useampia kehiä. Voit poistaa yhden lisätäksesi uuden tai nimetä nykyiset kehät uudelleen.`\n    },\n    timerangeError: {\n        en: `Please enter a valid input`,\n        fi: `Syötä vuosiluku`\n    },\n    timerangeSmallerYearError: {\n        en: nextYear => `Please enter a year smaller than ${nextYear}`,\n        fi: nextYear => `Syötä vuosiluku ennen vuotta ${nextYear}`,\n    },\n    timerangeLargerYearError: {\n        en: previousYear => `Please enter a year larger than ${previousYear}`,\n        fi: previousYear => `Syötä vuosiluku ${previousYear} jälkeen`,\n    },\n    timerangeCurrentYearError: {\n        en: currentYear => `Please enter a year after ${currentYear}`,\n        fi: currentYear => `Syötä vuosiluku ${currentYear} jälkeen`,\n    },\n    timelineEditor: {\n        en: `Timerange editor`,\n        fi: `Aikajakson muokkaus`\n    },\n    updatingTimelinesPositionError: {\n        en: `updating your timerange's position`,\n        fi: `päivitetään aikajakson sijaintia`\n    },\n    removingTimelineError: {\n        en: `removing your timerange`,\n        fi: `poistetaan aikajakso`\n    },\n    addingTimelineError: {\n        en: `adding your timerange`,\n        fi: `lisätään aikajakso`\n    },\n    timerangeExistsError: {\n        en: `This timerange already exists!`,\n        fi: `Tämä aikajakso on jo olemassa!`\n    },\n    label: {\n        en: `Label`,\n        fi: `Kehän nimi`\n    },\n    typeLabel: {\n        en: 'Type label',\n        fi: 'Tyypin nimi'\n    },\n    labelPosition: {\n        en: 'Label position',\n        fi: 'Kehän nimen sijainti'\n    },\n    afterLabel: {\n        en: previousLabel => `Below ${previousLabel}`,\n        fi: previousLabel => `Alapuolelle ${previousLabel}`\n    },\n    consecutiveYearError: {\n        en: 'The years behind these labels are consectuive, please switch back to year format and adjust for space before continuing',\n        fi: 'Vuosileimat kehien nimien taustalla ovat peräkkäiset. Palauta aikajana vuosi-formaattiin ja tee tilaa ennen kuin jatkat.'\n    },\n    filterPhenomena: {\n        en: `Filter content`,\n        fi: `Suodata sisältö`\n    },\n    goToHub: {\n        en: 'Open the hub',\n        fi: 'Avaa Hub'\n    },\n    moreInfoHub: {\n        en: 'For more info go to the hub',\n        fi: 'Lisää tietoa löydät HUBista (englanniksi)'\n    },\n    toggleTimelineMode: {\n        en: `Use text labels instead of years`,\n        fi: `Käytä tekstiä vuosiluvun sijaan`\n    },\n    done: {\n        en: `DONE`,\n        fi: `VALMIS`\n    },\n    confirm: {\n        en: `CONFIRM`,\n        fi: `MUOKKAA`\n    },\n    cancel: {\n        en: `CANCEL`,\n        fi: `PERUUTA`\n    },\n    filterByType: {\n        en: `BY TYPE`,\n        fi: `TYYPIT`\n    },\n    filterByTag: {\n        en: `BY TAG`,\n        fi: `TAGIT`\n    },\n    openPublicLink: {\n        en: `SHOW THE SHARED LINK`,\n        fi: `NÄYTÄ JAETTAVA LINKKI`\n    },\n    createPublicLink: {\n        en: `CREATE A SHARED LINK`,\n        fi: `LUO JAETTAVA LINKKI`\n    },\n    publicLink: {\n        en: `Shared Link`,\n        fi: `Jaettava linkki`\n    },\n    publicLinkNote: {\n        en: `Copy the link and share it in your network. Anyone with the link can access the radar and collaborate. For data privacy reasons, we recommend deleting the shared link when it’s not used anymore.`,\n        fi: `Kopioi linkki, ja jaa se verkostossasi. Otathan huomioon, että linkkiä klikkaamalla tälle kartalle pääsee kuka tahansa. Tietoturvasyistä suosittelemme jaettavan linkin poistamista, kun sitä ei enää tarvita.`\n    },\n    regeneratePublicLink: {\n        en: `REGENERATE LINK`,\n        fi: `LUO UUSI LINKKI`\n    },\n    deletePublicLink: {\n        en: `DELETE THE SHARED LINK`,\n        fi: `POISTA JAETTAVA LINKKI`\n    },\n    publicLinkURL: {\n        en: `Shared link: `,\n        fi: `Jaettava linkki:`\n    },\n    regeneratePublicLinkNote: {\n        en: `Note! Regenerating the link will deactivate the current link.`,\n        fi: `Huom. Uuden linkin luonti poistaa nykyisen linkin toiminnasta.`\n    },\n    deletePublicLinkBtn: {\n        en: `DELETE THE CURRENT SHARED LINK`,\n        fi: `POISTA NYKYINEN JAETTU LINKKI`\n    },\n    sharePublicLinkConfirmation: {\n        en: `Are you sure you want to regenerate a shared link?`,\n        fi: `Haluatko varmasti luoda uuden jaettavan linkin?`\n    },\n    sharePublicLinkConfirmationNote: {\n        en: `The current link will stop working when you create a new one.`,\n        fi: `Nykyinen linkki lakkaa toimimasta, kun luot uuden.`\n    },\n    deletePublicLinkConfirmation: {\n        en: `Are you sure you want to delete the shared link?`,\n        fi: `Haluatko varmasti poistaa jaettavan linkin?`,        \n    },\n    deletePublicLinkConfirmationNote: {\n        en: `When you delete the shared link, the radar remains visible to the users who have been granted access to the radar in the user management.`,\n        fi: `Poistettuasi jaetun linkin tämä kartta näkyy vain henkilöille, joille on käyttäjähallinnassa annettu sille pääsy.`\n    },\n    copyToClipboard: {\n        en: `Copy to clipboard`,\n        fi: `Kopioi leikepöydälle`\n    },\n    publicLinkCopied: {\n        en: `Link copied.`,\n        fi: `Linkki kopioitu.`\n    },\n    shareRadarFromUsrMngmt: {\n        en: `You can invite users to this radar from the User management, or by creating a Shared link and share that in your network. If you choose to create a Shared link, please note, that anyone with the link can access the radar and collaborate on it.`,\n        fi: `Voit kutsua kollegasi kartalle käyttäjähallinnasta tai tehdä jaettavan linkin ja jakaa sen verkostossasi. Huomaathan, että jakamaasi linkkiä klikkaamalla kuka tahansa voi päästä kartalle ja osallistua työskentelyyn.` \n    },\n    publicLinkExisted : {\n        en: `A shared link already exists for this radar. Click below to view it.`,\n        fi: `Tälle kartalle on tehty jaettava linkki. Voit katsoa sen alta.`\n    },\n    checkPublicLinkAlreadyExisted: {\n        en:`A shared link already exists for this radar. Click below to view it.`,\n        fi:`Tälle kartalle on tehty jaettava linkki. Voit katsoa sen alta.`\n    },\n    goToManagement: {\n        en:`OPEN THE USER MANAGEMENT`,\n        fi:`AVAA KÄYTTÄJÄHALLINTA`\n    },\n    ok: {\n        en:`OK`,\n        fi:`OK`\n    },\n    sharedLinkDeletedNote: {\n        en:`The shared link is now deleted from this radar.`,\n        fi:`Jaettava linkki on nyt poistettu tältä kartalta.`\n    }\n}\n\ninitTranslations(localTranslations);\n","import './polyfills'\nimport 'react-app-polyfill/ie11'\nimport 'core-js'\nimport 'url-search-params-polyfill'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport store from './configureStore'\nimport { RadarPage } from './containers'\nimport * as serviceWorker from './serviceWorker'\nimport { GlobalStyles } from '@sangre-fp/ui'\nimport { RadarStyles } from './styles'\nimport { ToastContainer } from 'react-toastify'\n\nimport { startSession } from '@sangre-fp/connectors/session'\nimport './translations'\n\n// package styles\nimport 'react-select/dist/react-select.css'\nimport 'react-quill/dist/quill.snow.css'\nimport 'react-toggle/style.css'\nimport 'react-toastify/dist/ReactToastify.css'\nimport 'rc-slider/dist/rc-slider.css'\nimport 'rc-tooltip/assets/bootstrap.css'\n\nconst renderApp = (returnUri, radarLogoLinkDisabled) => {\n    return (\n        <Provider store={store}>\n            <GlobalStyles />\n            <RadarStyles />\n            <ToastContainer\n                toastClassName='fp-toast'\n                position='top-left'\n                progressClassName='toast-progress'\n            />\n            <RadarPage returnUri={returnUri} radarLogoLinkDisabled={radarLogoLinkDisabled} />\n        </Provider>\n    )\n}\n\nconst appElement = document.getElementById('fp-radar-page')\nstartSession(window.location.origin).then(() => {\n    ReactDOM.render(\n        renderApp(\n            appElement.getAttribute('data-return-uri'),\n            appElement.getAttribute('data-rlld') === '1'\n        ), appElement)\n})\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import axios from 'axios'\n// import { NEWS_FEED_API_URL } from '../../env'\nimport { getSessionToken } from '../session'\n\nconst NEWS_FEED_API_URL = process.env.REACT_APP_NEWS_FEED_API_URL\n\nconst GET = 'GET'\nconst POST = 'POST'\nconst DELETE = 'DELETE'\nconst PUT = 'PUT' // eslint-disable-line no-unused-vars\nconst PATCH = 'PATCH' // eslint-disable-line no-unused-vars\n\nexport async function httpRequest(method, path, payload = null) {\n    return axios({\n        method,\n        url: `${NEWS_FEED_API_URL}/${path}`,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${getSessionToken()}`\n        },\n        withCredentials: true,\n        data: payload || null\n    }).then(res => res.data)\n}\n\n/**\n * @param {Number} groupId Group Id\n * @param {string} url RSS URL\n * @param {string} phenomenonUuid Phenomenon to which RSS URL is added\n * @return {Promise<string>} Returns uuid of the feed\n */\n\nconst newsFeedApi = {\n    addNewsFeed: async (groupId, url, phenomenonUuid) => {\n        // Not sure if groupId is passed as a string\n        if (isNaN(parseInt(groupId))) {\n            return false\n        }\n        const path = Number(groupId) === 0 ? 'feed' : `${groupId}/feed`\n        return httpRequest(POST, path, {\n            phenomenon_uuid: phenomenonUuid,\n            url\n        })\n    },\n    /**\n     * @param  {Number} groupId Group Id\n     * @param  {string} feedUuid Feed's uuid\n     * @param  {string} phenomenonUuid Phenomenon's uuid\n     * @return {Promise<Boolean>} Success\n     */\n    removeNewsFeed: async (groupId, feedUuid, phenomenonUuid) => {\n        if (isNaN(parseInt(groupId))) {\n            return false\n        }\n        const path = Number(groupId) === 0 ? `${feedUuid}/${phenomenonUuid}` : `${groupId}/${feedUuid}/${phenomenonUuid}`\n        return httpRequest(DELETE, path).then(ok => ok)\n    },\n    /**\n     * @param  {Number} groupId Group Id\n     * @param {string} phenomenonUuid Phenomenon's uuid\n     * @return {Promise<{id: string, title: string}[]>} Feed object array\n     */\n    getNewsFeeds: async (groupId, phenomenonUuid) => {\n        return httpRequest(GET, `${groupId}/news-feeds/${phenomenonUuid}`)\n    }\n}\n\nexport default newsFeedApi\n","import radarDataApi from '../radar-data-api'\nimport { getDocument, upsertDocument, archiveDocument } from '../content-service-api'\nimport newsFeedApi from '../news-feed-api'\nimport { getPhenomena } from '../search-api'\nimport { map, find, filter } from 'lodash-es'\n\nconst mergePhenomena = (phenomena, phenomenonDocuments) =>\n    phenomena\n        .filter(phenomenon => Boolean(phenomenon.id))\n        .map(phenomenon => {\n            const searchApiResult = find(phenomenonDocuments, result => phenomenon.id === result.id)\n\n            return searchApiResult\n                ? {\n                    ...phenomenon,\n                    ...searchApiResult\n                }\n                : null\n        })\n        .filter(Boolean)\n\nexport const getRadarPhenomena = async (radarId, groupId) => {\n    const { data: radarDataApiData } = await radarDataApi.getRadar(radarId)\n\n    const uuids = map(radarDataApiData.phenomena, ({ id }) => id)\n        .filter(Boolean)\n\n    const { result: phenomenonDocuments = [] } = uuids.length\n        ? await getPhenomena({ phenomena: uuids, groups: [0, Number(groupId)], size: uuids.length, include_archived: true })\n        : {}\n\n    let phenomena = mergePhenomena(radarDataApiData.phenomena, phenomenonDocuments)\n\n    return {\n        ...radarDataApiData,\n        phenomena\n    }\n}\n\nexport const NEWSFEED_ERROR_PARTIAL = 'NEWSFEED_ERROR_PARTIAL'\nexport const NEWSFEED_ERROR = 'NEWSFEED_ERROR'\nexport const NEWSFEED_SUCCESS = 'NEWSFEED_SUCCESS'\n\nexport const archivePhenomenon = async (id, group) => await archiveDocument({ type: 'phenomenon', id, group })\n\nexport const storePhenomenon = async (phenomenon) => await upsertDocument({type: 'phenomenon', ...phenomenon})\n\nexport const storeNewsFeeds = async (phenomenon, newsFeedChanges) => {\n    const { addedNewsFeeds, deletedNewsFeeds } = newsFeedChanges\n\n    const operations = {\n        add: Promise.all(map(\n            addedNewsFeeds,\n            newsFeed => newsFeedApi.addNewsFeed(phenomenon.groups[0], newsFeed.title, phenomenon.id)\n        )),\n        delete: await Promise.all(map(\n            deletedNewsFeeds,\n            newsFeed => newsFeedApi.removeNewsFeed(phenomenon.groups[0], newsFeed.id, phenomenon.id)\n        ))\n    }\n\n    const added = await operations.add\n\n    const failedNewsFeedTitles = filter(\n        map(added, (newsFeed, index) => !newsFeed ? addedNewsFeeds[index].title : null),\n        title => !!title\n    )\n\n    if (failedNewsFeedTitles.length) {\n        return {\n            status: NEWSFEED_ERROR_PARTIAL,\n            failedNewsFeedTitles\n        }\n    }\n\n    return {\n        status: NEWSFEED_SUCCESS\n    }\n}\n\nexport const storePhenomenonWithNewsFeeds = async (phenomenon, newsFeedChanges) => {\n    const storedPhenomenon = await storePhenomenon(phenomenon)\n\n    try {\n        const newsFeedStatus = await storeNewsFeeds(storedPhenomenon, newsFeedChanges)\n\n        return {\n            ...newsFeedStatus,\n            storedPhenomenon\n        }\n    } catch (error) {\n        return {\n            status: NEWSFEED_ERROR,\n            error,\n            storedPhenomenon\n        }\n    }\n}\n\nexport const getPhenomenonByUUIDAndGroup = async (id, group) => {\n  const phenomenon = await getDocument({ group, id, type: 'phenomenon' })\n\n  try {\n      const uuids = phenomenon.content.related_phenomena\n      let relatedPhenomena = []\n      const newsFeeds = await newsFeedApi.getNewsFeeds(group, id) || []\n      if (Array.isArray(uuids) && uuids.length > 0) {\n        const result = await getPhenomena({ phenomena: uuids, groups: [0, Number(group)], size: uuids.length })\n        relatedPhenomena = result.result || []\n      }\n\n      return {\n        ...phenomenon,\n        newsFeeds,\n        relatedPhenomena\n      }\n  } catch (error) {\n    return { error }\n  }\n}\n\nexport function transformFromLegacy({ uuid, language, group, title, shortTitle, lead, video, image, imageFile, imageUrl, videoText, phenomenonType, body, relatedPhenomena, feedTag, timing, links }) {\n  return {\n    id: uuid,\n    language,\n    group: Number(group),\n    content: {\n      title,\n      short_title: shortTitle,\n      summary: lead,\n      body,\n      type: phenomenonType,\n      media: { video: video || '', image: imageUrl || '', text: videoText  || '' },\n      related_phenomena: relatedPhenomena.map(({ id }) => id),\n      feed_tags: Array.isArray(feedTag) ? feedTag.map(({ id }) => id) : [],\n      time_range: timing,\n      links: Array.isArray(links) ? links.map(({ value }) =>({ url: value})) : []\n    },\n    _upload: {\n      image,\n      imageFile,\n      imageUrl\n    }\n  }\n}\n\nexport function transformToLegacy (\n  {\n    id: uuid,\n    language,\n    groups,\n    content: {\n      title = '',\n      short_title: shortTitle = '',\n      summary: lead = '',\n      body = '',\n      type,\n      media: { video: videoUrl, image: imageUrl, text: mediaText } = {},\n      related_phenomena: relatedPhenomena = [],\n      feed_tags = [],\n      time_range: timing = {},\n      links\n    } = {},\n    ...other\n  }\n) {\n\n  return {\n    uuid,\n    language,\n    group: Array.isArray(groups) ? groups[0] : null,\n    title,\n    shortTitle,\n    lead,\n    phenomenonType: type,\n    videoUrl,\n    imageUrl,\n    mediaText,\n    body,\n    relatedPhenomena,\n    feedTag: feed_tags.map(id => ({ id, title: '...' })),\n    timing,\n    links: Array.isArray(links) ? links.map(({ url }) => ({ value: url })) : [],\n    ...other\n  }\n}","import axios from 'axios'\nimport { getSessionToken } from '../session'\nconst CONTENT_SERVICE_API_URL = process.env.REACT_APP_CONTENT_SERVICE_API_URL\n\nconst GET = 'GET'\nconst POST = 'POST'\nconst DELETE = 'DELETE'\nconst PATCH = 'PATCH'\n\nexport const TYPE_PHENOMENON='phenomenon'\nexport const TYPE_SIGNAL='signal'\n\nasync function httpRequest(method, path, payload = null) {\n  return axios({\n    method,\n    url: `${CONTENT_SERVICE_API_URL}/${path}`,\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${getSessionToken()}`\n    },\n    withCredentials: true,\n    data: payload || null\n  }).then(({ data }) => data)\n}\n\nexport async function getSchema({ group = 0, type }) {\n  return httpRequest(GET, `schema/${group}/${type}`)\n}\n\nexport async function getDocument({ group = 0, type, id }) {\n  return httpRequest (GET, `doc/${group}/${type}/${id}`)\n}\n\nexport async function archiveDocument({ group = 0, type, id }) {\n  return httpRequest (DELETE, `doc/${group}/${type}/${id}`)\n}\n\nexport async function getDocuments({ type, ids, fields = null, sortColumns = null }) {\n  return httpRequest(POST, `doc/find/${type}`, { ids, fields, sortColumns })\n}\n\nexport async function upsertDocument({ group, type, ...doc }) {\n  if (doc.id) {\n    return httpRequest(PATCH, `doc/${group}/${type}`, {groups: [Number(group)], type, ...doc})\n  } else {\n    return httpRequest(POST, `doc/${group}/${type}`, {groups: [Number(group)], type, ...doc})\n  }\n}\n","import axios from 'axios'\nimport { getSessionToken } from '../session'\n\nconst SEARCH_API_URL = process.env.REACT_APP_SEARCH_API_URL\n\n/*\n Fields in document: short_name,image_url,archived,uuid,ingress_body,original_id,language,\n related_phenomena,title,group,state,visibility,video_url,media_text,description,body,feed_tag,\n media_body_text\n */\n\nasync function httpPostRequest(type, payload = null) {\n    return axios({\n        method: 'post',\n        url: `${SEARCH_API_URL}/${type}`,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${getSessionToken()}`\n        },\n        data: payload\n    }).then(res => res.data)\n}\n\n// eslint-disable-next-line max-params\nexport async function getPhenomena({ phenomena = [], query, groups = [0], page = 0, size = 10, language = null, enhanced = 1, tags = [], types = [], time_min = null, time_max = null, include_archived = false }) {\n    return httpPostRequest('phenomenon', {\n      phenomena,\n      query,\n      groups,\n      page,\n      size,\n      language,\n      enhanced,\n      include_archived,\n      // TODO: Implement passing properties in this structure\n      tags: tags.length > 0 ? { 'fp:docs/props/has': tags } : {},\n      types,\n      time_min,\n      time_max\n    }).then(({result, ...rest}) => ({\n      // TODO: Replace group in using function with groups property\n      // TODO: Start to use separate properties for tags\n      result: result.map(({ groups, ...doc }) => ({\n        groups,\n        group: groups.length > 0 && groups[0],\n        ...doc,\n        tags: Object.keys(doc).reduce((tags, key) => /^tags_/.test(key) ? [...tags, ...doc[key]] : tags, [])\n      })),\n      ...rest\n    }))\n}\n\n// eslint-disable-next-line max-params\nexport async function getSignals(query, groups, page = 0, size = 10, radar_uuid, enhanced = 1) {\n    return httpPostRequest('signal', {\n        query,\n        page,\n        size,\n        groups,\n        radar_uuid,\n        enhanced\n    })\n}\n\nexport async function getRadars(query, language, empty = false, fields = ['id', 'uuid', 'content.title', 'content.sectors.id', 'content.sectors.title', 'content.preview_image'], groups = [0], page = 0, size = 3, template = true, enhanced = 1) {\n  return httpPostRequest('radar', {\n    query,\n    empty,\n    language,\n    fields,\n    page,\n    size,\n    groups,\n    template,\n    enhanced\n  })\n}","import { toLower } from 'lodash-es'\n\nexport const normalizePhenomenon = (phenomenon) => {\n    const {\n        x_offset,\n        phenomenon_uuid,\n        sector_id,\n        ...rest\n    } = phenomenon\n\n    return {\n        id: toLower(phenomenon_uuid),\n        xOffset: x_offset,\n        sectorId: sector_id,\n        ...rest\n    }\n}\n\nexport const normalizePhenomenonInput = (phenomenonInput) => {\n    const {\n        id,\n        sectorId,\n        time,\n        xOffset,\n        radarId,\n        version,\n        timing\n    } = phenomenonInput\n\n    return {\n        radar_id: Number(radarId),\n        phenomenon_uuid: id,\n        sector_id: sectorId,\n        time: parseFloat(time.toFixed(4)),\n        x_offset: parseFloat(xOffset.toFixed(4)),\n        version,\n        timing\n    }\n}\n","import axios from 'axios'\n// import { RADAR_DATA_API_URL } from '../../env'\nimport { getSessionToken } from '../session'\nimport { normalizePhenomenon, normalizePhenomenonInput } from './normalize'\n\nconst RADAR_DATA_API_URL = process.env.REACT_APP_RADAR_DATA_API_URL\n\nconst GET = 'GET'\nconst POST = 'POST'\nconst DELETE = 'DELETE'\nconst PATCH = 'PATCH'\n\nasync function httpRequest(method, path, payload = null) {\n    return axios({\n        method,\n        url: `${RADAR_DATA_API_URL}/${path}`,\n        headers: {\n            // 'X-CSRF-Token': getCsrfToken(),\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${getSessionToken()}`\n        },\n        withCredentials: true,\n        data: payload || null\n    })\n}\n\n// TODO: move normalize functions to the api consumers\nconst radarDataApi = {\n    getRadar: async (radarId) => {\n        return httpRequest(GET, `${radarId}`)\n            .then(({ data, ...result }) => {\n                const { phenomena, ...restData } = data\n\n                return {\n                    data: {\n                        phenomena: phenomena.map(normalizePhenomenon),\n                        ...restData\n                    },\n                    ...result\n                }\n            })\n    },\n    createPhenomenon: async (radarId, phenomenonData) => {\n        return httpRequest(POST, `${radarId}/phenomenon`, normalizePhenomenonInput(phenomenonData))\n            .then(({ data, ...result }) => {\n                const { phenomenon, ...restData } = data\n\n                return {\n                    data: {\n                        phenomenon: normalizePhenomenon(phenomenon),\n                        ...restData\n                    },\n                    ...result\n                }\n            })\n    },\n    updatePhenomenon: async (radarId, phenomenonData) => {\n        return httpRequest(PATCH, `${radarId}/phenomenon`, normalizePhenomenonInput(phenomenonData))\n            .then(({ data, ...result }) => {\n                const { phenomenon, ...restData } = data\n\n                return {\n                    data: {\n                        phenomenon: normalizePhenomenon(phenomenon),\n                        ...restData\n                    },\n                    ...result\n                }\n            })\n    },\n    deletePhenomenon: async (radarId, phenomenonData) => {\n        return httpRequest(DELETE, `${radarId}/phenomenon`, phenomenonData)\n    },\n    // time ranges\n    addRadarTimeRange: async (radarId, data) => {\n        return httpRequest(POST, `${radarId}/time-range`, data)\n    },\n    updateRadarTimeRange: async (radarId, data) => {\n        return httpRequest(PATCH, `${radarId}/time-range`, data)\n    },\n    deleteRadarTimeRange: async (radarId, data) => {\n        return httpRequest(DELETE, `${radarId}/time-range`, data)\n    },\n    // sectors\n    createSector: async (radarId, sectorData) => {\n        return httpRequest(POST, `${radarId}/sector`, sectorData)\n    },\n    updateSector: async (radarId, sectorData) => {\n        return httpRequest(PATCH, `${radarId}/sector`, sectorData)\n    },\n    deleteSector: async (radarId, sectorId, sectorData) => {\n        return httpRequest(DELETE, `${radarId}/sector`, sectorData)\n    }\n}\n\nexport default radarDataApi\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ReactModal__Content\":\"PublicLink_ReactModal__Content__3WOSB\",\"Modal__Title\":\"PublicLink_Modal__Title__2Cqix\",\"SavePublicLink__Container\":\"PublicLink_SavePublicLink__Container__hWhdN\",\"RegenerateBtn\":\"PublicLink_RegenerateBtn__3vqov\"};","import axios from 'axios'\n// import { DRUPAL_API_URL, PUBLIC_URL } from './env'\n\nconst DRUPAL_API_URL = process.env.REACT_APP_DRUPAL_API_URL\nconst PUBLIC_URL = process.env.REACT_APP_PUBLIC_URL\n\n// using axios built in interceptors to refresh the page if the user is either unauthorized\n// or his session has run out. Drupal will automatically log the user out on refresh\naxios.interceptors.response.use(null, error => {\n    if (error.response && (error.response.status === 401 || error.response.status === 403)) {\n        if (!(process.env.NODE_ENV === 'development')) {\n            window.location.replace(PUBLIC_URL)\n        }\n    }\n\n    return Promise.reject(error)\n})\n\nexport function getSessionToken() {\n    return sessionStorage.getItem('fp-session-token')\n}\n\nexport function getCsrfToken() {\n    return sessionStorage.getItem('fp-csrf-token')\n}\n\nexport function getUserId() {\n    return sessionStorage.getItem('fp-user-id')\n}\n\nexport function getUsername() {\n    return sessionStorage.getItem('fp-username')\n}\n\nexport function clearSession() {\n    sessionStorage.clear()\n    return true\n}\n\nexport function getUserRoles() {\n    const roles = sessionStorage.getItem('fp-user-roles')\n\n    if (roles && roles.length) {\n        return JSON.parse(roles)[0]\n    }\n\n    return false\n}\n\n/**\n * Fetch csrf & session token & user id and start session storing data to sessionStorage\n * @returns {Promise<Boolean>} Returns true\n */\nexport async function startSession() {\n    return axios({\n        method: 'get',\n        url: `${DRUPAL_API_URL}/session/token`,\n        withCredentials: true\n    }).then(csrfRes => {\n        const csrfToken = csrfRes.data['X-CSRF-Token']\n        sessionStorage.setItem('fp-csrf-token', csrfToken)\n        return axios({\n            method: 'get',\n            url: `${DRUPAL_API_URL}/fp-session-token`,\n            withCredentials: true\n        }).then(tokenRes => {\n            const token = tokenRes.data.token\n            const userId = Number(tokenRes.data.user_id)\n            const roles = tokenRes.data.accountDrupalRoles\n            const username = tokenRes.data.user_name\n\n            sessionStorage.setItem('fp-session-token', token)\n            sessionStorage.setItem('fp-user-id', userId)\n            sessionStorage.setItem('fp-username', username)\n            sessionStorage.setItem('fp-user-roles', JSON.stringify(roles))\n            return true\n        })\n    })\n}\n","import { toLower, filter, sortBy } from 'lodash-es'\n\nexport const normalizeRadar = radar => {\n    const {\n        hide_users,\n        title,\n        map_intro,\n        language,\n        axis_x_title,\n        axis_x_max,\n        axis_x_min,\n        axis_y_title,\n        axis_y_max,\n        axis_y_min,\n        four_fields_top_left,\n        four_fields_top_right,\n        four_fields_bottom_left,\n        four_fields_bottom_right,\n        enable_issue_rating,\n        allow_issue_rating,\n        show_freewall,\n        enable_issue_commenting,\n        allow_comment_thumbing,\n        logo_image,\n        display_halo_when_rating,\n        uuid,\n        signal_tool_enabled,\n        owner_id,\n        enable_url_login,\n        url_login_expire,\n        url_login_link,\n        radar_template,\n        title_logo,\n        timeline_label_format,\n        ...rest\n    } = radar\n\n    return {\n        hideUsersFromTrial: hide_users,\n        radarName: title,\n        mapIntro: map_intro,\n        radarLanguage: language,\n        axisXTitle: axis_x_title,\n        axisXMax: axis_x_max,\n        axisXMin: axis_x_min,\n        axisYTitle: axis_y_title,\n        axisYMax: axis_y_max,\n        axisYMin: axis_y_min,\n        fourFieldsTopLeft: four_fields_top_left,\n        fourFieldsTopRight: four_fields_top_right,\n        fourFieldsBottomLeft: four_fields_bottom_left,\n        fourFieldsBottomRight: four_fields_bottom_right,\n        displayHaloWhenRating: display_halo_when_rating,\n        commentsOn: enable_issue_commenting === 'Yes',\n        likingOn: allow_comment_thumbing === 'Yes',\n        ratingsOn: enable_issue_rating === 'Yes',\n        votingOn: allow_issue_rating === 'Yes',\n        discussionOn: show_freewall === 'Yes',\n        radarImage: logo_image,\n        uuid,\n        signalToolEnabled: signal_tool_enabled,\n        ownerId: owner_id,\n        enableUrlLogin: enable_url_login,\n        urlLoginExpire: url_login_expire,\n        urlLoginLink: url_login_link,\n        isRadarTemplate: !!radar_template,\n        titleLogo: title_logo,\n        timelineLabelFormat: timeline_label_format,\n        ...rest\n    }\n}\n\nconst normalizeRadarInput = (radarSettings) => {\n    const {\n        radarName,\n        mapIntro,\n        hideUsersFromTrial,\n        phenomenaSet,\n        ratingsOn = false,\n        commentsOn = false,\n        likingOn = false,\n        discussionOn = false,\n        votingOn = false,\n        radarImage = null,\n        radarTitleImage = null,\n        axisXTitle = null,\n        axisXMax = null,\n        axisXMin = null,\n        axisYTitle = null,\n        axisYMax = null,\n        axisYMin = null,\n        fourFieldsTopLeft = null,\n        fourFieldsTopRight = null,\n        fourFieldsBottomLeft = null,\n        fourFieldsBottomRight = null,\n        displayHaloWhenRating = false,\n        timelineLabelFormat = false\n    } = radarSettings\n\n    return {\n        title: radarName,\n        map_intro: mapIntro,\n        hide_users: hideUsersFromTrial ? 1 : 0,\n        template_id: phenomenaSet,\n        allow_issue_rating: votingOn ? 'Yes' : 'No',\n        enable_issue_rating: ratingsOn ? 'Yes' : 'No',\n        enable_issue_commenting: commentsOn ? 'Yes' : 'No',\n        show_freewall: discussionOn ? 'Yes' : 'No',\n        allow_comment_thumbing: likingOn ? 'Yes' : 'No',\n        axis_x_title: axisXTitle,\n        axis_x_max: axisXMax,\n        axis_x_min: axisXMin,\n        axis_y_title: axisYTitle,\n        axis_y_max: axisYMax,\n        axis_y_min: axisYMin,\n        four_fields_top_left: fourFieldsTopLeft,\n        four_fields_top_right: fourFieldsTopRight,\n        four_fields_bottom_left: fourFieldsBottomLeft,\n        four_fields_bottom_right: fourFieldsBottomRight,\n        display_halo_when_rating: displayHaloWhenRating,\n        logo_image: radarImage,\n        title_logo: radarTitleImage,\n        timeline_label_format: timelineLabelFormat\n    }\n}\n\nexport const normalizeUpdateRadarInput = radarSettings => {\n    const {\n        group,\n        enableUrlLogin,\n        urlLoginExpire,\n        isRadarTemplate,\n        timelineLabelFormat\n    } = radarSettings\n\n    return {\n        ...normalizeRadarInput(radarSettings),\n\n        // Public group is an empty array atm\n        gid: (!group || (Array.isArray(group) && group.length === 0)) ? { id: 0 } : group,\n        enable_url_login: enableUrlLogin,\n        url_login_expire: urlLoginExpire,\n        radar_template: isRadarTemplate,\n        timeline_label_format: timelineLabelFormat\n    }\n}\n\nexport const normalizeCreateRadarInput = (radarSettings) => {\n    const {\n        group,\n        radarLanguage\n    } = radarSettings\n\n    return {\n        ...normalizeRadarInput(radarSettings),\n\n        // Public group is an empty array atm // TODO check why this is handled differently in update and create\n        gid: group,\n        language: radarLanguage || 'en'\n        // TODO check why enable_url_login etc are not in create\n    }\n}\n\nexport const normalizePhenomenon = (phenomenon) => {\n    const {\n        uuid\n    } = phenomenon\n\n    return {\n        uuid: toLower(uuid)\n    }\n}\n\nconst normalizeRelatedPhenomena = relatedPhenomena => relatedPhenomena.map(phenom => ({...phenom, id: phenom.uuid }))\n\nexport const normalizePhenomenonInput = phenomenonInput => {\n    const {\n        relatedPhenomena,\n        title,\n        language,\n        shortTitle,\n        state,\n        video,\n        body,\n        videoText,\n        lead,\n        imageUrl,\n        feedTag,\n        group,\n        userId,\n        archived,\n        timing,\n        links\n    } = phenomenonInput\n\n    const dto = {\n        short_name: shortTitle,\n        group_id: group,\n        user_id: Number(userId),\n        megatrend: 1,\n        language,\n        title,\n        issue_state: state.issue_state,\n        video_url: video,\n        body,\n        media_text: videoText,\n        related_phenomena: normalizeRelatedPhenomena(relatedPhenomena),\n        ingress_body: lead,\n        feed_tag: feedTag,\n        image_url: imageUrl,\n        timing,\n        links\n    }\n\n    if (archived) {\n        dto.archived = 1\n    }\n\n    if ((Number(group) === 0)) {\n        dto.visibility = 'PUBLIC'\n    }\n\n    return dto\n}\n\nexport const sortTypes = types => {\n  if (types.length) {\n    const customTypes = [...types]\n    const defaultTypes = types.slice(Math.max(types.length - 6, 0))\n\n    defaultTypes[1].order = 1\n    defaultTypes[3].order = 4\n    defaultTypes[0].order = 6\n    defaultTypes[4].order = 5\n    defaultTypes[5].order = 3\n    defaultTypes[2].order = 2\n\n    const sortedTypes = sortBy(defaultTypes, 'order')\n    customTypes.splice(customTypes.length - 6)\n\n    return [...customTypes, ...sortedTypes]\n  }\n\n  return types\n}\n\n// phenomenonTypes endpoint returns an object with numeric keys. Mapping through it with lodash removes self etc\nexport const normalizePhenomenonTypes = phenomenonTypes => {\n    const filteredTypes = filter(phenomenonTypes, phenomenonType => phenomenonType.id)\n\n    return sortTypes(filteredTypes)\n}\n\nexport const normalizeGroupPhenomenonTypes = (groupPhenomenonTypes, groupId) =>\n    groupPhenomenonTypes.map(type => {\n        return {\n            id: `fp:doc-types/group/${groupId}/${type.name}`,\n            title: type.label || type.name,\n            label: type.label || type.name,\n            groupType: true,\n            ...type\n        }\n    })\n\n// feedTags endpoint returns an object with numeric keys. Mapping through it with lodash removes self etc\nexport const normalizeFeedTags = feedTags =>\n    filter(feedTags, feedTag => feedTag.id)\n\nexport function normalizeRestApiResult ({count, ...drupalRestApiObject }) {\n  return {\n    results: Object.values(drupalRestApiObject).filter(({ url_alias }) => url_alias),\n    count: Number(count)\n  }\n}\n\nexport const editorRole = role => {\n    if (role === 'manager' || role === 'owner' || role === 'editor') {\n        return true\n    }\n\n    return false\n}\n\nexport const publicEditorRole = permissions => !!_.find(permissions, permission => permission === 'fp editor')\n\nexport const normalizeGroup = group => {\n    const {\n      id,\n      label,\n      radarsUsed,\n      radarsAllowed: radarsAllowedString,\n      accountDrupalRoles,\n      accountPermissions,\n      availableResources\n    } = group\n\n    // backend is returning this as a string for whatever reason\n    const radarsAllowed = Number(radarsAllowedString)\n\n    // not sure why this info is in the group\n    const canEditPublic = accountDrupalRoles && publicEditorRole(accountDrupalRoles[0])\n    const canEdit = accountPermissions && editorRole(accountPermissions.role)\n\n    return {\n      ...group,\n      id,\n      value: id,\n      label,\n      radarsAllowed,\n      radarsUsed,\n      hasAvailableRadars: radarsUsed < radarsAllowed,\n      availableResources,\n      canEditPublic,\n      canEdit\n    }\n}\n","import axios from 'axios'\nimport {getCsrfToken, getSessionToken} from '../session'\nimport {\n    normalizeRadar,\n    normalizeCreateRadarInput,\n    normalizeUpdateRadarInput,\n    normalizePhenomenon,\n    normalizePhenomenonInput,\n    normalizePhenomenonTypes,\n    normalizeGroupPhenomenonTypes,\n    normalizeFeedTags,\n    normalizeRestApiResult,\n    normalizeGroup\n} from './normalize'\nimport { get, map } from 'lodash-es'\n\nconst USER_PAGE_SIZE = 25\nconst DRUPAL_API_URL = process.env.REACT_APP_DRUPAL_API_URL\n\n/**\n * @typedef {Object} Group\n * @property {number} id\n * @property {string} title\n */\n/**\n * @typedef {Object} PhenomenonState\n * @property {boolean} halo\n * @property {boolean} speech_bubble\n */\n/**\n * @typedef {Object} Radar\n * @property {number} id\n * @property {string} label\n * @property {string} logo_image\n * @property {boolean} hide_users\n * @property {\"No\"|\"Yes\"} allow_issue_rating\n * @property {\"No\"|\"Yes\"} enable_issue_commenting\n * @property {\"No\"|\"Yes\"} allow_comment_thumbing\n * @property {\"No\"|\"Yes\"} enable_kiosk_mode\n * @property {\"No\"|\"Yes\"} enable_issue_rating\n * @property {Object} info_screen\n * @property {\"No\"|\"Yes\"} show_freewall\n * @property {?string} axis_x_title\n * @property {?number} axis_x_max\n * @property {?number} axis_x_min\n * @property {?string} axis_y_title\n * @property {?number} axis_y_max\n * @property {?number} axis_y_min\n * @property {?number} four_fields_top_left\n * @property {?number} four_fields_top_right\n * @property {?number} four_fields_bottom_left\n * @property {?number} four_fields_bottom_right\n * @property {?number} speech_bubble_flashing_time\n * @property {?number} display_halo_when_rating\n * @property {string} map_intro\n * @property {boolean} signal_tool_enabled\n * @property {boolean} assign_new_users\n * @property {boolean} disable_newsfeed\n * @property {boolean} enable_url_login\n * @property {?number} url_login_count\n * @property {boolean} radar_template\n * @property {string} uuid\n * @property {string} title\n * @property {string} language\n * @property {Object.<string, PhenomenonState>}} phenomena\n * @property {number} owner_id\n * @property {Group} group\n */\n\nconst GET = 'GET'\nconst POST = 'POST'\nconst DELETE = 'DELETE'\nconst PUT = 'PUT'\nconst PATCH = 'PATCH'\n\nasync function httpRequest(method, path, payload = null) {\n    return axios({\n        method,\n        url: `${DRUPAL_API_URL}/v1.0/${path}`,\n        headers: {\n            'X-CSRF-Token': getCsrfToken(),\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${getSessionToken()}`\n        },\n        withCredentials: true,\n        data: payload || null\n    }).then(res => res.data)\n}\n\nexport async function getGroups() {\n    return httpRequest(GET, 'group')\n}\n\nexport async function getMemberships() {\n    return httpRequest(GET, 'membership')\n}\n\nexport async function getRadar(id) {\n    return httpRequest(GET, `radars/${id}`)\n        .then(data => data[0])\n        .then(normalizeRadar)\n}\n\nexport async function createRadar(radarData) {\n    return httpRequest(POST, 'radars', normalizeCreateRadarInput(radarData))\n        .then(data => data[0])\n        .then(normalizeRadar)\n}\n\nexport async function cloneRadar(parentRadarId) {\n    return httpRequest(POST, 'radars', {parent_radar_id: parentRadarId})\n        .then(data => data[0])\n        .then(normalizeRadar)\n}\n\nexport async function updateRadar(radarId, radarData) {\n    return httpRequest(PATCH, `radars/${radarId}`, normalizeUpdateRadarInput(radarData))\n        .then(data => data[0])\n        .then(normalizeRadar)\n}\n\nexport async function deleteRadar(radarId) {\n    return httpRequest(DELETE, `radars/${radarId}`).then(() => radarId)\n}\n\nexport async function createPhenomenon(phenomenonData) {\n    return httpRequest(POST, 'phenomena', [normalizePhenomenonInput(phenomenonData)])\n        .then(data => data.phenomena[0])\n        .then(normalizePhenomenon)\n        .then(phenomenon => ({\n            ...phenomenonData,\n            ...phenomenon,\n        }))\n}\n\nexport async function updatePhenomenon(uuid, phenomenonData) {\n    return httpRequest(PATCH, `phenomena/${uuid}`, [normalizePhenomenonInput(phenomenonData)])\n        .then(normalizePhenomenon)\n        .then(phenomenon => ({\n            ...phenomenon,\n            ...phenomenonData\n        }))\n}\n\nexport async function createRadarSectorPhenomenon(data) {\n    return httpRequest(POST, 'radar-sector-phenomena', data)\n}\n\nexport async function updateRadarSectorPhenomenon(phenomenonId, phenomenonData) {\n    return httpRequest(PATCH, `radar-sector-phenomena/${phenomenonId}`, phenomenonData)\n}\n\nexport async function deleteRadarSectorPhenomenon(phenomenonId) {\n    return httpRequest(DELETE, `radar-sector-phenomena/${phenomenonId}`).then(() => phenomenonId)\n}\n\nexport async function getRadarTemplates() {\n    return httpRequest(GET, 'radartemplates?&sort=label')\n}\n\nexport async function updateGroup(groupId, data) {\n    return httpRequest(PATCH, `group/${groupId}`, data)\n}\n\nexport async function getRadarsByGroupId(groupId) {\n    return httpRequest(GET, `radarsingroup?filter[gid]=${groupId}`)\n}\n\nexport async function getMembershipByGroupId(groupId, page, roleFilter, searchPhrase) {\n    // eslint-disable-next-line\n    return httpRequest(GET, `membership?filter[gid]=${groupId}&page[number]=${page}&page[size]=${USER_PAGE_SIZE}${roleFilter && roleFilter.value ? `&filter[role]=${roleFilter.value.toLowerCase()}` : ''}${searchPhrase && searchPhrase.length ? `&email_like=${searchPhrase}` : ''}&sort=role_weight,email`)\n}\n\nexport async function deleteMemberships(membershipIds) {\n    return httpRequest(DELETE, `membershipsdelete`, membershipIds.map(mid => ({mid})))\n}\n\nexport async function updateMembershipRole(data) {\n    return httpRequest(PUT, 'membershiprole', data)\n}\n\nexport async function getGroupById(groupId) {\n    return httpRequest(GET, `group?filter[id]=${groupId}`)\n}\n\nexport async function grantRadarUserAccess(data) {\n    return httpRequest(POST, 'radargrantuseraccess', data)\n}\n\nexport async function revokeRadarUserAccess(data) {\n    return httpRequest(DELETE, 'radarrevokeuseraccess', data)\n}\n\nexport async function inviteToRadar(data, gid) {\n    return httpRequest(POST, `groupadduser/${gid}`, data)\n}\n\nexport async function createRadarShareLink(radarId, gid) {\n    // TODO: @jouni implement\n    return 'https://fp-dev.sangre.fi/fp-radar-visit/a363b635-bb6c-401b-a9e8-257f31c33a10'\n}\n\nexport async function getPhenomenaTypes(groupId) {\n    const phenomenaTypes = await httpRequest(GET, 'phenomenontypes?sort=weight')\n    const group = groupId && await getGroupById(groupId)\n    const groupTypes = get(group, '0.settings.doc_types.phenomenon.types', [])\n\n    return ([...normalizeGroupPhenomenonTypes(groupTypes, groupId), ...normalizePhenomenonTypes(phenomenaTypes)])\n}\n\nexport async function getRssFeedTags() {\n    return httpRequest(GET, 'rssfeedtags')\n        .then(normalizeFeedTags)\n}\n\n/**\n *\n * @return {Promise<{count: Number, results: Object[]}>}\n */\nexport async function getHubspotAlertsTaxonomy() {\n    return normalizeRestApiResult(await httpRequest(GET, 'hubspotalerts?sort=weight'))\n}\n\nexport async function getGroupSettings(gid) {\n    return httpRequest(GET, `groupsettings?gid=${Number(gid)}`)\n}\n\nexport async function getGroupsWithMemberShips() {\n    const [groups, memberships] = await Promise.all([getGroups(), getMemberships()])\n\n    const membershipGroupIds = memberships ? Object.values(memberships).map(membership => parseInt(membership.gid, 10)) : []\n\n    const groupsToNormalize = groups\n        ? Object.values(groups).filter(group => membershipGroupIds.indexOf(group.id) !== -1)\n        : []\n\n    return map(groupsToNormalize, normalizeGroup)\n}\n\nexport async function createSignal(data) {\n    return httpRequest(POST, `signals`, [data])\n}\n\nexport async function fetchShares(gid) {\n    return httpRequest(GET, `radarshares?gid=${gid}`)\n}\n\nexport async function regenerateShare(id) {\n    return httpRequest(DELETE, `radarshares/${id}/?regenerate=1`)\n}\n\nexport async function deleteShare(id) {\n    return httpRequest(DELETE, `radarshares/${id}`)\n}\n\n/**\n * Returns object containing public radar share expiry time and url\n * If share url doesn't epire if  is false\n * If public radar share doesn't exists, it returns null for url\n *\n * @param {number} radarId\n * @return {Promise<{expired: (Date|boolean), url: string|null }>}\n */\nexport async function getRadarPublicShare(radarId) {\n    return handlePublicShareInfo(await httpRequest(GET, `public-radar-shares?radar_id=${radarId}`))\n}\n\n/**\n* Creates or replaces a public radar share for a radar with a new exipiry time\n* If public radar share doesn't exists, it returns null for url\n*\n* @param {number} radarId\n* @param {Date} expired\n* @return {Promise<{expired: (Date|null), url: (string|null) }>}\n*/\nexport async function createOrReplaceRadarPublicShare({ radarId, expired = null }) {\n    return handlePublicShareInfo(await httpRequest(POST, `public-radar-shares?radar_id=${radarId}`, {\n        login_expire: expired instanceof Date ? Math.round(expired.getTime() / 1000)  : 0\n    }))\n}\n\n/**\n* Removes existing public radar share\n*\n* @param {number} radarId\n* @return {Promise<void>}\n*/\nexport async function removeRadarPublicShare(radarId) {\n    return httpRequest(DELETE, `public-radar-shares?radar_id=${radarId}`)\n}\n\n/**\n * Regenerates a new radar share url\n *\n * @param {number} radarId\n * @return {Promise<{expired: (Date|null), url: (string|null) }>}\n */\nexport async function regenerateRadarPublicShare(radarId) {\n    return handlePublicShareInfo(await httpRequest(DELETE, `public-radar-shares?radar_id=${radarId}&regenerate=1`))\n}\n\n/**\n *\n * @param {{ login_expire: number|boolean, radar_share_url: string|null }} info\n * @return {null|{expired: (Date|boolean), url}}\n */\nfunction handlePublicShareInfo(info) {\n    if (info) {\n        const  { login_expire, radar_share_url } = info\n        return { expired: login_expire ? new Date(login_expire * 1000) : false, url: radar_share_url }\n    } else {\n        return null\n    }\n}\n\nexport async function getVotingResults(radarId) {\n    return httpRequest(GET, `votes/?radar_id=${radarId}`)\n}\n\nexport default {\n    cloneRadar,\n    createPhenomenon,\n    createRadar,\n    createRadarSectorPhenomenon,\n    createSignal,\n    deleteMemberships,\n    deleteRadar,\n    deleteRadarSectorPhenomenon,\n    deleteShare,\n    fetchShares,\n    getGroupById,\n    getGroupSettings,\n    getGroups,\n    getGroupsWithMemberShips,\n    getMembershipByGroupId,\n    getMemberships,\n    getPhenomenaTypes,\n    getRadar,\n    getRadarTemplates,\n    getRadarsByGroupId,\n    getRssFeedTags,\n    getHubspotAlertsTaxonomy,\n    getVotingResults,\n    grantRadarUserAccess,\n    inviteToRadar,\n    regenerateShare,\n    revokeRadarUserAccess,\n    updateGroup,\n    updateMembershipRole,\n    updatePhenomenon,\n    updateRadar,\n    updateRadarSectorPhenomenon,\n    getRadarPublicShare,\n    removeRadarPublicShare,\n    createOrReplaceRadarPublicShare,\n    regenerateRadarPublicShare\n}\n","/* eslint-disable */\n\nif (!String.prototype.includes) {\n  String.prototype.includes = function(search, start) {\n    'use strict';\n    if (typeof start !== 'number') {\n      start = 0;\n    }\n\n    if (start + search.length > this.length) {\n      return false;\n    } else {\n      return this.indexOf(search, start) !== -1;\n    }\n  };\n}\n"],"sourceRoot":""}